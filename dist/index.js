"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"RenderFields",{enumerable:!0,get:function get(){return _RenderFields["default"]}}),Object.defineProperty(exports,"FormError",{enumerable:!0,get:function get(){return _FormError["default"]}}),Object.defineProperty(exports,"FormConfirmation",{enumerable:!0,get:function get(){return _FormConfirmation["default"]}}),Object.defineProperty(exports,"validateField",{enumerable:!0,get:function get(){return _validation.validateField}}),Object.defineProperty(exports,"Submit",{enumerable:!0,get:function get(){return _Submit["default"]}}),exports["default"]=void 0;var _react=_interopRequireWildcard(require("react")),_isomorphicUnfetch=_interopRequireDefault(require("isomorphic-unfetch")),_RenderFields=_interopRequireDefault(require("./FormElements/RenderFields")),_FormError=_interopRequireDefault(require("./FormElements/FormError")),_FormConfirmation=_interopRequireDefault(require("./FormElements/FormConfirmation")),_validation=require("./Helpers/validation"),_Submit=_interopRequireDefault(require("./FormElements/Submit"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return _getRequireWildcardCache=function(){return a},a}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;if(null===a||"object"!==_typeof(a)&&"function"!=typeof a)return{default:a};var b=_getRequireWildcardCache();if(b&&b.has(a))return b.get(a);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;f&&(f.get||f.set)?Object.defineProperty(c,e,f):c[e]=a[e]}return c["default"]=a,b&&b.set(a,c),c}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var GravityForm=function(a){function b(a){var c;return _classCallCheck(this,b),c=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a)),_defineProperty(_assertThisInitialized(c),"setTouched",function(a){c.setState({touched:_objectSpread({},c.state.touched,_defineProperty({},a,!0))})}),_defineProperty(_assertThisInitialized(c),"unsetError",function(a){var b=c.state.errorMessages;!b||b[a]&&(delete b[a],c.setState({errorMessages:b}))}),_defineProperty(_assertThisInitialized(c),"updateFormHandler",function(a,b){var d,e=c.state,f=e.formValues,g=e.conditioanlIds,h=e.conditionFields,j=b.id,k=b.type,l=b.isRequired;if("checkbox"===b.type){var m=_toConsumableArray(f[b.id].value),n=m.indexOf(a.target.value);-1<n?m.splice(n,1):m.push(a.target.value),d=m}else if("date"==b.type&&"datepicker"!==b.dateType){var o=b.subId,p=b.dateLabel,q=_toConsumableArray(f[b.id].value);q[o]={val:a.target.value,label:p},d=q}else if("consent"==b.type)d=a.target?a.target.checked:"null";else if("password"===b.type||"email"===b.type&&b.emailConfirmEnabled){var r=b.subId,s=f[b.id]&&f[b.id].value?_toConsumableArray(f[b.id].value):[];s[r]={val:a.target.value},d=s}else d=a.target?a.target.value:"null";"text"===k&&-1<b.cssClass.indexOf("iban")&&(k="iban");var t=(0,_validation.validateField)(d,b);if(-1!==g.indexOf(j)){f[j].value=d;for(var w=0;w<h.length;w++){var u=h[w].id,v=c.checkConditionalLogic(h[w].conditionalLogic,f);f[u].hideField=v,v&&(f[u].isRequired&&v&&(f[u].value=""),f[u].valid=!!f[u].isRequired)}}c.setState({formValues:_objectSpread({},f,_defineProperty({},j,{value:d,id:j,valid:t,label:b.label,pageNumber:b.pageNumber,cssClass:b.cssClass,isRequired:b.isRequired}))},function(){var a=c.props.onChange;a&&a(c.state.formValues)})}),_defineProperty(_assertThisInitialized(c),"scrollToConfirmation",function(){var a=!!c.wrapperRef&&c.wrapperRef.getBoundingClientRect();if(a&&window){var b=window.pageYOffset||document.documentElement.scrollTop;window.scrollTo({top:b+a.top-100})}}),_defineProperty(_assertThisInitialized(c),"onSubmit",function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(b){var d,e,f,g,h,i,j;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.preventDefault(),c.setState({submitting:!0,submitSuccess:!1,submitFailed:!1,confirmationMessage:!1,errorMessages:!1}),d=c.props,e=d.formID,f=d.backendUrl,g=d.jumpToConfirmation,h=d.onSubmitSuccess,i=f.substring(0,f.indexOf("/wp-json")),j=new FormData(b.target),(0,_isomorphicUnfetch["default"])("".concat(i,"/wp-json/gf/v2/forms/").concat(e,"/submissions"),{method:"POST",body:j}).then(function(a){return a.json()}).then(function(a){if(a&&a.is_valid){if(h){var i=h(a);if(!i)return!1}var b=a.confirmation_message,d=b||!1,e=d.type,f=d.link;if(e&&f&&"redirect"===e&&"undefined"!=typeof window)return window.location.replace(f),!1;c.setState({submitting:!1,submitSuccess:!0,confirmationMessage:a.confirmation_message}),g&&c.scrollToConfirmation()}else c.setState({submitting:!1,submitFailed:!0,errorMessages:"Something went wrong"})})["catch"](function(a){c.setState({submitting:!1,submitFailed:!0,errorMessages:a.response.validation_messages})});case 6:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}()),_defineProperty(_assertThisInitialized(c),"nextStep",function(a){a&&a.preventDefault();var b=c.state.activePage,d=c.props.activePage;d&&d(b+1),c.setState({activePage:b+1},function(){return c.scrollToConfirmation()})}),_defineProperty(_assertThisInitialized(c),"prevStep",function(a){a&&a.preventDefault();var b=c.state.activePage,d=c.props.activePage;d&&d(b-1),c.setState({activePage:b-1},function(){return c.scrollToConfirmation()})}),_defineProperty(_assertThisInitialized(c),"checkConditionalLogic",function(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],d=a.rules,e=a.actionType;if(!d)return!0;for(var f=b||c.state.formValues,g="hide"!==e,h=[],j=0;j<d.length;j++){var k=d[j],l=k.fieldId,m=k.value,n=k.operator,o=f[l].value&&f[l].value.value?f[l].value.value:f[l].value||!1,p=Array.isArray(o)?o.join(""):o;h[j]=m?p&&m==p?"hide"===e:"hide"!==e:p||m?"hide"!==e:"hide"===e,"isnot"===n&&(h[j]=!h[j])}return g=h.every(function(a){return!0===a}),g}),c.state={submitFailed:!1,errorMessages:!1,formValues:{},loading:!0,submitting:!1,submitSuccess:!1,confirmationMessage:!1,isValid:!1,formData:{},touched:{},activePage:!1,conditionFields:{},conditioanlIds:{},isMultipart:!1},c}return _inherits(b,a),_createClass(b,[{key:"componentDidMount",value:function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=this.props,c=b.formID,d=b.backendUrl,e=b.populatedFields,this._isMounted=!0,f=!1,a.next=5,(0,_isomorphicUnfetch["default"])("".concat(d,"/").concat(c)).then(function(a){return a.json()}).then(function(a){return a})["catch"](function(){return!1});case 5:if(g=a.sent,!(g&&this._isMounted)){a.next=32;break}for(h={},j=[],k=[],l=!0,m=!1,n=void 0,a.prev=13,o=function(){var a=q.value,b=void 0,c=a.inputName&&e&&e[a.inputName];if("checkbox"===a.type)b=a.choices.filter(function(b){return c?b.value===e[a.inputName]:b.isSelected}).map(function(a){return a.value});else if("radio"===a.type){if(c)b=e[a.inputName];else{var m=a.choices.find(function(a){return a.isSelected});b=m?m.value:""}}else if("select"===a.type){var n=a.choices.filter(function(b){return c?b.value===e[a.inputName]:b.isSelected}).map(function(a){return{value:a.value,label:a.text}});b=n&&0<n.length?n[0]:""}else b=c?e[a.inputName]:a.defaultValue,"fileupload"===a.type&&(f=!0);if(a.conditionalLogic){for(var d,g={id:a.id,conditionalLogic:a.conditionalLogic},i=a.conditionalLogic.rules.map(function(a){return a.fieldId}),l=0;l<i.length;l++)d=parseInt(i[l]),-1===k.indexOf(d)&&k.push(d);j.push(g)}h[a.id]={valid:(0,_validation.validateField)(b,a),value:b,label:a.label,pageNumber:a.pageNumber,cssClass:a.cssClass,isRequired:a.isRequired}},p=g.fields[Symbol.iterator]();!(l=(q=p.next()).done);l=!0)o();a.next=22;break;case 18:a.prev=18,a.t0=a["catch"](13),m=!0,n=a.t0;case 22:a.prev=22,a.prev=23,l||null==p["return"]||p["return"]();case 25:if(a.prev=25,!m){a.next=28;break}throw n;case 28:return a.finish(25);case 29:return a.finish(22);case 30:for(r=0;r<j.length;r++)h[j[r].id].hideField=this.checkConditionalLogic(j[r].conditionalLogic,h);this.setState({formData:g,formValues:h,activePage:!!g.pagination&&1,conditionFields:j,conditioanlIds:k,isMultipart:f},function(){var a=s.props,b=a.nextStep,c=a.prevStep,d=a.activePage;b&&b(function(){return s.nextStep}),c&&c(function(){return s.prevStep}),d&&d(s.state.activePage)});case 32:case"end":return a.stop();}},a,this,[[13,18,22,30],[23,,25,29]])}));return function componentDidMount(){return a.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=!1}},{key:"render",value:function render(){var a=this,b=this.state,c=b.formData,d=b.formValues,e=b.submitFailed,f=b.submitSuccess,g=b.touched,h=b.submitting,i=b.activePage,j=b.isMultipart,k=this.props,l=k.title,m=k.submitIcon,n=k.saveStateToHtmlField,o=k.styledComponents,p=k.customComponents,q=k.errorMessage,r=k.dropzoneText,s=o||!1,t=s.Button,u=s.Loading,v=s.GFWrapper,w=void 0===v?"div":v,x=s.FormError,y=c.cssClass,z=Object.keys(d).some(function(a){return!d[a].hideField&&d[a].valid}),A=!!i&&Object.keys(d).some(function(a){return d[a].pageNumber===i&&!d[a].hideField&&d[a].valid});return _react["default"].createElement(w,{ref:function ref(b){return a.wrapperRef=b},className:"form-wrapper",css:{position:"relative"},id:"gravity_form_".concat(this.props.formID)},c.title?null:u&&_react["default"].createElement(u,{isLoading:!0}),e&&!f&&_react["default"].createElement(_FormError["default"],{SFormError:x||!1,errorMessage:q||"There was a problem with your submission"}),f&&this.state.confirmationMessage&&_react["default"].createElement(_FormConfirmation["default"],{confirmation:this.state.confirmationMessage}),!f&&c.fields?_react["default"].createElement("form",{onSubmit:function onSubmit(b){return a.onSubmit(b)},className:y,encType:j?"multipart/form-data":void 0,noValidate:!0},(c.title||c.description)&&_react["default"].createElement("div",null,c.title&&l?_react["default"].createElement("h3",{className:"form-title"},c.title):null,c.description?_react["default"].createElement("p",{className:"form-description"},c.description):null),_react["default"].createElement("div",{className:"form-wrapper"},_react["default"].createElement(_RenderFields["default"],{styledComponents:o,customComponents:p,fields:c.fields,formValues:d,submitFailed:e,submitSuccess:f,updateForm:this.updateFormHandler,touched:g,setTouched:this.setTouched,pagination:c.pagination,activePage:i,prevStep:this.prevStep,nextStep:this.nextStep,isNextDisabled:A,checkConditionalLogic:this.checkConditionalLogic,saveStateToHtmlField:n,enableHoneypot:c.enableHoneypot,errors:this.state.errorMessages,unsetError:this.unsetError,dropzoneText:r}),(!c.pagination||c.pagination&&c.pagination.pages.length===i)&&_react["default"].createElement(_Submit["default"],{Button:t,Loading:u,formData:c,submitIcon:m,isDisabled:z,submitting:h,prevStep:this.prevStep}))):"")}}]),b}(_react.Component);GravityForm.defaultProps={title:!0,submitIcon:!1,saveStateToHtmlField:!1,jumpToConfirmation:!0};var _default=GravityForm;exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJHcmF2aXR5Rm9ybSIsInByb3BzIiwiaWQiLCJzZXRTdGF0ZSIsInRvdWNoZWQiLCJzdGF0ZSIsImVycm9yTWVzc2FnZXMiLCJldmVudCIsImZpZWxkIiwidmFsdWUiLCJmb3JtVmFsdWVzIiwiY29uZGl0aW9hbmxJZHMiLCJjb25kaXRpb25GaWVsZHMiLCJ0eXBlIiwiaXNSZXF1aXJlZCIsInZhbHVlcyIsImluZGV4IiwiaW5kZXhPZiIsInRhcmdldCIsInNwbGljZSIsInB1c2giLCJkYXRlVHlwZSIsInN1YklkIiwiZGF0ZUxhYmVsIiwidmFsIiwibGFiZWwiLCJjaGVja2VkIiwiZW1haWxDb25maXJtRW5hYmxlZCIsImNzc0NsYXNzIiwidmFsaWQiLCJpIiwibGVuZ3RoIiwiaGlkZSIsImNoZWNrQ29uZGl0aW9uYWxMb2dpYyIsImNvbmRpdGlvbmFsTG9naWMiLCJoaWRlRmllbGQiLCJwYWdlTnVtYmVyIiwib25DaGFuZ2UiLCJyZWN0Iiwid3JhcHBlclJlZiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpbmRvdyIsInNjcm9sbFRvcCIsInBhZ2VZT2Zmc2V0IiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUbyIsInRvcCIsInByZXZlbnREZWZhdWx0Iiwic3VibWl0dGluZyIsInN1Ym1pdFN1Y2Nlc3MiLCJzdWJtaXRGYWlsZWQiLCJjb25maXJtYXRpb25NZXNzYWdlIiwiZm9ybUlEIiwiYmFja2VuZFVybCIsImp1bXBUb0NvbmZpcm1hdGlvbiIsIm9uU3VibWl0U3VjY2VzcyIsImdmU3VibWlzc2lvblVybCIsInN1YnN0cmluZyIsImRhdGEiLCJGb3JtRGF0YSIsIm1ldGhvZCIsImJvZHkiLCJ0aGVuIiwicmVzcCIsImpzb24iLCJyZXNwb25zZSIsImlzX3ZhbGlkIiwicmVzIiwiY29uZmlybWF0aW9uX21lc3NhZ2UiLCJsaW5rIiwibG9jYXRpb24iLCJyZXBsYWNlIiwic2Nyb2xsVG9Db25maXJtYXRpb24iLCJlcnJvciIsInZhbGlkYXRpb25fbWVzc2FnZXMiLCJlIiwiYWN0aXZlUGFnZSIsInNldEFjdGl2ZSIsImNvbmRpdGlvbiIsImZpZWxkcyIsInJ1bGVzIiwiYWN0aW9uVHlwZSIsImhpZGVCYXNlZE9uUnVsZXMiLCJmaWVsZElkIiwib3BlcmF0b3IiLCJjb25kaXRpb25GaWVsZFZhbHVlIiwic3RyaW5nVmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJqb2luIiwiZXZlcnkiLCJsb2FkaW5nIiwiaXNWYWxpZCIsImZvcm1EYXRhIiwiaXNNdWx0aXBhcnQiLCJwb3B1bGF0ZWRGaWVsZHMiLCJfaXNNb3VudGVkIiwiZm9ybSIsImhhc1BvcHVsYXRpb24iLCJpbnB1dE5hbWUiLCJjaG9pY2VzIiwiZmlsdGVyIiwiY2hvaWNlIiwiaXNTZWxlY3RlZCIsIm1hcCIsInByZXNlbGVjdGVkIiwiZmluZCIsInNlbGVjdGVkT3B0aW9uIiwiaXRlbSIsInRleHQiLCJkZWZhdWx0VmFsdWUiLCJ0bXBGaWVsZCIsImlkcyIsInBhcnNlSW50IiwicGFnaW5hdGlvbiIsIm5leHRTdGVwIiwicHJldlN0ZXAiLCJ0aXRsZSIsInN1Ym1pdEljb24iLCJzYXZlU3RhdGVUb0h0bWxGaWVsZCIsInN0eWxlZENvbXBvbmVudHMiLCJjdXN0b21Db21wb25lbnRzIiwiZXJyb3JNZXNzYWdlIiwiZHJvcHpvbmVUZXh0IiwiQnV0dG9uIiwiTG9hZGluZyIsIkdGV3JhcHBlciIsIlNGb3JtRXJyb3IiLCJGb3JtRXJyb3IiLCJpc0Rpc2FibGVkIiwiT2JqZWN0Iiwia2V5cyIsInNvbWUiLCJ4IiwiaXNOZXh0RGlzYWJsZWQiLCJlbCIsInBvc2l0aW9uIiwib25TdWJtaXQiLCJkZXNjcmlwdGlvbiIsInVwZGF0ZUZvcm1IYW5kbGVyIiwic2V0VG91Y2hlZCIsImVuYWJsZUhvbmV5cG90IiwidW5zZXRFcnJvciIsInBhZ2VzIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIl0sIm1hcHBpbmdzIjoidXdKQVFN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SSxVQVRuQixDQVVFLFVBQVUsQ0FBRS9DLENBQVEsQ0FBQ3FCLFVBVnZCLENBV0UsVUFBVSxDQUFFdEMsQ0FYZCxDQVlFLFFBQVEsQ0FBRSxLQUFLd0MsUUFaakIsQ0FhRSxRQUFRLENBQUUsS0FBS0QsUUFiakIsQ0FjRSxjQUFjLENBQUVtQixDQWRsQixDQWVFLHFCQUFxQixDQUFFLEtBQUt0RyxxQkFmOUIsQ0FnQkUsb0JBQW9CLENBQUV1RixDQWhCeEIsQ0FpQkUsY0FBYyxDQUFFMUIsQ0FBUSxDQUFDZ0QsY0FqQjNCLENBa0JFLE1BQU0sQ0FBRSxLQUFLekksS0FBTCxDQUFXQyxhQWxCckIsQ0FtQkUsVUFBVSxDQUFFLEtBQUt5SSxVQW5CbkIsQ0FvQkUsWUFBWSxDQUFFbkIsQ0FwQmhCLEVBREYsQ0F1QkcsQ0FBQyxDQUFDOUIsQ0FBUSxDQUFDcUIsVUFBVixFQUNDckIsQ0FBUSxDQUFDcUIsVUFBVCxFQUNDckIsQ0FBUSxDQUFDcUIsVUFBVCxDQUFvQjZCLEtBQXBCLENBQTBCakgsTUFBMUIsR0FBcUM4QyxDQUZ4QyxHQUdDLGdDQUFDLGtCQUFELEVBQ0UsTUFBTSxDQUFFZ0QsQ0FEVixDQUVFLE9BQU8sQ0FBRUMsQ0FGWCxDQUdFLFFBQVEsQ0FBRWhDLENBSFosQ0FJRSxVQUFVLENBQUV5QixDQUpkLENBS0UsVUFBVSxDQUFFVyxDQUxkLENBTUUsVUFBVSxDQUFFakYsQ0FOZCxDQU9FLFFBQVEsQ0FBRSxLQUFLb0UsUUFQakIsRUExQkosQ0FqQkYsQ0FERCxDQXlEQyxFQTlFSixDQWtGSCxDLE9BdmdCdUI0QixnQixFQTBnQjFCakosV0FBVyxDQUFDa0osWUFBWixDQUEyQixDQUN6QjVCLEtBQUssR0FEb0IsQ0FFekJDLFVBQVUsR0FGZSxDQUd6QkMsb0JBQW9CLEdBSEssQ0FJekJqRSxrQkFBa0IsR0FKTyxDLGNBU1p2RCxXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IENvbXBvbmVudCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IGZldGNoIGZyb20gXCJpc29tb3JwaGljLXVuZmV0Y2hcIjtcbmltcG9ydCBSZW5kZXJGaWVsZHMgZnJvbSBcIi4vRm9ybUVsZW1lbnRzL1JlbmRlckZpZWxkc1wiO1xuaW1wb3J0IEZvcm1FcnJvciBmcm9tIFwiLi9Gb3JtRWxlbWVudHMvRm9ybUVycm9yXCI7XG5pbXBvcnQgRm9ybUNvbmZpcm1hdGlvbiBmcm9tIFwiLi9Gb3JtRWxlbWVudHMvRm9ybUNvbmZpcm1hdGlvblwiO1xuaW1wb3J0IHsgdmFsaWRhdGVGaWVsZCB9IGZyb20gXCIuL0hlbHBlcnMvdmFsaWRhdGlvblwiO1xuaW1wb3J0IFN1Ym1pdCBmcm9tIFwiLi9Gb3JtRWxlbWVudHMvU3VibWl0XCI7XG5cbmNsYXNzIEdyYXZpdHlGb3JtIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN1Ym1pdEZhaWxlZDogZmFsc2UsXG4gICAgICBlcnJvck1lc3NhZ2VzOiBmYWxzZSxcbiAgICAgIGZvcm1WYWx1ZXM6IHt9LFxuICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgc3VibWl0U3VjY2VzczogZmFsc2UsXG4gICAgICBjb25maXJtYXRpb25NZXNzYWdlOiBmYWxzZSxcbiAgICAgIGlzVmFsaWQ6IGZhbHNlLFxuICAgICAgZm9ybURhdGE6IHt9LFxuICAgICAgdG91Y2hlZDoge30sXG4gICAgICBhY3RpdmVQYWdlOiBmYWxzZSxcbiAgICAgIGNvbmRpdGlvbkZpZWxkczoge30sXG4gICAgICBjb25kaXRpb2FubElkczoge30sXG4gICAgICBpc011bHRpcGFydDogZmFsc2VcbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgY29uc3QgeyBmb3JtSUQsIGJhY2tlbmRVcmwsIHBvcHVsYXRlZEZpZWxkcyB9ID0gdGhpcy5wcm9wcztcbiAgICB0aGlzLl9pc01vdW50ZWQgPSB0cnVlO1xuICAgIGxldCBpc011bHRpcGFydCA9IGZhbHNlO1xuICAgIGNvbnN0IGZvcm0gPSBhd2FpdCBmZXRjaChgJHtiYWNrZW5kVXJsfS8ke2Zvcm1JRH1gKVxuICAgICAgLnRoZW4ocmVzcCA9PiByZXNwLmpzb24oKSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlKVxuICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcblxuICAgIGlmIChmb3JtICYmIHRoaXMuX2lzTW91bnRlZCkge1xuICAgICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xuICAgICAgY29uc3QgY29uZGl0aW9uRmllbGRzID0gW107XG4gICAgICBjb25zdCBjb25kaXRpb2FubElkcyA9IFtdO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICBmb3IgKGNvbnN0IGZpZWxkIG9mIGZvcm0uZmllbGRzKSB7XG4gICAgICAgIGxldCB2YWx1ZTtcbiAgICAgICAgY29uc3QgaGFzUG9wdWxhdGlvbiA9XG4gICAgICAgICAgZmllbGQuaW5wdXROYW1lICYmXG4gICAgICAgICAgcG9wdWxhdGVkRmllbGRzICYmXG4gICAgICAgICAgcG9wdWxhdGVkRmllbGRzW2ZpZWxkLmlucHV0TmFtZV07XG4gICAgICAgIGlmIChmaWVsZC50eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICB2YWx1ZSA9IGZpZWxkLmNob2ljZXNcbiAgICAgICAgICAgIC5maWx0ZXIoY2hvaWNlID0+XG4gICAgICAgICAgICAgIGhhc1BvcHVsYXRpb25cbiAgICAgICAgICAgICAgICA/IGNob2ljZS52YWx1ZSA9PT0gcG9wdWxhdGVkRmllbGRzW2ZpZWxkLmlucHV0TmFtZV1cbiAgICAgICAgICAgICAgICA6IGNob2ljZS5pc1NlbGVjdGVkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAubWFwKGNob2ljZSA9PiBjaG9pY2UudmFsdWUpO1xuICAgICAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09IFwicmFkaW9cIikge1xuICAgICAgICAgIGlmIChoYXNQb3B1bGF0aW9uKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHBvcHVsYXRlZEZpZWxkc1tmaWVsZC5pbnB1dE5hbWVdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwcmVzZWxlY3RlZCA9IGZpZWxkLmNob2ljZXMuZmluZChjaG9pY2UgPT4gY2hvaWNlLmlzU2VsZWN0ZWQpO1xuICAgICAgICAgICAgdmFsdWUgPSBwcmVzZWxlY3RlZCA/IHByZXNlbGVjdGVkLnZhbHVlIDogXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSA9PT0gXCJzZWxlY3RcIikge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gZmllbGQuY2hvaWNlc1xuICAgICAgICAgICAgLmZpbHRlcihjaG9pY2UgPT5cbiAgICAgICAgICAgICAgaGFzUG9wdWxhdGlvblxuICAgICAgICAgICAgICAgID8gY2hvaWNlLnZhbHVlID09PSBwb3B1bGF0ZWRGaWVsZHNbZmllbGQuaW5wdXROYW1lXVxuICAgICAgICAgICAgICAgIDogY2hvaWNlLmlzU2VsZWN0ZWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIC5tYXAoaXRlbSA9PiAoeyB2YWx1ZTogaXRlbS52YWx1ZSwgbGFiZWw6IGl0ZW0udGV4dCB9KSk7XG4gICAgICAgICAgdmFsdWUgPVxuICAgICAgICAgICAgc2VsZWN0ZWRPcHRpb24gJiYgc2VsZWN0ZWRPcHRpb24ubGVuZ3RoID4gMFxuICAgICAgICAgICAgICA/IHNlbGVjdGVkT3B0aW9uWzBdXG4gICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZSA9IGhhc1BvcHVsYXRpb25cbiAgICAgICAgICAgID8gcG9wdWxhdGVkRmllbGRzW2ZpZWxkLmlucHV0TmFtZV1cbiAgICAgICAgICAgIDogZmllbGQuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgIGlmIChmaWVsZC50eXBlID09PSBcImZpbGV1cGxvYWRcIikge1xuICAgICAgICAgICAgaXNNdWx0aXBhcnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGdyYWIgYWxsIGNvbmRpdGlvbmFsIGxvZ2ljIGZpZWxkc1xuICAgICAgICBpZiAoZmllbGQuY29uZGl0aW9uYWxMb2dpYykge1xuICAgICAgICAgIGNvbnN0IHRtcEZpZWxkID0ge1xuICAgICAgICAgICAgaWQ6IGZpZWxkLmlkLFxuICAgICAgICAgICAgY29uZGl0aW9uYWxMb2dpYzogZmllbGQuY29uZGl0aW9uYWxMb2dpY1xuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3QgaWRzID0gZmllbGQuY29uZGl0aW9uYWxMb2dpYy5ydWxlcy5tYXAoaXRlbSA9PiBpdGVtLmZpZWxkSWQpO1xuICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHBhcnNlSW50KGlkc1tpXSk7XG4gICAgICAgICAgICBpZiAoY29uZGl0aW9hbmxJZHMuaW5kZXhPZihpZCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgIGNvbmRpdGlvYW5sSWRzLnB1c2goaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25kaXRpb25GaWVsZHMucHVzaCh0bXBGaWVsZCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtVmFsdWVzW2ZpZWxkLmlkXSA9IHtcbiAgICAgICAgICB2YWxpZDogdmFsaWRhdGVGaWVsZCh2YWx1ZSwgZmllbGQpLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGxhYmVsOiBmaWVsZC5sYWJlbCxcbiAgICAgICAgICBwYWdlTnVtYmVyOiBmaWVsZC5wYWdlTnVtYmVyLFxuICAgICAgICAgIGNzc0NsYXNzOiBmaWVsZC5jc3NDbGFzcyxcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmaWVsZC5pc1JlcXVpcmVkXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBjb25kaXRpb24gbG9naWNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZGl0aW9uRmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvcm1WYWx1ZXNbXG4gICAgICAgICAgY29uZGl0aW9uRmllbGRzW2ldLmlkXG4gICAgICAgIF0uaGlkZUZpZWxkID0gdGhpcy5jaGVja0NvbmRpdGlvbmFsTG9naWMoXG4gICAgICAgICAgY29uZGl0aW9uRmllbGRzW2ldLmNvbmRpdGlvbmFsTG9naWMsXG4gICAgICAgICAgZm9ybVZhbHVlc1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZm9ybURhdGE6IGZvcm0sXG4gICAgICAgIGZvcm1WYWx1ZXMsXG4gICAgICAgIGFjdGl2ZVBhZ2U6IGZvcm0ucGFnaW5hdGlvbiA/IDEgOiBmYWxzZSxcbiAgICAgICAgY29uZGl0aW9uRmllbGRzLFxuICAgICAgICBjb25kaXRpb2FubElkcyxcbiAgICAgICAgaXNNdWx0aXBhcnRcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgLy8gcGFzcyBzdGF0ZSB0byBwYXJlbnQgY29tcG9uZW50XG4gICAgICAgIGNvbnN0IHsgbmV4dFN0ZXAsIHByZXZTdGVwLCBhY3RpdmVQYWdlIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAobmV4dFN0ZXApIHtcbiAgICAgICAgICBuZXh0U3RlcCgoKSA9PiB0aGlzLm5leHRTdGVwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJldlN0ZXApIHtcbiAgICAgICAgICBwcmV2U3RlcCgoKSA9PiB0aGlzLnByZXZTdGVwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWN0aXZlUGFnZSkge1xuICAgICAgICAgIGFjdGl2ZVBhZ2UodGhpcy5zdGF0ZS5hY3RpdmVQYWdlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7XG4gIH1cblxuICBzZXRUb3VjaGVkID0gaWQgPT4ge1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgdG91Y2hlZDogeyAuLi50aGlzLnN0YXRlLnRvdWNoZWQsIFtpZF06IHRydWUgfVxuICAgIH0pO1xuICB9O1xuXG4gIHVuc2V0RXJyb3IgPSBpZCA9PiB7XG4gICAgY29uc3QgeyBlcnJvck1lc3NhZ2VzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGlmICghZXJyb3JNZXNzYWdlcykgcmV0dXJuO1xuXG4gICAgaWYgKGVycm9yTWVzc2FnZXNbaWRdKSB7XG4gICAgICBkZWxldGUgZXJyb3JNZXNzYWdlc1tpZF07XG4gICAgICB0aGlzLnNldFN0YXRlKHsgZXJyb3JNZXNzYWdlcyB9KTtcbiAgICB9XG4gIH07XG5cbiAgdXBkYXRlRm9ybUhhbmRsZXIgPSAoZXZlbnQsIGZpZWxkKSA9PiB7XG4gICAgY29uc3QgeyBmb3JtVmFsdWVzLCBjb25kaXRpb2FubElkcywgY29uZGl0aW9uRmllbGRzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGxldCB7IGlkLCB0eXBlLCBpc1JlcXVpcmVkIH0gPSBmaWVsZDtcbiAgICAvLyBTZXQgbmV3IHZhbHVlXG4gICAgbGV0IHZhbHVlO1xuXG4gICAgaWYgKGZpZWxkLnR5cGUgPT09IFwiY2hlY2tib3hcIikge1xuICAgICAgY29uc3QgdmFsdWVzID0gWy4uLmZvcm1WYWx1ZXNbZmllbGQuaWRdLnZhbHVlXTtcbiAgICAgIGNvbnN0IGluZGV4ID0gdmFsdWVzLmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHZhbHVlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWVzLnB1c2goZXZlbnQudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWVzO1xuICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSA9PSBcImRhdGVcIiAmJiBmaWVsZC5kYXRlVHlwZSAhPT0gXCJkYXRlcGlja2VyXCIpIHtcbiAgICAgIGNvbnN0IHsgc3ViSWQsIGRhdGVMYWJlbCB9ID0gZmllbGQ7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBbLi4uZm9ybVZhbHVlc1tmaWVsZC5pZF0udmFsdWVdO1xuICAgICAgdmFsdWVzW3N1YklkXSA9IHtcbiAgICAgICAgdmFsOiBldmVudC50YXJnZXQudmFsdWUsXG4gICAgICAgIGxhYmVsOiBkYXRlTGFiZWxcbiAgICAgIH07XG4gICAgICB2YWx1ZSA9IHZhbHVlcztcbiAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT0gXCJjb25zZW50XCIpIHtcbiAgICAgIHZhbHVlID0gZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LmNoZWNrZWQgOiBcIm51bGxcIjtcbiAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT09IFwicGFzc3dvcmRcIiB8fCAoZmllbGQudHlwZSA9PT0gXCJlbWFpbFwiICYmIGZpZWxkLmVtYWlsQ29uZmlybUVuYWJsZWQpKSB7XG4gICAgICBjb25zdCB7IHN1YklkIH0gPSBmaWVsZDtcbiAgICAgIGNvbnN0IHZhbHVlcyA9XG4gICAgICAgIGZvcm1WYWx1ZXNbZmllbGQuaWRdICYmIGZvcm1WYWx1ZXNbZmllbGQuaWRdLnZhbHVlXG4gICAgICAgICAgPyBbLi4uZm9ybVZhbHVlc1tmaWVsZC5pZF0udmFsdWVdXG4gICAgICAgICAgOiBbXTtcbiAgICAgIHZhbHVlc1tzdWJJZF0gPSB7XG4gICAgICAgIHZhbDogZXZlbnQudGFyZ2V0LnZhbHVlXG4gICAgICB9O1xuICAgICAgdmFsdWUgPSB2YWx1ZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LnZhbHVlIDogXCJudWxsXCI7XG4gICAgfVxuICAgIC8vIGlmIGZpZWxkIGlzIElCQU5cbiAgICBpZiAodHlwZSA9PT0gXCJ0ZXh0XCIgJiYgZmllbGQuY3NzQ2xhc3MuaW5kZXhPZihcImliYW5cIikgPiAtMSkge1xuICAgICAgdHlwZSA9IFwiaWJhblwiO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGZpZWxkXG4gICAgY29uc3QgdmFsaWQgPSB2YWxpZGF0ZUZpZWxkKHZhbHVlLCBmaWVsZCk7XG5cbiAgICAvLyBpZiBmaWVsZCBJRCBpcyBzb21ld2hlcmUgaW4gY29uZGl0aW9uYWwgZmllbGRzXG4gICAgLy8gcmVjYWxjdWxhdGUgYWxsIGNvbmRpdGlvbnNcbiAgICBpZiAoY29uZGl0aW9hbmxJZHMuaW5kZXhPZihpZCkgIT09IC0xKSB7XG4gICAgICBmb3JtVmFsdWVzW2lkXS52YWx1ZSA9IHZhbHVlO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25kaXRpb25GaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgeyBpZCB9ID0gY29uZGl0aW9uRmllbGRzW2ldO1xuICAgICAgICBjb25zdCBoaWRlID0gdGhpcy5jaGVja0NvbmRpdGlvbmFsTG9naWMoXG4gICAgICAgICAgY29uZGl0aW9uRmllbGRzW2ldLmNvbmRpdGlvbmFsTG9naWMsXG4gICAgICAgICAgZm9ybVZhbHVlc1xuICAgICAgICApO1xuICAgICAgICBmb3JtVmFsdWVzW2lkXS5oaWRlRmllbGQgPSBoaWRlO1xuICAgICAgICBpZiAoaGlkZSkge1xuICAgICAgICAgIGlmIChmb3JtVmFsdWVzW2lkXS5pc1JlcXVpcmVkICYmIGhpZGUpIHtcbiAgICAgICAgICAgIGZvcm1WYWx1ZXNbaWRdLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9ybVZhbHVlc1tpZF0udmFsaWQgPSAhIWZvcm1WYWx1ZXNbaWRdLmlzUmVxdWlyZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldFN0YXRlKFxuICAgICAge1xuICAgICAgICBmb3JtVmFsdWVzOiB7XG4gICAgICAgICAgLi4uZm9ybVZhbHVlcyxcbiAgICAgICAgICBbaWRdOiB7XG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgdmFsaWQsXG4gICAgICAgICAgICBsYWJlbDogZmllbGQubGFiZWwsXG4gICAgICAgICAgICBwYWdlTnVtYmVyOiBmaWVsZC5wYWdlTnVtYmVyLFxuICAgICAgICAgICAgY3NzQ2xhc3M6IGZpZWxkLmNzc0NsYXNzLFxuICAgICAgICAgICAgaXNSZXF1aXJlZDogZmllbGQuaXNSZXF1aXJlZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8gcGFzcyBzdGF0ZSB0byBwYXJlbnQgY29tcG9uZW50XG4gICAgICAgIGNvbnN0IHsgb25DaGFuZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgICAgIG9uQ2hhbmdlKHRoaXMuc3RhdGUuZm9ybVZhbHVlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9O1xuXG4gIHNjcm9sbFRvQ29uZmlybWF0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IHJlY3QgPSB0aGlzLndyYXBwZXJSZWZcbiAgICAgID8gdGhpcy53cmFwcGVyUmVmLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICA6IGZhbHNlO1xuICAgIGlmIChyZWN0ICYmIHdpbmRvdykge1xuICAgICAgY29uc3Qgc2Nyb2xsVG9wID1cbiAgICAgICAgd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgICB3aW5kb3cuc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IHNjcm9sbFRvcCArIHJlY3QudG9wIC0gMTAwXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgb25TdWJtaXQgPSBhc3luYyBldmVudCA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIHN1Ym1pdHRpbmc6IHRydWUsXG4gICAgICBzdWJtaXRTdWNjZXNzOiBmYWxzZSxcbiAgICAgIHN1Ym1pdEZhaWxlZDogZmFsc2UsXG4gICAgICBjb25maXJtYXRpb25NZXNzYWdlOiBmYWxzZSxcbiAgICAgIGVycm9yTWVzc2FnZXM6IGZhbHNlXG4gICAgfSk7XG4gICAgY29uc3Qge1xuICAgICAgZm9ybUlELFxuICAgICAgYmFja2VuZFVybCxcbiAgICAgIGp1bXBUb0NvbmZpcm1hdGlvbixcbiAgICAgIG9uU3VibWl0U3VjY2Vzc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGdmU3VibWlzc2lvblVybCA9IGJhY2tlbmRVcmwuc3Vic3RyaW5nKFxuICAgICAgMCxcbiAgICAgIGJhY2tlbmRVcmwuaW5kZXhPZihcIi93cC1qc29uXCIpXG4gICAgKTtcbiAgICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKGV2ZW50LnRhcmdldCk7XG5cbiAgICBmZXRjaChgJHtnZlN1Ym1pc3Npb25Vcmx9L3dwLWpzb24vZ2YvdjIvZm9ybXMvJHtmb3JtSUR9L3N1Ym1pc3Npb25zYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IGRhdGFcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzcCA9PiByZXNwLmpzb24oKSlcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmlzX3ZhbGlkKSB7XG4gICAgICAgICAgaWYgKG9uU3VibWl0U3VjY2Vzcykge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gb25TdWJtaXRTdWNjZXNzKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmICghcmVzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uTWVzc2FnZSA9IHJlc3BvbnNlLmNvbmZpcm1hdGlvbl9tZXNzYWdlO1xuICAgICAgICAgIGNvbnN0IHsgdHlwZSwgbGluayB9ID0gY29uZmlybWF0aW9uTWVzc2FnZSB8fCBmYWxzZTtcbiAgICAgICAgICBpZiAodHlwZSAmJiBsaW5rICYmIHR5cGUgPT09IFwicmVkaXJlY3RcIikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UobGluayk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHN1Ym1pdFN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBjb25maXJtYXRpb25NZXNzYWdlOiByZXNwb25zZS5jb25maXJtYXRpb25fbWVzc2FnZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChqdW1wVG9Db25maXJtYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Db25maXJtYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHN1Ym1pdEZhaWxlZDogdHJ1ZSxcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZXM6IFwiU29tZXRoaW5nIHdlbnQgd3JvbmdcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgc3VibWl0dGluZzogZmFsc2UsXG4gICAgICAgICAgc3VibWl0RmFpbGVkOiB0cnVlLFxuICAgICAgICAgIGVycm9yTWVzc2FnZXM6IGVycm9yLnJlc3BvbnNlLnZhbGlkYXRpb25fbWVzc2FnZXNcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgfTtcblxuICBuZXh0U3RlcCA9IGUgPT4ge1xuICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHsgYWN0aXZlUGFnZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGFjdGl2ZVBhZ2U6IHNldEFjdGl2ZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHNldEFjdGl2ZSAmJiBzZXRBY3RpdmUoYWN0aXZlUGFnZSArIDEpO1xuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICB7XG4gICAgICAgIGFjdGl2ZVBhZ2U6IGFjdGl2ZVBhZ2UgKyAxXG4gICAgICB9LFxuICAgICAgKCkgPT4gdGhpcy5zY3JvbGxUb0NvbmZpcm1hdGlvbigpXG4gICAgKTtcbiAgfTtcblxuICBwcmV2U3RlcCA9IGUgPT4ge1xuICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHsgYWN0aXZlUGFnZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGFjdGl2ZVBhZ2U6IHNldEFjdGl2ZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHNldEFjdGl2ZSAmJiBzZXRBY3RpdmUoYWN0aXZlUGFnZSAtIDEpO1xuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICB7XG4gICAgICAgIGFjdGl2ZVBhZ2U6IGFjdGl2ZVBhZ2UgLSAxXG4gICAgICB9LFxuICAgICAgKCkgPT4gdGhpcy5zY3JvbGxUb0NvbmZpcm1hdGlvbigpXG4gICAgKTtcbiAgfTtcblxuICBjaGVja0NvbmRpdGlvbmFsTG9naWMgPSAoY29uZGl0aW9uLCBmaWVsZHMgPSBmYWxzZSkgPT4ge1xuICAgIGNvbnN0IHsgcnVsZXMsIGFjdGlvblR5cGUgfSA9IGNvbmRpdGlvbjtcbiAgICBpZiAoIXJ1bGVzKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSBmaWVsZHMgfHwgdGhpcy5zdGF0ZS5mb3JtVmFsdWVzO1xuXG4gICAgLy8gc2hvdyBvbmx5IGlmIGlzIHNlbGVjdGVkIFwiQWxsIGZpZWxkc1wiIChpdCBzaG91bGQgYmUgdHdlYWtlZCBpbiBmdXR1cmUpXG4gICAgLy8gd29ya3Mgb25seSBcInNob3cvaGlkZSB3aGVuIGZpZWxkIGlzIGVxdWFsIHRvXCJcbiAgICBsZXQgaGlkZUZpZWxkID0gYWN0aW9uVHlwZSAhPT0gXCJoaWRlXCI7XG4gICAgY29uc3QgaGlkZUJhc2VkT25SdWxlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IHsgZmllbGRJZCwgdmFsdWUsIG9wZXJhdG9yIH0gPSBydWxlc1tpXTtcbiAgICAgIGNvbnN0IGNvbmRpdGlvbkZpZWxkVmFsdWUgPVxuICAgICAgICBmb3JtVmFsdWVzW2ZpZWxkSWRdLnZhbHVlICYmIGZvcm1WYWx1ZXNbZmllbGRJZF0udmFsdWUudmFsdWVcbiAgICAgICAgICA/IGZvcm1WYWx1ZXNbZmllbGRJZF0udmFsdWUudmFsdWVcbiAgICAgICAgICA6IGZvcm1WYWx1ZXNbZmllbGRJZF0udmFsdWUgfHwgZmFsc2U7XG5cbiAgICAgIGNvbnN0IHN0cmluZ1ZhbHVlID0gQXJyYXkuaXNBcnJheShjb25kaXRpb25GaWVsZFZhbHVlKVxuICAgICAgICA/IGNvbmRpdGlvbkZpZWxkVmFsdWUuam9pbihcIlwiKVxuICAgICAgICA6IGNvbmRpdGlvbkZpZWxkVmFsdWU7XG5cbiAgICAgIC8vIENoZWNrIGlmIGNvbXBhcmlzaW9uIHZhbHVlIGlzIGVtcHR5XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIGlmICghc3RyaW5nVmFsdWUgJiYgIXZhbHVlKSB7XG4gICAgICAgICAgaGlkZUJhc2VkT25SdWxlc1tpXSA9IGFjdGlvblR5cGUgPT09IFwiaGlkZVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhpZGVCYXNlZE9uUnVsZXNbaV0gPSBhY3Rpb25UeXBlICE9PSBcImhpZGVcIjtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzdHJpbmdWYWx1ZSAmJiB2YWx1ZSA9PSBzdHJpbmdWYWx1ZSkge1xuICAgICAgICBoaWRlQmFzZWRPblJ1bGVzW2ldID0gYWN0aW9uVHlwZSA9PT0gXCJoaWRlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBoaWRlQmFzZWRPblJ1bGVzW2ldID0gYWN0aW9uVHlwZSAhPT0gXCJoaWRlXCI7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG9wZXJhdG9yIGlzICdpc25vdCcgcmV2ZXJzZSB2YWx1ZVxuICAgICAgaWYgKG9wZXJhdG9yID09PSBcImlzbm90XCIpIHtcbiAgICAgICAgaGlkZUJhc2VkT25SdWxlc1tpXSA9ICFoaWRlQmFzZWRPblJ1bGVzW2ldO1xuICAgICAgfVxuICAgIH1cbiAgICBoaWRlRmllbGQgPSBoaWRlQmFzZWRPblJ1bGVzLmV2ZXJ5KGkgPT4gaSA9PT0gdHJ1ZSk7XG4gICAgLy8gZm9ybVZhbHVlc1tpZF0uaGlkZUZpZWxkID0gaGlkZUZpZWxkO1xuICAgIC8vIHRoaXMuc2V0U3RhdGUoeyBmb3JtVmFsdWVzIH0pO1xuICAgIHJldHVybiBoaWRlRmllbGQ7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGZvcm1EYXRhLFxuICAgICAgZm9ybVZhbHVlcyxcbiAgICAgIHN1Ym1pdEZhaWxlZCxcbiAgICAgIHN1Ym1pdFN1Y2Nlc3MsXG4gICAgICB0b3VjaGVkLFxuICAgICAgc3VibWl0dGluZyxcbiAgICAgIGFjdGl2ZVBhZ2UsXG4gICAgICBpc011bHRpcGFydFxuICAgIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHtcbiAgICAgIHRpdGxlLFxuICAgICAgc3VibWl0SWNvbixcbiAgICAgIHNhdmVTdGF0ZVRvSHRtbEZpZWxkLFxuICAgICAgc3R5bGVkQ29tcG9uZW50cyxcbiAgICAgIGN1c3RvbUNvbXBvbmVudHMsXG4gICAgICBlcnJvck1lc3NhZ2UsXG4gICAgICBkcm9wem9uZVRleHQsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBCdXR0b24sIExvYWRpbmcsIEdGV3JhcHBlciA9IFwiZGl2XCIsIEZvcm1FcnJvcjogU0Zvcm1FcnJvciB9ID1cbiAgICAgIHN0eWxlZENvbXBvbmVudHMgfHwgZmFsc2U7XG5cbiAgICBjb25zdCB7IGNzc0NsYXNzIH0gPSBmb3JtRGF0YTtcblxuICAgIGNvbnN0IGlzRGlzYWJsZWQgPSBPYmplY3Qua2V5cyhmb3JtVmFsdWVzKS5zb21lKFxuICAgICAgeCA9PiAhZm9ybVZhbHVlc1t4XS5oaWRlRmllbGQgJiYgZm9ybVZhbHVlc1t4XS52YWxpZFxuICAgICk7XG4gICAgY29uc3QgaXNOZXh0RGlzYWJsZWQgPSBhY3RpdmVQYWdlXG4gICAgICA/IE9iamVjdC5rZXlzKGZvcm1WYWx1ZXMpLnNvbWUoXG4gICAgICAgICAgeCA9PlxuICAgICAgICAgICAgZm9ybVZhbHVlc1t4XS5wYWdlTnVtYmVyID09PSBhY3RpdmVQYWdlICYmXG4gICAgICAgICAgICAhZm9ybVZhbHVlc1t4XS5oaWRlRmllbGQgJiZcbiAgICAgICAgICAgIGZvcm1WYWx1ZXNbeF0udmFsaWRcbiAgICAgICAgKVxuICAgICAgOiBmYWxzZTtcblxuICAgIHJldHVybiAoXG4gICAgICA8R0ZXcmFwcGVyXG4gICAgICAgIHJlZj17ZWwgPT4gKHRoaXMud3JhcHBlclJlZiA9IGVsKX1cbiAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS13cmFwcGVyXCJcbiAgICAgICAgY3NzPXt7IHBvc2l0aW9uOiBcInJlbGF0aXZlXCIgfX1cbiAgICAgICAgaWQ9e2BncmF2aXR5X2Zvcm1fJHt0aGlzLnByb3BzLmZvcm1JRH1gfVxuICAgICAgPlxuICAgICAgICB7Zm9ybURhdGEudGl0bGUgPyBudWxsIDogTG9hZGluZyAmJiA8TG9hZGluZyBpc0xvYWRpbmcgLz59XG5cbiAgICAgICAge3N1Ym1pdEZhaWxlZCAmJiAhc3VibWl0U3VjY2VzcyAmJiAoXG4gICAgICAgICAgPEZvcm1FcnJvclxuICAgICAgICAgICAgU0Zvcm1FcnJvcj17U0Zvcm1FcnJvciB8fCBmYWxzZX1cbiAgICAgICAgICAgIGVycm9yTWVzc2FnZT17XG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSB8fCBcIlRoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB5b3VyIHN1Ym1pc3Npb25cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG5cbiAgICAgICAge3N1Ym1pdFN1Y2Nlc3MgJiYgdGhpcy5zdGF0ZS5jb25maXJtYXRpb25NZXNzYWdlICYmIChcbiAgICAgICAgICA8Rm9ybUNvbmZpcm1hdGlvbiBjb25maXJtYXRpb249e3RoaXMuc3RhdGUuY29uZmlybWF0aW9uTWVzc2FnZX0gLz5cbiAgICAgICAgKX1cblxuICAgICAgICB7IXN1Ym1pdFN1Y2Nlc3MgJiYgZm9ybURhdGEuZmllbGRzID8gKFxuICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICBvblN1Ym1pdD17ZSA9PiB0aGlzLm9uU3VibWl0KGUpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtjc3NDbGFzc31cbiAgICAgICAgICAgIGVuY1R5cGU9e2lzTXVsdGlwYXJ0ID8gXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICBub1ZhbGlkYXRlXG4gICAgICAgICAgPlxuICAgICAgICAgICAgeyhmb3JtRGF0YS50aXRsZSB8fCBmb3JtRGF0YS5kZXNjcmlwdGlvbikgJiYgKFxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHtmb3JtRGF0YS50aXRsZSAmJiB0aXRsZSA/IChcbiAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJmb3JtLXRpdGxlXCI+e2Zvcm1EYXRhLnRpdGxlfTwvaDM+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgICAge2Zvcm1EYXRhLmRlc2NyaXB0aW9uID8gKFxuICAgICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZm9ybS1kZXNjcmlwdGlvblwiPntmb3JtRGF0YS5kZXNjcmlwdGlvbn08L3A+XG4gICAgICAgICAgICAgICAgKSA6IG51bGx9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmb3JtLXdyYXBwZXJcIj5cbiAgICAgICAgICAgICAgPFJlbmRlckZpZWxkc1xuICAgICAgICAgICAgICAgIHN0eWxlZENvbXBvbmVudHM9e3N0eWxlZENvbXBvbmVudHN9XG4gICAgICAgICAgICAgICAgY3VzdG9tQ29tcG9uZW50cz17Y3VzdG9tQ29tcG9uZW50c31cbiAgICAgICAgICAgICAgICBmaWVsZHM9e2Zvcm1EYXRhLmZpZWxkc31cbiAgICAgICAgICAgICAgICBmb3JtVmFsdWVzPXtmb3JtVmFsdWVzfVxuICAgICAgICAgICAgICAgIHN1Ym1pdEZhaWxlZD17c3VibWl0RmFpbGVkfVxuICAgICAgICAgICAgICAgIHN1Ym1pdFN1Y2Nlc3M9e3N1Ym1pdFN1Y2Nlc3N9XG4gICAgICAgICAgICAgICAgdXBkYXRlRm9ybT17dGhpcy51cGRhdGVGb3JtSGFuZGxlcn1cbiAgICAgICAgICAgICAgICB0b3VjaGVkPXt0b3VjaGVkfVxuICAgICAgICAgICAgICAgIHNldFRvdWNoZWQ9e3RoaXMuc2V0VG91Y2hlZH1cbiAgICAgICAgICAgICAgICBwYWdpbmF0aW9uPXtmb3JtRGF0YS5wYWdpbmF0aW9ufVxuICAgICAgICAgICAgICAgIGFjdGl2ZVBhZ2U9e2FjdGl2ZVBhZ2V9XG4gICAgICAgICAgICAgICAgcHJldlN0ZXA9e3RoaXMucHJldlN0ZXB9XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXA9e3RoaXMubmV4dFN0ZXB9XG4gICAgICAgICAgICAgICAgaXNOZXh0RGlzYWJsZWQ9e2lzTmV4dERpc2FibGVkfVxuICAgICAgICAgICAgICAgIGNoZWNrQ29uZGl0aW9uYWxMb2dpYz17dGhpcy5jaGVja0NvbmRpdGlvbmFsTG9naWN9XG4gICAgICAgICAgICAgICAgc2F2ZVN0YXRlVG9IdG1sRmllbGQ9e3NhdmVTdGF0ZVRvSHRtbEZpZWxkfVxuICAgICAgICAgICAgICAgIGVuYWJsZUhvbmV5cG90PXtmb3JtRGF0YS5lbmFibGVIb25leXBvdH1cbiAgICAgICAgICAgICAgICBlcnJvcnM9e3RoaXMuc3RhdGUuZXJyb3JNZXNzYWdlc31cbiAgICAgICAgICAgICAgICB1bnNldEVycm9yPXt0aGlzLnVuc2V0RXJyb3J9XG4gICAgICAgICAgICAgICAgZHJvcHpvbmVUZXh0PXtkcm9wem9uZVRleHR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIHsoIWZvcm1EYXRhLnBhZ2luYXRpb24gfHxcbiAgICAgICAgICAgICAgICAoZm9ybURhdGEucGFnaW5hdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgZm9ybURhdGEucGFnaW5hdGlvbi5wYWdlcy5sZW5ndGggPT09IGFjdGl2ZVBhZ2UpKSAmJiAoXG4gICAgICAgICAgICAgICAgPFN1Ym1pdFxuICAgICAgICAgICAgICAgICAgQnV0dG9uPXtCdXR0b259XG4gICAgICAgICAgICAgICAgICBMb2FkaW5nPXtMb2FkaW5nfVxuICAgICAgICAgICAgICAgICAgZm9ybURhdGE9e2Zvcm1EYXRhfVxuICAgICAgICAgICAgICAgICAgc3VibWl0SWNvbj17c3VibWl0SWNvbn1cbiAgICAgICAgICAgICAgICAgIGlzRGlzYWJsZWQ9e2lzRGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgICBzdWJtaXR0aW5nPXtzdWJtaXR0aW5nfVxuICAgICAgICAgICAgICAgICAgcHJldlN0ZXA9e3RoaXMucHJldlN0ZXB9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZm9ybT5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICBcIlwiXG4gICAgICAgICl9XG4gICAgICA8L0dGV3JhcHBlcj5cbiAgICApO1xuICB9XG59XG5cbkdyYXZpdHlGb3JtLmRlZmF1bHRQcm9wcyA9IHtcbiAgdGl0bGU6IHRydWUsXG4gIHN1Ym1pdEljb246IGZhbHNlLFxuICBzYXZlU3RhdGVUb0h0bWxGaWVsZDogZmFsc2UsXG4gIGp1bXBUb0NvbmZpcm1hdGlvbjogdHJ1ZVxufTtcblxuZXhwb3J0IHsgdmFsaWRhdGVGaWVsZCwgRm9ybUNvbmZpcm1hdGlvbiwgRm9ybUVycm9yLCBSZW5kZXJGaWVsZHMsIFN1Ym1pdCB9O1xuXG5leHBvcnQgZGVmYXVsdCBHcmF2aXR5Rm9ybTtcbiJdfQ==