"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"RenderFields",{enumerable:!0,get:function get(){return _RenderFields["default"]}}),Object.defineProperty(exports,"FormError",{enumerable:!0,get:function get(){return _FormError["default"]}}),Object.defineProperty(exports,"FormConfirmation",{enumerable:!0,get:function get(){return _FormConfirmation["default"]}}),Object.defineProperty(exports,"validateField",{enumerable:!0,get:function get(){return _validation.validateField}}),Object.defineProperty(exports,"Submit",{enumerable:!0,get:function get(){return _Submit["default"]}}),exports["default"]=void 0;var _react=_interopRequireWildcard(require("react")),_isomorphicUnfetch=_interopRequireDefault(require("isomorphic-unfetch")),_RenderFields=_interopRequireDefault(require("./FormElements/RenderFields")),_FormError=_interopRequireDefault(require("./FormElements/FormError")),_FormConfirmation=_interopRequireDefault(require("./FormElements/FormConfirmation")),_validation=require("./Helpers/validation"),_Submit=_interopRequireDefault(require("./FormElements/Submit"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return _getRequireWildcardCache=function(){return a},a}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;if(null===a||"object"!==_typeof(a)&&"function"!=typeof a)return{default:a};var b=_getRequireWildcardCache();if(b&&b.has(a))return b.get(a);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;f&&(f.get||f.set)?Object.defineProperty(c,e,f):c[e]=a[e]}return c["default"]=a,b&&b.set(a,c),c}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var GravityForm=function(a){function b(a){var c;return _classCallCheck(this,b),c=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a)),_defineProperty(_assertThisInitialized(c),"setTouched",function(a){c.setState({touched:_objectSpread({},c.state.touched,_defineProperty({},a,!0))})}),_defineProperty(_assertThisInitialized(c),"unsetError",function(a){var b=c.state.errorMessages;!b||b[a]&&(delete b[a],c.setState({errorMessages:b}))}),_defineProperty(_assertThisInitialized(c),"updateFormHandler",function(a,b){var d,e=c.state,f=e.formValues,g=e.conditioanlIds,h=e.conditionFields,j=b.id,k=b.type,l=b.isRequired;if("checkbox"===b.type){var m=_toConsumableArray(f[b.id].value),n=m.indexOf(a.target.value);-1<n?m.splice(n,1):m.push(a.target.value),d=m}else if("date"==b.type&&"datepicker"!==b.dateType){var o=b.subId,p=b.dateLabel,q=_toConsumableArray(f[b.id].value);q[o]={val:a.target.value,label:p},d=q}else if("consent"==b.type)d=a.target?a.target.checked:"null";else if("password"===b.type||"email"===b.type&&b.emailConfirmEnabled){var r=b.subId,s=f[b.id]&&f[b.id].value?_toConsumableArray(f[b.id].value):[];s[r]={val:a.target.value},d=s}else d=a.target?a.target.value:"null";"text"===k&&-1<b.cssClass.indexOf("iban")&&(k="iban");var t=(0,_validation.validateField)(d,b);if(-1!==g.indexOf(j)){f[j].value=d;for(var w=0;w<h.length;w++){var u=h[w].id,v=c.checkConditionalLogic(h[w].conditionalLogic,f);f[u].hideField=v,v&&(f[u].isRequired&&v&&(f[u].value=""),f[u].valid=!!f[u].isRequired)}}c.setState({formValues:_objectSpread({},f,_defineProperty({},j,{value:d,id:j,valid:t,label:b.label,pageNumber:b.pageNumber,cssClass:b.cssClass,isRequired:b.isRequired}))},function(){var a=c.props,e=a.onChange,f=a.onChangeField;e&&e(c.state.formValues),f&&f(_defineProperty({},j,{value:d,id:j,valid:t,label:b.label,pageNumber:b.pageNumber,cssClass:b.cssClass,isRequired:b.isRequired}))})}),_defineProperty(_assertThisInitialized(c),"scrollToConfirmation",function(){var a=!!c.wrapperRef&&c.wrapperRef.getBoundingClientRect();if(a&&window){var b=window.pageYOffset||document.documentElement.scrollTop;window.scrollTo({top:b+a.top-100})}}),_defineProperty(_assertThisInitialized(c),"onSubmit",function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(b){var d,e,f,g,h,i,j;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.preventDefault(),c.setState({submitting:!0,submitSuccess:!1,submitFailed:!1,confirmationMessage:!1,errorMessages:!1}),d=c.props,e=d.formID,f=d.backendUrl,g=d.jumpToConfirmation,h=d.onSubmitSuccess,i=f.substring(0,f.indexOf("/wp-json")),j=new FormData(b.target),(0,_isomorphicUnfetch["default"])("".concat(i,"/wp-json/gf/v2/forms/").concat(e,"/submissions"),{method:"POST",body:j}).then(function(a){return a.json()}).then(function(a){if(a&&a.is_valid){if(h){var i=h(a);if(!i)return!1}var b=a.confirmation_message,d=b||!1,e=d.type,f=d.link;if(e&&f&&"redirect"===e&&"undefined"!=typeof window)return window.location.replace(f),!1;c.setState({submitting:!1,submitSuccess:!0,confirmationMessage:a.confirmation_message}),g&&c.scrollToConfirmation()}else throw{response:a}})["catch"](function(a){var b=a&&a.response&&a.response.validation_messages?a.response.validation_messages:"Something went wrong";c.setState({submitting:!1,submitFailed:!0,errorMessages:b}),g&&c.scrollToConfirmation()});case 6:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}()),_defineProperty(_assertThisInitialized(c),"nextStep",function(a){a&&a.preventDefault();var b=c.state.activePage,d=c.props.activePage;d&&d(b+1),c.setState({activePage:b+1},function(){return c.scrollToConfirmation()})}),_defineProperty(_assertThisInitialized(c),"prevStep",function(a){a&&a.preventDefault();var b=c.state.activePage,d=c.props.activePage;d&&d(b-1),c.setState({activePage:b-1},function(){return c.scrollToConfirmation()})}),_defineProperty(_assertThisInitialized(c),"checkConditionalLogic",function(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],d=a.rules,e=a.actionType;if(!d)return!0;for(var f=b||c.state.formValues,g="hide"!==e,h=[],j=0;j<d.length;j++){var k=d[j],l=k.fieldId,m=k.value,n=k.operator,o=f[l].value&&f[l].value.value?f[l].value.value:f[l].value||!1,p=Array.isArray(o)?o.join(""):o;h[j]=m?p&&m==p?"hide"===e:"hide"!==e:p||m?"hide"!==e:"hide"===e,"isnot"===n&&(h[j]=!h[j])}return g=h.every(function(a){return!0===a}),g}),c.state={submitFailed:!1,errorMessages:!1,formValues:{},loading:!0,submitting:!1,submitSuccess:!1,confirmationMessage:!1,isValid:!1,formData:{},touched:{},activePage:!1,conditionFields:{},conditioanlIds:{},isMultipart:!1},c}return _inherits(b,a),_createClass(b,[{key:"componentDidMount",value:function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(){var b,c,d,e,f,g,h,j,k,l,m,n,o,p,q,r,s,t,u=this;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b=this.props,c=b.formID,d=b.backendUrl,e=b.populatedFields,f=b.populatedEntry,g=b.fetchOptions,this._isMounted=!0,h=!1,a.next=5,(0,_isomorphicUnfetch["default"])("".concat(d,"/").concat(c),g).then(function(a){return a.json()}).then(function(a){return a})["catch"](function(){return!1});case 5:if(j=a.sent,!(j&&this._isMounted)){a.next=32;break}for(k={},l=[],m=[],n=!0,o=!1,p=void 0,a.prev=13,q=function(){var a=s.value,b=void 0,c=!1,d=a.inputName&&e&&e[a.inputName];if(f&&f[a.id]?c=!0:f&&a.inputs&&a.inputs.some(function(a){f[a.id]&&(c=!0)}),"checkbox"===a.type)b=a.choices.filter(function(b){return d?b.value===e[a.inputName]:b.isSelected}).map(function(a){return a.value}),c&&(b=a.inputs.filter(function(a){return f[a.id]}).map(function(a){return a.label}));else if("radio"===a.type){if(d)b=e[a.inputName];else{var o=a.choices.find(function(a){return a.isSelected});b=o?o.value:""}}else if("select"===a.type){var p=a.choices.filter(function(b){return d?b.value===e[a.inputName]:b.isSelected}).map(function(a){return{value:a.value,label:a.text}});b=p&&0<p.length?p[0]:""}else b=d?e[a.inputName]:c?f[a.id]:a.defaultValue,"fileupload"===a.type&&(h=!0);if(a.conditionalLogic){for(var g,i={id:a.id,conditionalLogic:a.conditionalLogic},j=a.conditionalLogic.rules.map(function(a){return a.fieldId}),n=0;n<j.length;n++)g=parseInt(j[n]),-1===m.indexOf(g)&&m.push(g);l.push(i)}k[a.id]={valid:(0,_validation.validateField)(b,a),value:b,label:a.label,pageNumber:a.pageNumber,cssClass:a.cssClass,isRequired:a.isRequired}},r=j.fields[Symbol.iterator]();!(n=(s=r.next()).done);n=!0)q();a.next=22;break;case 18:a.prev=18,a.t0=a["catch"](13),o=!0,p=a.t0;case 22:a.prev=22,a.prev=23,n||null==r["return"]||r["return"]();case 25:if(a.prev=25,!o){a.next=28;break}throw p;case 28:return a.finish(25);case 29:return a.finish(22);case 30:for(t=0;t<l.length;t++)k[l[t].id].hideField=this.checkConditionalLogic(l[t].conditionalLogic,k);this.setState({formData:j,formValues:k,activePage:!!j.pagination&&1,conditionFields:l,conditioanlIds:m,isMultipart:h},function(){var a=u.props,b=a.nextStep,c=a.prevStep,d=a.activePage;b&&b(function(){return u.nextStep}),c&&c(function(){return u.prevStep}),d&&d(u.state.activePage)});case 32:case"end":return a.stop();}},a,this,[[13,18,22,30],[23,,25,29]])}));return function componentDidMount(){return a.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=!1}},{key:"render",value:function render(){var a=this,b=this.state,c=b.formData,d=b.formValues,e=b.submitFailed,f=b.submitSuccess,g=b.touched,h=b.submitting,i=b.activePage,j=b.isMultipart,k=this.props,l=k.title,m=k.submitIcon,n=k.saveStateToHtmlField,o=k.styledComponents,p=k.customComponents,q=k.errorMessage,r=k.dropzoneText,s=k.loadingSpinner,t=o||!1,u=t.Button,v=t.Loading,w=t.GFWrapper,x=void 0===w?"div":w,y=t.FormError,z=c.cssClass,A=Object.keys(d).some(function(a){return!d[a].hideField&&d[a].valid}),B=!!i&&Object.keys(d).some(function(a){return d[a].pageNumber===i&&!d[a].hideField&&d[a].valid});return _react["default"].createElement(x,{ref:function ref(b){return a.wrapperRef=b},className:"form-wrapper",css:{position:"relative"},id:"gravity_form_".concat(this.props.formID)},c.title?null:v&&_react["default"].createElement(v,{isLoading:!0}),e&&!f&&_react["default"].createElement(_FormError["default"],{SFormError:y||!1,errorMessage:q||"There was a problem with your submission"}),f&&this.state.confirmationMessage&&_react["default"].createElement(_FormConfirmation["default"],{confirmation:this.state.confirmationMessage}),!f&&c.fields?_react["default"].createElement("form",{onSubmit:function onSubmit(b){return a.onSubmit(b)},className:z,encType:j?"multipart/form-data":void 0,noValidate:!0},(c.title||c.description)&&_react["default"].createElement("div",null,c.title&&l?_react["default"].createElement("h3",{className:"form-title"},c.title):null,c.description?_react["default"].createElement("p",{className:"form-description"},c.description):null),_react["default"].createElement("div",{className:"form-wrapper"},_react["default"].createElement(_RenderFields["default"],{styledComponents:o,customComponents:p,fields:c.fields,formValues:d,submitFailed:e,submitSuccess:f,updateForm:this.updateFormHandler,touched:g,setTouched:this.setTouched,pagination:c.pagination,activePage:i,prevStep:this.prevStep,nextStep:this.nextStep,isNextDisabled:B,checkConditionalLogic:this.checkConditionalLogic,saveStateToHtmlField:n,enableHoneypot:c.enableHoneypot,errors:this.state.errorMessages,unsetError:this.unsetError,dropzoneText:r}),(!c.pagination||c.pagination&&c.pagination.pages.length===i)&&_react["default"].createElement(_Submit["default"],{Button:u,Loading:v,formData:c,submitIcon:m,isDisabled:A,submitting:h,prevStep:this.prevStep,loadingSpinner:s}))):"")}}]),b}(_react.Component);GravityForm.defaultProps={title:!0,submitIcon:!1,saveStateToHtmlField:!1,jumpToConfirmation:!0};var _default=GravityForm;exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJHcmF2aXR5Rm9ybSIsInByb3BzIiwiaWQiLCJzZXRTdGF0ZSIsInRvdWNoZWQiLCJzdGF0ZSIsImVycm9yTWVzc2FnZXMiLCJldmVudCIsImZpZWxkIiwidmFsdWUiLCJmb3JtVmFsdWVzIiwiY29uZGl0aW9hbmxJZHMiLCJjb25kaXRpb25GaWVsZHMiLCJ0eXBlIiwiaXNSZXF1aXJlZCIsInZhbHVlcyIsImluZGV4IiwiaW5kZXhPZiIsInRhcmdldCIsInNwbGljZSIsInB1c2giLCJkYXRlVHlwZSIsInN1YklkIiwiZGF0ZUxhYmVsIiwidmFsIiwibGFiZWwiLCJjaGVja2VkIiwiZW1haWxDb25maXJtRW5hYmxlZCIsImNzc0NsYXNzIiwidmFsaWQiLCJpIiwibGVuZ3RoIiwiaGlkZSIsImNoZWNrQ29uZGl0aW9uYWxMb2dpYyIsImNvbmRpdGlvbmFsTG9naWMiLCJoaWRlRmllbGQiLCJwYWdlTnVtYmVyIiwib25DaGFuZ2UiLCJvbkNoYW5nZUZpZWxkIiwicmVjdCIsIndyYXBwZXJSZWYiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aW5kb3ciLCJzY3JvbGxUb3AiLCJwYWdlWU9mZnNldCIsImRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50Iiwic2Nyb2xsVG8iLCJ0b3AiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdHRpbmciLCJzdWJtaXRTdWNjZXNzIiwic3VibWl0RmFpbGVkIiwiY29uZmlybWF0aW9uTWVzc2FnZSIsImZvcm1JRCIsImJhY2tlbmRVcmwiLCJqdW1wVG9Db25maXJtYXRpb24iLCJvblN1Ym1pdFN1Y2Nlc3MiLCJnZlN1Ym1pc3Npb25VcmwiLCJzdWJzdHJpbmciLCJkYXRhIiwiRm9ybURhdGEiLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3AiLCJqc29uIiwicmVzcG9uc2UiLCJpc192YWxpZCIsInJlcyIsImNvbmZpcm1hdGlvbl9tZXNzYWdlIiwibGluayIsImxvY2F0aW9uIiwicmVwbGFjZSIsInNjcm9sbFRvQ29uZmlybWF0aW9uIiwiZXJyb3IiLCJ2YWxpZGF0aW9uX21lc3NhZ2VzIiwiZSIsImFjdGl2ZVBhZ2UiLCJzZXRBY3RpdmUiLCJjb25kaXRpb24iLCJmaWVsZHMiLCJydWxlcyIsImFjdGlvblR5cGUiLCJoaWRlQmFzZWRPblJ1bGVzIiwiZmllbGRJZCIsIm9wZXJhdG9yIiwiY29uZGl0aW9uRmllbGRWYWx1ZSIsInN0cmluZ1ZhbHVlIiwiQXJyYXkiLCJpc0FycmF5Iiwiam9pbiIsImV2ZXJ5IiwibG9hZGluZyIsImlzVmFsaWQiLCJmb3JtRGF0YSIsImlzTXVsdGlwYXJ0IiwicG9wdWxhdGVkRmllbGRzIiwicG9wdWxhdGVkRW50cnkiLCJmZXRjaE9wdGlvbnMiLCJfaXNNb3VudGVkIiwiZm9ybSIsImhhc1BvcHVsYXRlZEVudHJ5IiwiaGFzUG9wdWxhdGlvbiIsImlucHV0TmFtZSIsImlucHV0cyIsInNvbWUiLCJpbnB1dCIsImNob2ljZXMiLCJmaWx0ZXIiLCJjaG9pY2UiLCJpc1NlbGVjdGVkIiwibWFwIiwicHJlc2VsZWN0ZWQiLCJmaW5kIiwic2VsZWN0ZWRPcHRpb24iLCJpdGVtIiwidGV4dCIsImRlZmF1bHRWYWx1ZSIsInRtcEZpZWxkIiwiaWRzIiwicGFyc2VJbnQiLCJwYWdpbmF0aW9uIiwibmV4dFN0ZXAiLCJwcmV2U3RlcCIsInRpdGxlIiwic3VibWl0SWNvbiIsInNhdmVTdGF0ZVRvSHRtbEZpZWxkIiwic3R5bGVkQ29tcG9uZW50cyIsImN1c3RvbUNvbXBvbmVudHMiLCJlcnJvck1lc3NhZ2UiLCJkcm9wem9uZVRleHQiLCJsb2FkaW5nU3Bpbm5lciIsIkJ1dHRvbiIsIkxvYWRpbmciLCJHRldyYXBwZXIiLCJTRm9ybUVycm9yIiwiRm9ybUVycm9yIiwiaXNEaXNhYmxlZCIsIk9iamVjdCIsImtleXMiLCJ4IiwiaXNOZXh0RGlzYWJsZWQiLCJlbCIsInBvc2l0aW9uIiwib25TdWJtaXQiLCJkZXNjcmlwdGlvbiIsInVwZGF0ZUZvcm1IYW5kbGVyIiwic2V0VG91Y2hlZCIsImVuYWJsZUhvbmV5cG90IiwidW5zZXRFcnJvciIsInBhZ2VzIiwiQ29tcG9uZW50IiwiZGVmYXVsdFByb3BzIl0sIm1hcHBpbmdzIjoidXdKQVFNQSxDQUFBQSxXLGFBQ0osV0FBWUMsQ0FBWixDQUFtQixxR0FDWEEsQ0FEVywwREF5S04sU0FBQ0MsQ0FBRCxDQUFRLENBQ25CLEVBQUtDLFFBQUwsQ0FBYyxDQUNaQyxPQUFPLGtCQUFPLEVBQUtDLEtBQUwsQ0FBV0QsT0FBbEIsb0JBQTRCRixDQUE1QixLQURLLENBQWQsQ0FHRCxDQTdLa0IseURBK0tOLFNBQUNBLENBQUQsQ0FBUSxJQUNYSSxDQUFBQSxDQURXLENBQ08sRUFBS0QsS0FEWixDQUNYQyxhQURXLENBRWYsQ0FBQ0EsQ0FGYyxFQUlmQSxDQUFhLENBQUNKLENBQUQsQ0FKRSxHQUtqQixNQUFPSSxDQUFBQSxDQUFhLENBQUNKLENBQUQsQ0FMSCxDQU1qQixFQUFLQyxRQUFMLENBQWMsQ0FBRUcsYUFBYSxDQUFiQSxDQUFGLENBQWQsQ0FOaUIsQ0FRcEIsQ0F2TGtCLGdFQXlMQyxTQUFDQyxDQUFELENBQVFDLENBQVIsQ0FBa0IsSUFJaENDLENBQUFBLENBSmdDLEdBQ29CLEVBQUtKLEtBRHpCLENBQzVCSyxDQUQ0QixHQUM1QkEsVUFENEIsQ0FDaEJDLENBRGdCLEdBQ2hCQSxjQURnQixDQUNBQyxDQURBLEdBQ0FBLGVBREEsQ0FFOUJWLENBRjhCLENBRUxNLENBRkssQ0FFOUJOLEVBRjhCLENBRTFCVyxDQUYwQixDQUVMTCxDQUZLLENBRTFCSyxJQUYwQixDQUVwQkMsQ0FGb0IsQ0FFTE4sQ0FGSyxDQUVwQk0sVUFGb0IsQ0FNcEMsR0FBbUIsVUFBZixHQUFBTixDQUFLLENBQUNLLElBQVYsQ0FBK0IsSUFDdkJFLENBQUFBLENBQU0sb0JBQU9MLENBQVUsQ0FBQ0YsQ0FBSyxDQUFDTixFQUFQLENBQVYsQ0FBcUJPLEtBQTVCLENBRGlCLENBRXZCTyxDQUFLLENBQUdELENBQU0sQ0FBQ0UsT0FBUCxDQUFlVixDQUFLLENBQUNXLE1BQU4sQ0FBYVQsS0FBNUIsQ0FGZSxDQUdqQixDQUFDLENBQVQsQ0FBQU8sQ0FIeUIsQ0FJM0JELENBQU0sQ0FBQ0ksTUFBUCxDQUFjSCxDQUFkLENBQXFCLENBQXJCLENBSjJCLENBTTNCRCxDQUFNLENBQUNLLElBQVAsQ0FBWWIsQ0FBSyxDQUFDVyxNQUFOLENBQWFULEtBQXpCLENBTjJCLENBUTdCQSxDQUFLLENBQUdNLENBQ1QsQ0FURCxJQVNPLElBQWtCLE1BQWQsRUFBQVAsQ0FBSyxDQUFDSyxJQUFOLEVBQTJDLFlBQW5CLEdBQUFMLENBQUssQ0FBQ2EsUUFBbEMsQ0FBNkQsSUFDMURDLENBQUFBLENBRDBELENBQ3JDZCxDQURxQyxDQUMxRGMsS0FEMEQsQ0FDbkRDLENBRG1ELENBQ3JDZixDQURxQyxDQUNuRGUsU0FEbUQsQ0FFNURSLENBQU0sb0JBQU9MLENBQVUsQ0FBQ0YsQ0FBSyxDQUFDTixFQUFQLENBQVYsQ0FBcUJPLEtBQTVCLENBRnNELENBR2xFTSxDQUFNLENBQUNPLENBQUQsQ0FBTixDQUFnQixDQUNkRSxHQUFHLENBQUVqQixDQUFLLENBQUNXLE1BQU4sQ0FBYVQsS0FESixDQUVkZ0IsS0FBSyxDQUFFRixDQUZPLENBSGtELENBT2xFZCxDQUFLLENBQUdNLENBQ1QsQ0FSTSxJQVFBLElBQWtCLFNBQWQsRUFBQVAsQ0FBSyxDQUFDSyxJQUFWLENBQ0xKLENBQUssQ0FBR0YsQ0FBSyxDQUFDVyxNQUFOLENBQWVYLENBQUssQ0FBQ1csTUFBTixDQUFhUSxPQUE1QixDQUFzQyxNQUR6QyxLQUVBLElBQ1UsVUFBZixHQUFBbEIsQ0FBSyxDQUFDSyxJQUFOLEVBQ2dCLE9BQWYsR0FBQUwsQ0FBSyxDQUFDSyxJQUFOLEVBQTBCTCxDQUFLLENBQUNtQixtQkFGNUIsQ0FHTCxJQUNRTCxDQUFBQSxDQURSLENBQ2tCZCxDQURsQixDQUNRYyxLQURSLENBRU1QLENBQU0sQ0FDVkwsQ0FBVSxDQUFDRixDQUFLLENBQUNOLEVBQVAsQ0FBVixFQUF3QlEsQ0FBVSxDQUFDRixDQUFLLENBQUNOLEVBQVAsQ0FBVixDQUFxQk8sS0FBN0Msb0JBQ1FDLENBQVUsQ0FBQ0YsQ0FBSyxDQUFDTixFQUFQLENBQVYsQ0FBcUJPLEtBRDdCLEVBRUksRUFMTixDQU1BTSxDQUFNLENBQUNPLENBQUQsQ0FBTixDQUFnQixDQUNkRSxHQUFHLENBQUVqQixDQUFLLENBQUNXLE1BQU4sQ0FBYVQsS0FESixDQU5oQixDQVNBQSxDQUFLLENBQUdNLENBQ1QsQ0FiTSxJQWNMTixDQUFBQSxDQUFLLENBQUdGLENBQUssQ0FBQ1csTUFBTixDQUFlWCxDQUFLLENBQUNXLE1BQU4sQ0FBYVQsS0FBNUIsQ0FBb0MsTUFkdkMsQ0FpQk0sTUFBVCxHQUFBSSxDQUFJLEVBQWdELENBQUMsQ0FBbEMsQ0FBQUwsQ0FBSyxDQUFDb0IsUUFBTixDQUFlWCxPQUFmLENBQXVCLE1BQXZCLENBMUNhLEdBMkNsQ0osQ0FBSSxDQUFHLE1BM0MyQixFQStDcEMsR0FBTWdCLENBQUFBLENBQUssQ0FBRyw4QkFBY3BCLENBQWQsQ0FBcUJELENBQXJCLENBQWQsQ0FJQSxHQUFtQyxDQUFDLENBQWhDLEdBQUFHLENBQWMsQ0FBQ00sT0FBZixDQUF1QmYsQ0FBdkIsQ0FBSixDQUF1QyxDQUNyQ1EsQ0FBVSxDQUFDUixDQUFELENBQVYsQ0FBZU8sS0FBZixDQUF1QkEsQ0FEYyxDQUVyQyxJQUFLLEdBQUlxQixDQUFBQSxDQUFDLENBQUcsQ0FBYixDQUFnQkEsQ0FBQyxDQUFHbEIsQ0FBZSxDQUFDbUIsTUFBcEMsQ0FBNENELENBQUMsRUFBN0MsQ0FBaUQsSUFDdkM1QixDQUFBQSxDQUR1QyxDQUNoQ1UsQ0FBZSxDQUFDa0IsQ0FBRCxDQURpQixDQUN2QzVCLEVBRHVDLENBRXpDOEIsQ0FBSSxDQUFHLEVBQUtDLHFCQUFMLENBQ1hyQixDQUFlLENBQUNrQixDQUFELENBQWYsQ0FBbUJJLGdCQURSLENBRVh4QixDQUZXLENBRmtDLENBTS9DQSxDQUFVLENBQUNSLENBQUQsQ0FBVixDQUFlaUMsU0FBZixDQUEyQkgsQ0FOb0IsQ0FPM0NBLENBUDJDLEdBUXpDdEIsQ0FBVSxDQUFDUixDQUFELENBQVYsQ0FBZVksVUFBZixFQUE2QmtCLENBUlksR0FTM0N0QixDQUFVLENBQUNSLENBQUQsQ0FBVixDQUFlTyxLQUFmLENBQXVCLEVBVG9CLEVBVzdDQyxDQUFVLENBQUNSLENBQUQsQ0FBVixDQUFlMkIsS0FBZixDQUF1QixDQUFDLENBQUNuQixDQUFVLENBQUNSLENBQUQsQ0FBVixDQUFlWSxVQVhLLENBYWhELENBQ0YsQ0FFRCxFQUFLWCxRQUFMLENBQ0UsQ0FDRU8sVUFBVSxrQkFDTEEsQ0FESyxvQkFFUFIsQ0FGTyxDQUVGLENBQ0pPLEtBQUssQ0FBTEEsQ0FESSxDQUVKUCxFQUFFLENBQUZBLENBRkksQ0FHSjJCLEtBQUssQ0FBTEEsQ0FISSxDQUlKSixLQUFLLENBQUVqQixDQUFLLENBQUNpQixLQUpULENBS0pXLFVBQVUsQ0FBRTVCLENBQUssQ0FBQzRCLFVBTGQsQ0FNSlIsUUFBUSxDQUFFcEIsQ0FBSyxDQUFDb0IsUUFOWixDQU9KZCxVQUFVLENBQUVOLENBQUssQ0FBQ00sVUFQZCxDQUZFLEVBRFosQ0FERixDQWVFLFVBQU0sT0FFZ0MsRUFBS2IsS0FGckMsQ0FFSW9DLENBRkosR0FFSUEsUUFGSixDQUVjQyxDQUZkLEdBRWNBLGFBRmQsQ0FHQUQsQ0FIQSxFQUlGQSxDQUFRLENBQUMsRUFBS2hDLEtBQUwsQ0FBV0ssVUFBWixDQUpOLENBTUE0QixDQU5BLEVBT0ZBLENBQWEsb0JBQ1ZwQyxDQURVLENBQ0wsQ0FDSk8sS0FBSyxDQUFMQSxDQURJLENBRUpQLEVBQUUsQ0FBRkEsQ0FGSSxDQUdKMkIsS0FBSyxDQUFMQSxDQUhJLENBSUpKLEtBQUssQ0FBRWpCLENBQUssQ0FBQ2lCLEtBSlQsQ0FLSlcsVUFBVSxDQUFFNUIsQ0FBSyxDQUFDNEIsVUFMZCxDQU1KUixRQUFRLENBQUVwQixDQUFLLENBQUNvQixRQU5aLENBT0pkLFVBQVUsQ0FBRU4sQ0FBSyxDQUFDTSxVQVBkLENBREssRUFZaEIsQ0FsQ0gsQ0FvQ0QsQ0FsU2tCLG1FQW9TSSxVQUFNLENBQzNCLEdBQU15QixDQUFBQSxDQUFJLEdBQUcsRUFBS0MsVUFBUixFQUNOLEVBQUtBLFVBQUwsQ0FBZ0JDLHFCQUFoQixFQURKLENBR0EsR0FBSUYsQ0FBSSxFQUFJRyxNQUFaLENBQW9CLENBQ2xCLEdBQU1DLENBQUFBLENBQVMsQ0FDYkQsTUFBTSxDQUFDRSxXQUFQLEVBQXNCQyxRQUFRLENBQUNDLGVBQVQsQ0FBeUJILFNBRGpELENBRUFELE1BQU0sQ0FBQ0ssUUFBUCxDQUFnQixDQUNkQyxHQUFHLENBQUVMLENBQVMsQ0FBR0osQ0FBSSxDQUFDUyxHQUFqQixDQUF1QixHQURkLENBQWhCLENBR0QsQ0FDRixDQS9Ta0Isa0hBaVRSLFdBQU96QyxDQUFQLG1HQUNUQSxDQUFLLENBQUMwQyxjQUFOLEVBRFMsQ0FFVCxFQUFLOUMsUUFBTCxDQUFjLENBQ1orQyxVQUFVLEdBREUsQ0FFWkMsYUFBYSxHQUZELENBR1pDLFlBQVksR0FIQSxDQUlaQyxtQkFBbUIsR0FKUCxDQUtaL0MsYUFBYSxHQUxELENBQWQsQ0FGUyxHQWNMLEVBQUtMLEtBZEEsQ0FVUHFELENBVk8sR0FVUEEsTUFWTyxDQVdQQyxDQVhPLEdBV1BBLFVBWE8sQ0FZUEMsQ0FaTyxHQVlQQSxrQkFaTyxDQWFQQyxDQWJPLEdBYVBBLGVBYk8sQ0FlSEMsQ0FmRyxDQWVlSCxDQUFVLENBQUNJLFNBQVgsQ0FDdEIsQ0FEc0IsQ0FFdEJKLENBQVUsQ0FBQ3RDLE9BQVgsQ0FBbUIsVUFBbkIsQ0FGc0IsQ0FmZixDQW1CSDJDLENBbkJHLENBbUJJLEdBQUlDLENBQUFBLFFBQUosQ0FBYXRELENBQUssQ0FBQ1csTUFBbkIsQ0FuQkosQ0FxQlQsNENBQVN3QyxDQUFULGlDQUFnREosQ0FBaEQsaUJBQXNFLENBQ3BFUSxNQUFNLENBQUUsTUFENEQsQ0FFcEVDLElBQUksQ0FBRUgsQ0FGOEQsQ0FBdEUsRUFJR0ksSUFKSCxDQUlRLFNBQUNDLENBQUQsUUFBVUEsQ0FBQUEsQ0FBSSxDQUFDQyxJQUFMLEVBQVYsQ0FKUixFQUtHRixJQUxILENBS1EsU0FBQ0csQ0FBRCxDQUFjLENBQ2xCLEdBQUlBLENBQVEsRUFBSUEsQ0FBUSxDQUFDQyxRQUF6QixDQUFtQyxDQUNqQyxHQUFJWCxDQUFKLENBQXFCLENBQ25CLEdBQU1ZLENBQUFBLENBQUcsQ0FBR1osQ0FBZSxDQUFDVSxDQUFELENBQTNCLENBQ0EsR0FBSSxDQUFDRSxDQUFMLENBQ0UsUUFFSCxDQU5nQyxHQU8zQmhCLENBQUFBLENBQW1CLENBQUdjLENBQVEsQ0FBQ0csb0JBUEosR0FRVmpCLENBQW1CLElBUlQsQ0FRekJ4QyxDQVJ5QixHQVF6QkEsSUFSeUIsQ0FRbkIwRCxDQVJtQixHQVFuQkEsSUFSbUIsQ0FTakMsR0FBSTFELENBQUksRUFBSTBELENBQVIsRUFBeUIsVUFBVCxHQUFBMUQsQ0FBcEIsRUFDd0IsV0FBbEIsUUFBTzZCLENBQUFBLE1BRGIsQ0FHSSxNQURBQSxDQUFBQSxNQUFNLENBQUM4QixRQUFQLENBQWdCQyxPQUFoQixDQUF3QkYsQ0FBeEIsQ0FDQSxJQUdKLEVBQUtwRSxRQUFMLENBQWMsQ0FDWitDLFVBQVUsR0FERSxDQUVaQyxhQUFhLEdBRkQsQ0FHWkUsbUJBQW1CLENBQUVjLENBQVEsQ0FBQ0csb0JBSGxCLENBQWQsQ0FmaUMsQ0FvQjdCZCxDQXBCNkIsRUFxQi9CLEVBQUtrQixvQkFBTCxFQUVILENBdkJELElBd0JFLE1BQU0sQ0FDSlAsUUFBUSxDQUFSQSxDQURJLENBSVQsQ0FsQ0gsV0FtQ1MsU0FBQ1EsQ0FBRCxDQUFXLENBQ2hCLEdBQU1yRSxDQUFBQSxDQUFhLENBQ2pCcUUsQ0FBSyxFQUFJQSxDQUFLLENBQUNSLFFBQWYsRUFBMkJRLENBQUssQ0FBQ1IsUUFBTixDQUFlUyxtQkFBMUMsQ0FDSUQsQ0FBSyxDQUFDUixRQUFOLENBQWVTLG1CQURuQixDQUVJLHNCQUhOLENBSUEsRUFBS3pFLFFBQUwsQ0FBYyxDQUNaK0MsVUFBVSxHQURFLENBRVpFLFlBQVksR0FGQSxDQUdaOUMsYUFBYSxDQUFiQSxDQUhZLENBQWQsQ0FMZ0IsQ0FVWmtELENBVlksRUFXZCxFQUFLa0Isb0JBQUwsRUFFSCxDQWhESCxDQXJCUyx3Q0FqVFEsOEdBeVhSLFNBQUNHLENBQUQsQ0FBTyxDQUNoQkEsQ0FBQyxFQUFJQSxDQUFDLENBQUM1QixjQUFGLEVBRFcsSUFFUjZCLENBQUFBLENBRlEsQ0FFTyxFQUFLekUsS0FGWixDQUVSeUUsVUFGUSxDQUdJQyxDQUhKLENBR2tCLEVBQUs5RSxLQUh2QixDQUdSNkUsVUFIUSxDQUtoQkMsQ0FBUyxFQUFJQSxDQUFTLENBQUNELENBQVUsQ0FBRyxDQUFkLENBTE4sQ0FNaEIsRUFBSzNFLFFBQUwsQ0FDRSxDQUNFMkUsVUFBVSxDQUFFQSxDQUFVLENBQUcsQ0FEM0IsQ0FERixDQUlFLGlCQUFNLEdBQUtKLG9CQUFMLEVBQU4sQ0FKRixDQU1ELENBcllrQix1REF1WVIsU0FBQ0csQ0FBRCxDQUFPLENBQ2hCQSxDQUFDLEVBQUlBLENBQUMsQ0FBQzVCLGNBQUYsRUFEVyxJQUVSNkIsQ0FBQUEsQ0FGUSxDQUVPLEVBQUt6RSxLQUZaLENBRVJ5RSxVQUZRLENBR0lDLENBSEosQ0FHa0IsRUFBSzlFLEtBSHZCLENBR1I2RSxVQUhRLENBS2hCQyxDQUFTLEVBQUlBLENBQVMsQ0FBQ0QsQ0FBVSxDQUFHLENBQWQsQ0FMTixDQU1oQixFQUFLM0UsUUFBTCxDQUNFLENBQ0UyRSxVQUFVLENBQUVBLENBQVUsQ0FBRyxDQUQzQixDQURGLENBSUUsaUJBQU0sR0FBS0osb0JBQUwsRUFBTixDQUpGLENBTUQsQ0FuWmtCLG9FQXFaSyxTQUFDTSxDQUFELENBQStCLElBQW5CQyxDQUFBQSxDQUFtQiw2REFDN0NDLENBRDZDLENBQ3ZCRixDQUR1QixDQUM3Q0UsS0FENkMsQ0FDdENDLENBRHNDLENBQ3ZCSCxDQUR1QixDQUN0Q0csVUFEc0MsQ0FFckQsR0FBSSxDQUFDRCxDQUFMLENBQVksU0FRWixPQU5NeEUsQ0FBQUEsQ0FBVSxDQUFHdUUsQ0FBTSxFQUFJLEVBQUs1RSxLQUFMLENBQVdLLFVBTXhDLENBRkl5QixDQUFTLENBQWtCLE1BQWYsR0FBQWdELENBRWhCLENBRE1DLENBQWdCLENBQUcsRUFDekIsQ0FBU3RELENBQUMsQ0FBRyxDQUFiLENBQWdCQSxDQUFDLENBQUdvRCxDQUFLLENBQUNuRCxNQUExQixDQUFrQ0QsQ0FBQyxFQUFuQyxDQUF1QyxPQUNBb0QsQ0FBSyxDQUFDcEQsQ0FBRCxDQURMLENBQzdCdUQsQ0FENkIsR0FDN0JBLE9BRDZCLENBQ3BCNUUsQ0FEb0IsR0FDcEJBLEtBRG9CLENBQ2I2RSxDQURhLEdBQ2JBLFFBRGEsQ0FFL0JDLENBQW1CLENBQ3ZCN0UsQ0FBVSxDQUFDMkUsQ0FBRCxDQUFWLENBQW9CNUUsS0FBcEIsRUFBNkJDLENBQVUsQ0FBQzJFLENBQUQsQ0FBVixDQUFvQjVFLEtBQXBCLENBQTBCQSxLQUF2RCxDQUNJQyxDQUFVLENBQUMyRSxDQUFELENBQVYsQ0FBb0I1RSxLQUFwQixDQUEwQkEsS0FEOUIsQ0FFSUMsQ0FBVSxDQUFDMkUsQ0FBRCxDQUFWLENBQW9CNUUsS0FBcEIsSUFMK0IsQ0FPL0IrRSxDQUFXLENBQUdDLEtBQUssQ0FBQ0MsT0FBTixDQUFjSCxDQUFkLEVBQ2hCQSxDQUFtQixDQUFDSSxJQUFwQixDQUF5QixFQUF6QixDQURnQixDQUVoQkosQ0FUaUMsQ0FtQm5DSCxDQUFnQixDQUFDdEQsQ0FBRCxDQW5CbUIsQ0FZaENyQixDQVpnQyxDQWtCMUIrRSxDQUFXLEVBQUkvRSxDQUFLLEVBQUkrRSxDQWxCRSxDQW1CRSxNQUFmLEdBQUFMLENBbkJhLENBcUJFLE1BQWYsR0FBQUEsQ0FyQmEsQ0FhOUJLLENBQUQsRUFBaUIvRSxDQWJjLENBZ0JJLE1BQWYsR0FBQTBFLENBaEJXLENBY0ksTUFBZixHQUFBQSxDQWRXLENBeUJwQixPQUFiLEdBQUFHLENBekJpQyxHQTBCbkNGLENBQWdCLENBQUN0RCxDQUFELENBQWhCLENBQXNCLENBQUNzRCxDQUFnQixDQUFDdEQsQ0FBRCxDQTFCSixDQTRCdEMsQ0FJRCxNQUhBSyxDQUFBQSxDQUFTLENBQUdpRCxDQUFnQixDQUFDUSxLQUFqQixDQUF1QixTQUFDOUQsQ0FBRCxRQUFPLEtBQUFBLENBQVAsQ0FBdkIsQ0FHWixDQUFPSyxDQUNSLENBaGNrQixFQUVqQixFQUFLOUIsS0FBTCxDQUFhLENBQ1grQyxZQUFZLEdBREQsQ0FFWDlDLGFBQWEsR0FGRixDQUdYSSxVQUFVLENBQUUsRUFIRCxDQUlYbUYsT0FBTyxHQUpJLENBS1gzQyxVQUFVLEdBTEMsQ0FNWEMsYUFBYSxHQU5GLENBT1hFLG1CQUFtQixHQVBSLENBUVh5QyxPQUFPLEdBUkksQ0FTWEMsUUFBUSxDQUFFLEVBVEMsQ0FVWDNGLE9BQU8sQ0FBRSxFQVZFLENBV1gwRSxVQUFVLEdBWEMsQ0FZWGxFLGVBQWUsQ0FBRSxFQVpOLENBYVhELGNBQWMsQ0FBRSxFQWJMLENBY1hxRixXQUFXLEdBZEEsQ0FGSSxFQWtCbEIsQyxvUkFTSyxLQUFLL0YsSyxDQUxQcUQsQyxHQUFBQSxNLENBQ0FDLEMsR0FBQUEsVSxDQUNBMEMsQyxHQUFBQSxlLENBQ0FDLEMsR0FBQUEsYyxDQUNBQyxDLEdBQUFBLFksQ0FFRixLQUFLQyxVQUFMLEcsQ0FDSUosQyxhQUNlLDRDQUFTekMsQ0FBVCxhQUF1QkQsQ0FBdkIsRUFBaUM2QyxDQUFqQyxFQUNoQm5DLElBRGdCLENBQ1gsU0FBQ0MsQ0FBRCxRQUFVQSxDQUFBQSxDQUFJLENBQUNDLElBQUwsRUFBVixDQURXLEVBRWhCRixJQUZnQixDQUVYLFNBQUNHLENBQUQsUUFBY0EsQ0FBQUEsQ0FBZCxDQUZXLFdBR1Ysb0JBSFUsQyxXQUFia0MsQyxVQUtGQSxDQUFJLEVBQUksS0FBS0QsVSxtQkFLZixJQUpNMUYsQ0FJTixDQUptQixFQUluQixDQUhNRSxDQUdOLENBSHdCLEVBR3hCLENBRk1ELENBRU4sQ0FGdUIsRUFFdkIsOENBQVdILENBQUFBLENBQVgsU0FDTUMsQ0FBSyxPQURYLENBRU02RixDQUFpQixHQUZ2QixDQUdRQyxDQUFhLENBQ2pCL0YsQ0FBSyxDQUFDZ0csU0FBTixFQUNBUCxDQURBLEVBRUFBLENBQWUsQ0FBQ3pGLENBQUssQ0FBQ2dHLFNBQVAsQ0FObkIsQ0FrQkUsR0FWSU4sQ0FBYyxFQUFJQSxDQUFjLENBQUMxRixDQUFLLENBQUNOLEVBQVAsQ0FVcEMsQ0FURW9HLENBQWlCLEdBU25CLENBUldKLENBQWMsRUFBSTFGLENBQUssQ0FBQ2lHLE1BUW5DLEVBUEVqRyxDQUFLLENBQUNpRyxNQUFOLENBQWFDLElBQWIsQ0FBa0IsU0FBQ0MsQ0FBRCxDQUFXLENBQ3ZCVCxDQUFjLENBQUNTLENBQUssQ0FBQ3pHLEVBQVAsQ0FEUyxHQUV6Qm9HLENBQWlCLEdBRlEsQ0FJNUIsQ0FKRCxDQU9GLENBQW1CLFVBQWYsR0FBQTlGLENBQUssQ0FBQ0ssSUFBVixDQUNFSixDQUFLLENBQUdELENBQUssQ0FBQ29HLE9BQU4sQ0FDTEMsTUFESyxDQUNFLFNBQUNDLENBQUQsUUFDTlAsQ0FBQUEsQ0FBYSxDQUNUTyxDQUFNLENBQUNyRyxLQUFQLEdBQWlCd0YsQ0FBZSxDQUFDekYsQ0FBSyxDQUFDZ0csU0FBUCxDQUR2QixDQUVUTSxDQUFNLENBQUNDLFVBSEwsQ0FERixFQU1MQyxHQU5LLENBTUQsU0FBQ0YsQ0FBRCxRQUFZQSxDQUFBQSxDQUFNLENBQUNyRyxLQUFuQixDQU5DLENBRFYsQ0FTTTZGLENBVE4sR0FVSTdGLENBQUssQ0FBR0QsQ0FBSyxDQUFDaUcsTUFBTixDQUNMSSxNQURLLENBQ0UsU0FBQ0MsQ0FBRCxRQUFZWixDQUFBQSxDQUFjLENBQUNZLENBQU0sQ0FBQzVHLEVBQVIsQ0FBMUIsQ0FERixFQUVMOEcsR0FGSyxDQUVELFNBQUNGLENBQUQsUUFBWUEsQ0FBQUEsQ0FBTSxDQUFDckYsS0FBbkIsQ0FGQyxDQVZaLE1BY08sSUFBbUIsT0FBZixHQUFBakIsQ0FBSyxDQUFDSyxJQUFWLEVBQ0wsR0FBSTBGLENBQUosQ0FDRTlGLENBQUssQ0FBR3dGLENBQWUsQ0FBQ3pGLENBQUssQ0FBQ2dHLFNBQVAsQ0FEekIsS0FFTyxDQUNMLEdBQU1TLENBQUFBLENBQVcsQ0FBR3pHLENBQUssQ0FBQ29HLE9BQU4sQ0FBY00sSUFBZCxDQUNsQixTQUFDSixDQUFELFFBQVlBLENBQUFBLENBQU0sQ0FBQ0MsVUFBbkIsQ0FEa0IsQ0FBcEIsQ0FHQXRHLENBQUssQ0FBR3dHLENBQVcsQ0FBR0EsQ0FBVyxDQUFDeEcsS0FBZixDQUF1QixFQUMzQyxDQVJJLEtBU0EsSUFBbUIsUUFBZixHQUFBRCxDQUFLLENBQUNLLElBQVYsQ0FBNkIsQ0FDbEMsR0FBTXNHLENBQUFBLENBQWMsQ0FBRzNHLENBQUssQ0FBQ29HLE9BQU4sQ0FDcEJDLE1BRG9CLENBQ2IsU0FBQ0MsQ0FBRCxRQUNOUCxDQUFBQSxDQUFhLENBQ1RPLENBQU0sQ0FBQ3JHLEtBQVAsR0FBaUJ3RixDQUFlLENBQUN6RixDQUFLLENBQUNnRyxTQUFQLENBRHZCLENBRVRNLENBQU0sQ0FBQ0MsVUFITCxDQURhLEVBTXBCQyxHQU5vQixDQU1oQixTQUFDSSxDQUFELFFBQVcsQ0FBRTNHLEtBQUssQ0FBRTJHLENBQUksQ0FBQzNHLEtBQWQsQ0FBcUJnQixLQUFLLENBQUUyRixDQUFJLENBQUNDLElBQWpDLENBQVgsQ0FOZ0IsQ0FBdkIsQ0FPQTVHLENBQUssQ0FDSDBHLENBQWMsRUFBNEIsQ0FBeEIsQ0FBQUEsQ0FBYyxDQUFDcEYsTUFBakMsQ0FDSW9GLENBQWMsQ0FBQyxDQUFELENBRGxCLENBRUksRUFDUCxDQVpNLElBYUwxRyxDQUFBQSxDQUFLLENBQUc4RixDQUFhLENBQ2pCTixDQUFlLENBQUN6RixDQUFLLENBQUNnRyxTQUFQLENBREUsQ0FFakJGLENBQWlCLENBQ2pCSixDQUFjLENBQUMxRixDQUFLLENBQUNOLEVBQVAsQ0FERyxDQUVqQk0sQ0FBSyxDQUFDOEcsWUFqQkwsQ0FrQmMsWUFBZixHQUFBOUcsQ0FBSyxDQUFDSyxJQWxCTCxHQW1CSG1GLENBQVcsR0FuQlIsRUF3QlAsR0FBSXhGLENBQUssQ0FBQzBCLGdCQUFWLENBQTRCLENBTTFCLE9BQ1FoQyxDQUFBQSxDQURSLENBTE1xSCxDQUFRLENBQUcsQ0FDZnJILEVBQUUsQ0FBRU0sQ0FBSyxDQUFDTixFQURLLENBRWZnQyxnQkFBZ0IsQ0FBRTFCLENBQUssQ0FBQzBCLGdCQUZULENBS2pCLENBRE1zRixDQUFHLENBQUdoSCxDQUFLLENBQUMwQixnQkFBTixDQUF1QmdELEtBQXZCLENBQTZCOEIsR0FBN0IsQ0FBaUMsU0FBQ0ksQ0FBRCxRQUFVQSxDQUFBQSxDQUFJLENBQUMvQixPQUFmLENBQWpDLENBQ1osQ0FBU3ZELENBQUMsQ0FBRyxDQUFiLENBQWdCQSxDQUFDLENBQUcwRixDQUFHLENBQUN6RixNQUF4QixDQUFnQ0QsQ0FBQyxFQUFqQyxDQUNRNUIsQ0FEUixDQUNhdUgsUUFBUSxDQUFDRCxDQUFHLENBQUMxRixDQUFELENBQUosQ0FEckIsQ0FFcUMsQ0FBQyxDQUFoQyxHQUFBbkIsQ0FBYyxDQUFDTSxPQUFmLENBQXVCZixDQUF2QixDQUZOLEVBR0lTLENBQWMsQ0FBQ1MsSUFBZixDQUFvQmxCLENBQXBCLENBSEosQ0FNQVUsQ0FBZSxDQUFDUSxJQUFoQixDQUFxQm1HLENBQXJCLENBQ0QsQ0FFRDdHLENBQVUsQ0FBQ0YsQ0FBSyxDQUFDTixFQUFQLENBQVYsQ0FBdUIsQ0FDckIyQixLQUFLLENBQUUsOEJBQWNwQixDQUFkLENBQXFCRCxDQUFyQixDQURjLENBRXJCQyxLQUFLLENBQUxBLENBRnFCLENBR3JCZ0IsS0FBSyxDQUFFakIsQ0FBSyxDQUFDaUIsS0FIUSxDQUlyQlcsVUFBVSxDQUFFNUIsQ0FBSyxDQUFDNEIsVUFKRyxDQUtyQlIsUUFBUSxDQUFFcEIsQ0FBSyxDQUFDb0IsUUFMSyxDQU1yQmQsVUFBVSxDQUFFTixDQUFLLENBQUNNLFVBTkcsQ0FoRnpCLElBQW9CdUYsQ0FBSSxDQUFDcEIsTUFBekIsb0QsbVBBMEZBLElBQVNuRCxDQUFULENBQWEsQ0FBYixDQUFnQkEsQ0FBQyxDQUFHbEIsQ0FBZSxDQUFDbUIsTUFBcEMsQ0FBNENELENBQUMsRUFBN0MsQ0FDRXBCLENBQVUsQ0FDUkUsQ0FBZSxDQUFDa0IsQ0FBRCxDQUFmLENBQW1CNUIsRUFEWCxDQUFWLENBRUVpQyxTQUZGLENBRWMsS0FBS0YscUJBQUwsQ0FDWnJCLENBQWUsQ0FBQ2tCLENBQUQsQ0FBZixDQUFtQkksZ0JBRFAsQ0FFWnhCLENBRlksQ0FGZCxDQVFGLEtBQUtQLFFBQUwsQ0FDRSxDQUNFNEYsUUFBUSxDQUFFTSxDQURaLENBRUUzRixVQUFVLENBQVZBLENBRkYsQ0FHRW9FLFVBQVUsR0FBRXVCLENBQUksQ0FBQ3FCLFVBQVAsRUFBb0IsQ0FIaEMsQ0FJRTlHLGVBQWUsQ0FBZkEsQ0FKRixDQUtFRCxjQUFjLENBQWRBLENBTEYsQ0FNRXFGLFdBQVcsQ0FBWEEsQ0FORixDQURGLENBU0UsVUFBTSxPQUV1QyxDQUFJLENBQUMvRixLQUY1QyxDQUVJMEgsQ0FGSixHQUVJQSxRQUZKLENBRWNDLENBRmQsR0FFY0EsUUFGZCxDQUV3QjlDLENBRnhCLEdBRXdCQSxVQUZ4QixDQUdBNkMsQ0FIQSxFQUlGQSxDQUFRLENBQUMsaUJBQU0sQ0FBQSxDQUFJLENBQUNBLFFBQVgsQ0FBRCxDQUpOLENBTUFDLENBTkEsRUFPRkEsQ0FBUSxDQUFDLGlCQUFNLENBQUEsQ0FBSSxDQUFDQSxRQUFYLENBQUQsQ0FQTixDQVNBOUMsQ0FUQSxFQVVGQSxDQUFVLENBQUMsQ0FBSSxDQUFDekUsS0FBTCxDQUFXeUUsVUFBWixDQUViLENBckJILEMsc05BMEJtQixDQUNyQixLQUFLc0IsVUFBTCxHQUNELEMsdUNBMlJRLGNBVUgsS0FBSy9GLEtBVkYsQ0FFTDBGLENBRkssR0FFTEEsUUFGSyxDQUdMckYsQ0FISyxHQUdMQSxVQUhLLENBSUwwQyxDQUpLLEdBSUxBLFlBSkssQ0FLTEQsQ0FMSyxHQUtMQSxhQUxLLENBTUwvQyxDQU5LLEdBTUxBLE9BTkssQ0FPTDhDLENBUEssR0FPTEEsVUFQSyxDQVFMNEIsQ0FSSyxHQVFMQSxVQVJLLENBU0xrQixDQVRLLEdBU0xBLFdBVEssR0FvQkgsS0FBSy9GLEtBcEJGLENBWUw0SCxDQVpLLEdBWUxBLEtBWkssQ0FhTEMsQ0FiSyxHQWFMQSxVQWJLLENBY0xDLENBZEssR0FjTEEsb0JBZEssQ0FlTEMsQ0FmSyxHQWVMQSxnQkFmSyxDQWdCTEMsQ0FoQkssR0FnQkxBLGdCQWhCSyxDQWlCTEMsQ0FqQkssR0FpQkxBLFlBakJLLENBa0JMQyxDQWxCSyxHQWtCTEEsWUFsQkssQ0FtQkxDLENBbkJLLEdBbUJMQSxjQW5CSyxHQXNCTEosQ0FBZ0IsSUF0QlgsQ0FxQkNLLENBckJELEdBcUJDQSxNQXJCRCxDQXFCU0MsQ0FyQlQsR0FxQlNBLE9BckJULEtBcUJrQkMsU0FyQmxCLENBcUJrQkEsQ0FyQmxCLFlBcUI4QixLQXJCOUIsR0FxQmdEQyxDQXJCaEQsR0FxQnFDQyxTQXJCckMsQ0F3QkM3RyxDQXhCRCxDQXdCY21FLENBeEJkLENBd0JDbkUsUUF4QkQsQ0EwQkQ4RyxDQUFVLENBQUdDLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZbEksQ0FBWixFQUF3QmdHLElBQXhCLENBQ2pCLFNBQUNtQyxDQUFELFFBQU8sQ0FBQ25JLENBQVUsQ0FBQ21JLENBQUQsQ0FBVixDQUFjMUcsU0FBZixFQUE0QnpCLENBQVUsQ0FBQ21JLENBQUQsQ0FBVixDQUFjaEgsS0FBakQsQ0FEaUIsQ0ExQlosQ0E2QkRpSCxDQUFjLEdBQUdoRSxDQUFILEVBQ2hCNkQsTUFBTSxDQUFDQyxJQUFQLENBQVlsSSxDQUFaLEVBQXdCZ0csSUFBeEIsQ0FDRSxTQUFDbUMsQ0FBRCxRQUNFbkksQ0FBQUEsQ0FBVSxDQUFDbUksQ0FBRCxDQUFWLENBQWN6RyxVQUFkLEdBQTZCMEMsQ0FBN0IsRUFDQSxDQUFDcEUsQ0FBVSxDQUFDbUksQ0FBRCxDQUFWLENBQWMxRyxTQURmLEVBRUF6QixDQUFVLENBQUNtSSxDQUFELENBQVYsQ0FBY2hILEtBSGhCLENBREYsQ0E5QkcsQ0FzQ1AsTUFDRSxpQ0FBQyxDQUFELEVBQ0UsR0FBRyxDQUFFLGFBQUNrSCxDQUFELFFBQVMsQ0FBQSxDQUFJLENBQUN2RyxVQUFMLENBQWtCdUcsQ0FBM0IsQ0FEUCxDQUVFLFNBQVMsQ0FBQyxjQUZaLENBR0UsR0FBRyxDQUFFLENBQUVDLFFBQVEsQ0FBRSxVQUFaLENBSFAsQ0FJRSxFQUFFLHdCQUFrQixLQUFLL0ksS0FBTCxDQUFXcUQsTUFBN0IsQ0FKSixFQU1HeUMsQ0FBUSxDQUFDOEIsS0FBVCxDQUFpQixJQUFqQixDQUF3QlMsQ0FBTyxFQUFJLGdDQUFDLENBQUQsRUFBUyxTQUFTLEdBQWxCLEVBTnRDLENBUUdsRixDQUFZLEVBQUksQ0FBQ0QsQ0FBakIsRUFDQyxnQ0FBQyxxQkFBRCxFQUNFLFVBQVUsQ0FBRXFGLENBQVUsSUFEeEIsQ0FFRSxZQUFZLENBQ1ZOLENBQVksRUFBSSwwQ0FIcEIsRUFUSixDQWlCRy9FLENBQWEsRUFBSSxLQUFLOUMsS0FBTCxDQUFXZ0QsbUJBQTVCLEVBQ0MsZ0NBQUMsNEJBQUQsRUFBa0IsWUFBWSxDQUFFLEtBQUtoRCxLQUFMLENBQVdnRCxtQkFBM0MsRUFsQkosQ0FxQkcsQ0FBQ0YsQ0FBRCxFQUFrQjRDLENBQVEsQ0FBQ2QsTUFBM0IsQ0FDQyx3Q0FDRSxRQUFRLENBQUUsa0JBQUNKLENBQUQsUUFBTyxDQUFBLENBQUksQ0FBQ29FLFFBQUwsQ0FBY3BFLENBQWQsQ0FBUCxDQURaLENBRUUsU0FBUyxDQUFFakQsQ0FGYixDQUdFLE9BQU8sQ0FBRW9FLENBQVcsQ0FBRyxxQkFBSCxPQUh0QixDQUlFLFVBQVUsR0FKWixFQU1HLENBQUNELENBQVEsQ0FBQzhCLEtBQVQsRUFBa0I5QixDQUFRLENBQUNtRCxXQUE1QixHQUNDLDJDQUNHbkQsQ0FBUSxDQUFDOEIsS0FBVCxFQUFrQkEsQ0FBbEIsQ0FDQyxzQ0FBSSxTQUFTLENBQUMsWUFBZCxFQUE0QjlCLENBQVEsQ0FBQzhCLEtBQXJDLENBREQsQ0FFRyxJQUhOLENBSUc5QixDQUFRLENBQUNtRCxXQUFULENBQ0MscUNBQUcsU0FBUyxDQUFDLGtCQUFiLEVBQWlDbkQsQ0FBUSxDQUFDbUQsV0FBMUMsQ0FERCxDQUVHLElBTk4sQ0FQSixDQWlCRSx1Q0FBSyxTQUFTLENBQUMsY0FBZixFQUNFLGdDQUFDLHdCQUFELEVBQ0UsZ0JBQWdCLENBQUVsQixDQURwQixDQUVFLGdCQUFnQixDQUFFQyxDQUZwQixDQUdFLE1BQU0sQ0FBRWxDLENBQVEsQ0FBQ2QsTUFIbkIsQ0FJRSxVQUFVLENBQUV2RSxDQUpkLENBS0UsWUFBWSxDQUFFMEMsQ0FMaEIsQ0FNRSxhQUFhLENBQUVELENBTmpCLENBT0UsVUFBVSxDQUFFLEtBQUtnRyxpQkFQbkIsQ0FRRSxPQUFPLENBQUUvSSxDQVJYLENBU0UsVUFBVSxDQUFFLEtBQUtnSixVQVRuQixDQVVFLFVBQVUsQ0FBRXJELENBQVEsQ0FBQzJCLFVBVnZCLENBV0UsVUFBVSxDQUFFNUMsQ0FYZCxDQVlFLFFBQVEsQ0FBRSxLQUFLOEMsUUFaakIsQ0FhRSxRQUFRLENBQUUsS0FBS0QsUUFiakIsQ0FjRSxjQUFjLENBQUVtQixDQWRsQixDQWVFLHFCQUFxQixDQUFFLEtBQUs3RyxxQkFmOUIsQ0FnQkUsb0JBQW9CLENBQUU4RixDQWhCeEIsQ0FpQkUsY0FBYyxDQUFFaEMsQ0FBUSxDQUFDc0QsY0FqQjNCLENBa0JFLE1BQU0sQ0FBRSxLQUFLaEosS0FBTCxDQUFXQyxhQWxCckIsQ0FtQkUsVUFBVSxDQUFFLEtBQUtnSixVQW5CbkIsQ0FvQkUsWUFBWSxDQUFFbkIsQ0FwQmhCLEVBREYsQ0F1QkcsQ0FBQyxDQUFDcEMsQ0FBUSxDQUFDMkIsVUFBVixFQUNDM0IsQ0FBUSxDQUFDMkIsVUFBVCxFQUNDM0IsQ0FBUSxDQUFDMkIsVUFBVCxDQUFvQjZCLEtBQXBCLENBQTBCeEgsTUFBMUIsR0FBcUMrQyxDQUZ4QyxHQUdDLGdDQUFDLGtCQUFELEVBQ0UsTUFBTSxDQUFFdUQsQ0FEVixDQUVFLE9BQU8sQ0FBRUMsQ0FGWCxDQUdFLFFBQVEsQ0FBRXZDLENBSFosQ0FJRSxVQUFVLENBQUUrQixDQUpkLENBS0UsVUFBVSxDQUFFWSxDQUxkLENBTUUsVUFBVSxDQUFFeEYsQ0FOZCxDQU9FLFFBQVEsQ0FBRSxLQUFLMEUsUUFQakIsQ0FRRSxjQUFjLENBQUVRLENBUmxCLEVBMUJKLENBakJGLENBREQsQ0EwREMsRUEvRUosQ0FtRkgsQyxPQTdqQnVCb0IsZ0IsRUFna0IxQnhKLFdBQVcsQ0FBQ3lKLFlBQVosQ0FBMkIsQ0FDekI1QixLQUFLLEdBRG9CLENBRXpCQyxVQUFVLEdBRmUsQ0FHekJDLG9CQUFvQixHQUhLLENBSXpCdkUsa0JBQWtCLEdBSk8sQyxjQVNaeEQsVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBmZXRjaCBmcm9tIFwiaXNvbW9ycGhpYy11bmZldGNoXCI7XG5pbXBvcnQgUmVuZGVyRmllbGRzIGZyb20gXCIuL0Zvcm1FbGVtZW50cy9SZW5kZXJGaWVsZHNcIjtcbmltcG9ydCBGb3JtRXJyb3IgZnJvbSBcIi4vRm9ybUVsZW1lbnRzL0Zvcm1FcnJvclwiO1xuaW1wb3J0IEZvcm1Db25maXJtYXRpb24gZnJvbSBcIi4vRm9ybUVsZW1lbnRzL0Zvcm1Db25maXJtYXRpb25cIjtcbmltcG9ydCB7IHZhbGlkYXRlRmllbGQgfSBmcm9tIFwiLi9IZWxwZXJzL3ZhbGlkYXRpb25cIjtcbmltcG9ydCBTdWJtaXQgZnJvbSBcIi4vRm9ybUVsZW1lbnRzL1N1Ym1pdFwiO1xuXG5jbGFzcyBHcmF2aXR5Rm9ybSBleHRlbmRzIENvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBzdWJtaXRGYWlsZWQ6IGZhbHNlLFxuICAgICAgZXJyb3JNZXNzYWdlczogZmFsc2UsXG4gICAgICBmb3JtVmFsdWVzOiB7fSxcbiAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICBzdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgIHN1Ym1pdFN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgY29uZmlybWF0aW9uTWVzc2FnZTogZmFsc2UsXG4gICAgICBpc1ZhbGlkOiBmYWxzZSxcbiAgICAgIGZvcm1EYXRhOiB7fSxcbiAgICAgIHRvdWNoZWQ6IHt9LFxuICAgICAgYWN0aXZlUGFnZTogZmFsc2UsXG4gICAgICBjb25kaXRpb25GaWVsZHM6IHt9LFxuICAgICAgY29uZGl0aW9hbmxJZHM6IHt9LFxuICAgICAgaXNNdWx0aXBhcnQ6IGZhbHNlLFxuICAgIH07XG4gIH1cblxuICBhc3luYyBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBjb25zdCB7XG4gICAgICBmb3JtSUQsXG4gICAgICBiYWNrZW5kVXJsLFxuICAgICAgcG9wdWxhdGVkRmllbGRzLFxuICAgICAgcG9wdWxhdGVkRW50cnksXG4gICAgICBmZXRjaE9wdGlvbnMsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgdGhpcy5faXNNb3VudGVkID0gdHJ1ZTtcbiAgICBsZXQgaXNNdWx0aXBhcnQgPSBmYWxzZTtcbiAgICBjb25zdCBmb3JtID0gYXdhaXQgZmV0Y2goYCR7YmFja2VuZFVybH0vJHtmb3JtSUR9YCwgZmV0Y2hPcHRpb25zKVxuICAgICAgLnRoZW4oKHJlc3ApID0+IHJlc3AuanNvbigpKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZSlcbiAgICAgIC5jYXRjaCgoKSA9PiBmYWxzZSk7XG5cbiAgICBpZiAoZm9ybSAmJiB0aGlzLl9pc01vdW50ZWQpIHtcbiAgICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcbiAgICAgIGNvbnN0IGNvbmRpdGlvbkZpZWxkcyA9IFtdO1xuICAgICAgY29uc3QgY29uZGl0aW9hbmxJZHMgPSBbXTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLXN5bnRheFxuICAgICAgZm9yIChjb25zdCBmaWVsZCBvZiBmb3JtLmZpZWxkcykge1xuICAgICAgICBsZXQgdmFsdWU7XG4gICAgICAgIGxldCBoYXNQb3B1bGF0ZWRFbnRyeSA9IGZhbHNlO1xuICAgICAgICBjb25zdCBoYXNQb3B1bGF0aW9uID1cbiAgICAgICAgICBmaWVsZC5pbnB1dE5hbWUgJiZcbiAgICAgICAgICBwb3B1bGF0ZWRGaWVsZHMgJiZcbiAgICAgICAgICBwb3B1bGF0ZWRGaWVsZHNbZmllbGQuaW5wdXROYW1lXTtcblxuICAgICAgICBpZiAocG9wdWxhdGVkRW50cnkgJiYgcG9wdWxhdGVkRW50cnlbZmllbGQuaWRdKSB7XG4gICAgICAgICAgaGFzUG9wdWxhdGVkRW50cnkgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHBvcHVsYXRlZEVudHJ5ICYmIGZpZWxkLmlucHV0cykge1xuICAgICAgICAgIGZpZWxkLmlucHV0cy5zb21lKChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBvcHVsYXRlZEVudHJ5W2lucHV0LmlkXSkge1xuICAgICAgICAgICAgICBoYXNQb3B1bGF0ZWRFbnRyeSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICAgICAgdmFsdWUgPSBmaWVsZC5jaG9pY2VzXG4gICAgICAgICAgICAuZmlsdGVyKChjaG9pY2UpID0+XG4gICAgICAgICAgICAgIGhhc1BvcHVsYXRpb25cbiAgICAgICAgICAgICAgICA/IGNob2ljZS52YWx1ZSA9PT0gcG9wdWxhdGVkRmllbGRzW2ZpZWxkLmlucHV0TmFtZV1cbiAgICAgICAgICAgICAgICA6IGNob2ljZS5pc1NlbGVjdGVkXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAubWFwKChjaG9pY2UpID0+IGNob2ljZS52YWx1ZSk7XG5cbiAgICAgICAgICBpZiAoaGFzUG9wdWxhdGVkRW50cnkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gZmllbGQuaW5wdXRzXG4gICAgICAgICAgICAgIC5maWx0ZXIoKGNob2ljZSkgPT4gcG9wdWxhdGVkRW50cnlbY2hvaWNlLmlkXSlcbiAgICAgICAgICAgICAgLm1hcCgoY2hvaWNlKSA9PiBjaG9pY2UubGFiZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChmaWVsZC50eXBlID09PSBcInJhZGlvXCIpIHtcbiAgICAgICAgICBpZiAoaGFzUG9wdWxhdGlvbikge1xuICAgICAgICAgICAgdmFsdWUgPSBwb3B1bGF0ZWRGaWVsZHNbZmllbGQuaW5wdXROYW1lXTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcHJlc2VsZWN0ZWQgPSBmaWVsZC5jaG9pY2VzLmZpbmQoXG4gICAgICAgICAgICAgIChjaG9pY2UpID0+IGNob2ljZS5pc1NlbGVjdGVkXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdmFsdWUgPSBwcmVzZWxlY3RlZCA/IHByZXNlbGVjdGVkLnZhbHVlIDogXCJcIjtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGQudHlwZSA9PT0gXCJzZWxlY3RcIikge1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkT3B0aW9uID0gZmllbGQuY2hvaWNlc1xuICAgICAgICAgICAgLmZpbHRlcigoY2hvaWNlKSA9PlxuICAgICAgICAgICAgICBoYXNQb3B1bGF0aW9uXG4gICAgICAgICAgICAgICAgPyBjaG9pY2UudmFsdWUgPT09IHBvcHVsYXRlZEZpZWxkc1tmaWVsZC5pbnB1dE5hbWVdXG4gICAgICAgICAgICAgICAgOiBjaG9pY2UuaXNTZWxlY3RlZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgLm1hcCgoaXRlbSkgPT4gKHsgdmFsdWU6IGl0ZW0udmFsdWUsIGxhYmVsOiBpdGVtLnRleHQgfSkpO1xuICAgICAgICAgIHZhbHVlID1cbiAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uICYmIHNlbGVjdGVkT3B0aW9uLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgPyBzZWxlY3RlZE9wdGlvblswXVxuICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSBoYXNQb3B1bGF0aW9uXG4gICAgICAgICAgICA/IHBvcHVsYXRlZEZpZWxkc1tmaWVsZC5pbnB1dE5hbWVdXG4gICAgICAgICAgICA6IGhhc1BvcHVsYXRlZEVudHJ5XG4gICAgICAgICAgICA/IHBvcHVsYXRlZEVudHJ5W2ZpZWxkLmlkXVxuICAgICAgICAgICAgOiBmaWVsZC5kZWZhdWx0VmFsdWU7XG4gICAgICAgICAgaWYgKGZpZWxkLnR5cGUgPT09IFwiZmlsZXVwbG9hZFwiKSB7XG4gICAgICAgICAgICBpc011bHRpcGFydCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ3JhYiBhbGwgY29uZGl0aW9uYWwgbG9naWMgZmllbGRzXG4gICAgICAgIGlmIChmaWVsZC5jb25kaXRpb25hbExvZ2ljKSB7XG4gICAgICAgICAgY29uc3QgdG1wRmllbGQgPSB7XG4gICAgICAgICAgICBpZDogZmllbGQuaWQsXG4gICAgICAgICAgICBjb25kaXRpb25hbExvZ2ljOiBmaWVsZC5jb25kaXRpb25hbExvZ2ljLFxuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc3QgaWRzID0gZmllbGQuY29uZGl0aW9uYWxMb2dpYy5ydWxlcy5tYXAoKGl0ZW0pID0+IGl0ZW0uZmllbGRJZCk7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGlkID0gcGFyc2VJbnQoaWRzW2ldKTtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb2FubElkcy5pbmRleE9mKGlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgY29uZGl0aW9hbmxJZHMucHVzaChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbmRpdGlvbkZpZWxkcy5wdXNoKHRtcEZpZWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcm1WYWx1ZXNbZmllbGQuaWRdID0ge1xuICAgICAgICAgIHZhbGlkOiB2YWxpZGF0ZUZpZWxkKHZhbHVlLCBmaWVsZCksXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgbGFiZWw6IGZpZWxkLmxhYmVsLFxuICAgICAgICAgIHBhZ2VOdW1iZXI6IGZpZWxkLnBhZ2VOdW1iZXIsXG4gICAgICAgICAgY3NzQ2xhc3M6IGZpZWxkLmNzc0NsYXNzLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZpZWxkLmlzUmVxdWlyZWQsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBjb25kaXRpb24gbG9naWNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZGl0aW9uRmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZvcm1WYWx1ZXNbXG4gICAgICAgICAgY29uZGl0aW9uRmllbGRzW2ldLmlkXG4gICAgICAgIF0uaGlkZUZpZWxkID0gdGhpcy5jaGVja0NvbmRpdGlvbmFsTG9naWMoXG4gICAgICAgICAgY29uZGl0aW9uRmllbGRzW2ldLmNvbmRpdGlvbmFsTG9naWMsXG4gICAgICAgICAgZm9ybVZhbHVlc1xuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNldFN0YXRlKFxuICAgICAgICB7XG4gICAgICAgICAgZm9ybURhdGE6IGZvcm0sXG4gICAgICAgICAgZm9ybVZhbHVlcyxcbiAgICAgICAgICBhY3RpdmVQYWdlOiBmb3JtLnBhZ2luYXRpb24gPyAxIDogZmFsc2UsXG4gICAgICAgICAgY29uZGl0aW9uRmllbGRzLFxuICAgICAgICAgIGNvbmRpdGlvYW5sSWRzLFxuICAgICAgICAgIGlzTXVsdGlwYXJ0LFxuICAgICAgICB9LFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgLy8gcGFzcyBzdGF0ZSB0byBwYXJlbnQgY29tcG9uZW50XG4gICAgICAgICAgY29uc3QgeyBuZXh0U3RlcCwgcHJldlN0ZXAsIGFjdGl2ZVBhZ2UgfSA9IHRoaXMucHJvcHM7XG4gICAgICAgICAgaWYgKG5leHRTdGVwKSB7XG4gICAgICAgICAgICBuZXh0U3RlcCgoKSA9PiB0aGlzLm5leHRTdGVwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHByZXZTdGVwKSB7XG4gICAgICAgICAgICBwcmV2U3RlcCgoKSA9PiB0aGlzLnByZXZTdGVwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGFjdGl2ZVBhZ2UpIHtcbiAgICAgICAgICAgIGFjdGl2ZVBhZ2UodGhpcy5zdGF0ZS5hY3RpdmVQYWdlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5faXNNb3VudGVkID0gZmFsc2U7XG4gIH1cblxuICBzZXRUb3VjaGVkID0gKGlkKSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICB0b3VjaGVkOiB7IC4uLnRoaXMuc3RhdGUudG91Y2hlZCwgW2lkXTogdHJ1ZSB9LFxuICAgIH0pO1xuICB9O1xuXG4gIHVuc2V0RXJyb3IgPSAoaWQpID0+IHtcbiAgICBjb25zdCB7IGVycm9yTWVzc2FnZXMgfSA9IHRoaXMuc3RhdGU7XG4gICAgaWYgKCFlcnJvck1lc3NhZ2VzKSByZXR1cm47XG5cbiAgICBpZiAoZXJyb3JNZXNzYWdlc1tpZF0pIHtcbiAgICAgIGRlbGV0ZSBlcnJvck1lc3NhZ2VzW2lkXTtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBlcnJvck1lc3NhZ2VzIH0pO1xuICAgIH1cbiAgfTtcblxuICB1cGRhdGVGb3JtSGFuZGxlciA9IChldmVudCwgZmllbGQpID0+IHtcbiAgICBjb25zdCB7IGZvcm1WYWx1ZXMsIGNvbmRpdGlvYW5sSWRzLCBjb25kaXRpb25GaWVsZHMgfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IHsgaWQsIHR5cGUsIGlzUmVxdWlyZWQgfSA9IGZpZWxkO1xuICAgIC8vIFNldCBuZXcgdmFsdWVcbiAgICBsZXQgdmFsdWU7XG5cbiAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJjaGVja2JveFwiKSB7XG4gICAgICBjb25zdCB2YWx1ZXMgPSBbLi4uZm9ybVZhbHVlc1tmaWVsZC5pZF0udmFsdWVdO1xuICAgICAgY29uc3QgaW5kZXggPSB2YWx1ZXMuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgdmFsdWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZXMucHVzaChldmVudC50YXJnZXQudmFsdWUpO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB2YWx1ZXM7XG4gICAgfSBlbHNlIGlmIChmaWVsZC50eXBlID09IFwiZGF0ZVwiICYmIGZpZWxkLmRhdGVUeXBlICE9PSBcImRhdGVwaWNrZXJcIikge1xuICAgICAgY29uc3QgeyBzdWJJZCwgZGF0ZUxhYmVsIH0gPSBmaWVsZDtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFsuLi5mb3JtVmFsdWVzW2ZpZWxkLmlkXS52YWx1ZV07XG4gICAgICB2YWx1ZXNbc3ViSWRdID0ge1xuICAgICAgICB2YWw6IGV2ZW50LnRhcmdldC52YWx1ZSxcbiAgICAgICAgbGFiZWw6IGRhdGVMYWJlbCxcbiAgICAgIH07XG4gICAgICB2YWx1ZSA9IHZhbHVlcztcbiAgICB9IGVsc2UgaWYgKGZpZWxkLnR5cGUgPT0gXCJjb25zZW50XCIpIHtcbiAgICAgIHZhbHVlID0gZXZlbnQudGFyZ2V0ID8gZXZlbnQudGFyZ2V0LmNoZWNrZWQgOiBcIm51bGxcIjtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgZmllbGQudHlwZSA9PT0gXCJwYXNzd29yZFwiIHx8XG4gICAgICAoZmllbGQudHlwZSA9PT0gXCJlbWFpbFwiICYmIGZpZWxkLmVtYWlsQ29uZmlybUVuYWJsZWQpXG4gICAgKSB7XG4gICAgICBjb25zdCB7IHN1YklkIH0gPSBmaWVsZDtcbiAgICAgIGNvbnN0IHZhbHVlcyA9XG4gICAgICAgIGZvcm1WYWx1ZXNbZmllbGQuaWRdICYmIGZvcm1WYWx1ZXNbZmllbGQuaWRdLnZhbHVlXG4gICAgICAgICAgPyBbLi4uZm9ybVZhbHVlc1tmaWVsZC5pZF0udmFsdWVdXG4gICAgICAgICAgOiBbXTtcbiAgICAgIHZhbHVlc1tzdWJJZF0gPSB7XG4gICAgICAgIHZhbDogZXZlbnQudGFyZ2V0LnZhbHVlLFxuICAgICAgfTtcbiAgICAgIHZhbHVlID0gdmFsdWVzO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IGV2ZW50LnRhcmdldCA/IGV2ZW50LnRhcmdldC52YWx1ZSA6IFwibnVsbFwiO1xuICAgIH1cbiAgICAvLyBpZiBmaWVsZCBpcyBJQkFOXG4gICAgaWYgKHR5cGUgPT09IFwidGV4dFwiICYmIGZpZWxkLmNzc0NsYXNzLmluZGV4T2YoXCJpYmFuXCIpID4gLTEpIHtcbiAgICAgIHR5cGUgPSBcImliYW5cIjtcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBmaWVsZFxuICAgIGNvbnN0IHZhbGlkID0gdmFsaWRhdGVGaWVsZCh2YWx1ZSwgZmllbGQpO1xuXG4gICAgLy8gaWYgZmllbGQgSUQgaXMgc29tZXdoZXJlIGluIGNvbmRpdGlvbmFsIGZpZWxkc1xuICAgIC8vIHJlY2FsY3VsYXRlIGFsbCBjb25kaXRpb25zXG4gICAgaWYgKGNvbmRpdGlvYW5sSWRzLmluZGV4T2YoaWQpICE9PSAtMSkge1xuICAgICAgZm9ybVZhbHVlc1tpZF0udmFsdWUgPSB2YWx1ZTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uZGl0aW9uRmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHsgaWQgfSA9IGNvbmRpdGlvbkZpZWxkc1tpXTtcbiAgICAgICAgY29uc3QgaGlkZSA9IHRoaXMuY2hlY2tDb25kaXRpb25hbExvZ2ljKFxuICAgICAgICAgIGNvbmRpdGlvbkZpZWxkc1tpXS5jb25kaXRpb25hbExvZ2ljLFxuICAgICAgICAgIGZvcm1WYWx1ZXNcbiAgICAgICAgKTtcbiAgICAgICAgZm9ybVZhbHVlc1tpZF0uaGlkZUZpZWxkID0gaGlkZTtcbiAgICAgICAgaWYgKGhpZGUpIHtcbiAgICAgICAgICBpZiAoZm9ybVZhbHVlc1tpZF0uaXNSZXF1aXJlZCAmJiBoaWRlKSB7XG4gICAgICAgICAgICBmb3JtVmFsdWVzW2lkXS52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvcm1WYWx1ZXNbaWRdLnZhbGlkID0gISFmb3JtVmFsdWVzW2lkXS5pc1JlcXVpcmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXRTdGF0ZShcbiAgICAgIHtcbiAgICAgICAgZm9ybVZhbHVlczoge1xuICAgICAgICAgIC4uLmZvcm1WYWx1ZXMsXG4gICAgICAgICAgW2lkXToge1xuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIHZhbGlkLFxuICAgICAgICAgICAgbGFiZWw6IGZpZWxkLmxhYmVsLFxuICAgICAgICAgICAgcGFnZU51bWJlcjogZmllbGQucGFnZU51bWJlcixcbiAgICAgICAgICAgIGNzc0NsYXNzOiBmaWVsZC5jc3NDbGFzcyxcbiAgICAgICAgICAgIGlzUmVxdWlyZWQ6IGZpZWxkLmlzUmVxdWlyZWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIHBhc3Mgc3RhdGUgdG8gcGFyZW50IGNvbXBvbmVudFxuICAgICAgICBjb25zdCB7IG9uQ2hhbmdlLCBvbkNoYW5nZUZpZWxkIH0gPSB0aGlzLnByb3BzO1xuICAgICAgICBpZiAob25DaGFuZ2UpIHtcbiAgICAgICAgICBvbkNoYW5nZSh0aGlzLnN0YXRlLmZvcm1WYWx1ZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvbkNoYW5nZUZpZWxkKSB7XG4gICAgICAgICAgb25DaGFuZ2VGaWVsZCh7XG4gICAgICAgICAgICBbaWRdOiB7XG4gICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgdmFsaWQsXG4gICAgICAgICAgICAgIGxhYmVsOiBmaWVsZC5sYWJlbCxcbiAgICAgICAgICAgICAgcGFnZU51bWJlcjogZmllbGQucGFnZU51bWJlcixcbiAgICAgICAgICAgICAgY3NzQ2xhc3M6IGZpZWxkLmNzc0NsYXNzLFxuICAgICAgICAgICAgICBpc1JlcXVpcmVkOiBmaWVsZC5pc1JlcXVpcmVkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG5cbiAgc2Nyb2xsVG9Db25maXJtYXRpb24gPSAoKSA9PiB7XG4gICAgY29uc3QgcmVjdCA9IHRoaXMud3JhcHBlclJlZlxuICAgICAgPyB0aGlzLndyYXBwZXJSZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIDogZmFsc2U7XG4gICAgaWYgKHJlY3QgJiYgd2luZG93KSB7XG4gICAgICBjb25zdCBzY3JvbGxUb3AgPVxuICAgICAgICB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICAgIHdpbmRvdy5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogc2Nyb2xsVG9wICsgcmVjdC50b3AgLSAxMDAsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgb25TdWJtaXQgPSBhc3luYyAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgc3VibWl0dGluZzogdHJ1ZSxcbiAgICAgIHN1Ym1pdFN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgc3VibWl0RmFpbGVkOiBmYWxzZSxcbiAgICAgIGNvbmZpcm1hdGlvbk1lc3NhZ2U6IGZhbHNlLFxuICAgICAgZXJyb3JNZXNzYWdlczogZmFsc2UsXG4gICAgfSk7XG4gICAgY29uc3Qge1xuICAgICAgZm9ybUlELFxuICAgICAgYmFja2VuZFVybCxcbiAgICAgIGp1bXBUb0NvbmZpcm1hdGlvbixcbiAgICAgIG9uU3VibWl0U3VjY2VzcyxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBnZlN1Ym1pc3Npb25VcmwgPSBiYWNrZW5kVXJsLnN1YnN0cmluZyhcbiAgICAgIDAsXG4gICAgICBiYWNrZW5kVXJsLmluZGV4T2YoXCIvd3AtanNvblwiKVxuICAgICk7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YShldmVudC50YXJnZXQpO1xuXG4gICAgZmV0Y2goYCR7Z2ZTdWJtaXNzaW9uVXJsfS93cC1qc29uL2dmL3YyL2Zvcm1zLyR7Zm9ybUlEfS9zdWJtaXNzaW9uc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBib2R5OiBkYXRhLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzcCkgPT4gcmVzcC5qc29uKCkpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmlzX3ZhbGlkKSB7XG4gICAgICAgICAgaWYgKG9uU3VibWl0U3VjY2Vzcykge1xuICAgICAgICAgICAgY29uc3QgcmVzID0gb25TdWJtaXRTdWNjZXNzKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIGlmICghcmVzKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uTWVzc2FnZSA9IHJlc3BvbnNlLmNvbmZpcm1hdGlvbl9tZXNzYWdlO1xuICAgICAgICAgIGNvbnN0IHsgdHlwZSwgbGluayB9ID0gY29uZmlybWF0aW9uTWVzc2FnZSB8fCBmYWxzZTtcbiAgICAgICAgICBpZiAodHlwZSAmJiBsaW5rICYmIHR5cGUgPT09IFwicmVkaXJlY3RcIikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UobGluayk7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzdWJtaXR0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgIHN1Ym1pdFN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBjb25maXJtYXRpb25NZXNzYWdlOiByZXNwb25zZS5jb25maXJtYXRpb25fbWVzc2FnZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoanVtcFRvQ29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvQ29uZmlybWF0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IHtcbiAgICAgICAgICAgIHJlc3BvbnNlLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZXMgPVxuICAgICAgICAgIGVycm9yICYmIGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnZhbGlkYXRpb25fbWVzc2FnZXNcbiAgICAgICAgICAgID8gZXJyb3IucmVzcG9uc2UudmFsaWRhdGlvbl9tZXNzYWdlc1xuICAgICAgICAgICAgOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nXCI7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHN1Ym1pdHRpbmc6IGZhbHNlLFxuICAgICAgICAgIHN1Ym1pdEZhaWxlZDogdHJ1ZSxcbiAgICAgICAgICBlcnJvck1lc3NhZ2VzLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGp1bXBUb0NvbmZpcm1hdGlvbikge1xuICAgICAgICAgIHRoaXMuc2Nyb2xsVG9Db25maXJtYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH07XG5cbiAgbmV4dFN0ZXAgPSAoZSkgPT4ge1xuICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHsgYWN0aXZlUGFnZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGFjdGl2ZVBhZ2U6IHNldEFjdGl2ZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHNldEFjdGl2ZSAmJiBzZXRBY3RpdmUoYWN0aXZlUGFnZSArIDEpO1xuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICB7XG4gICAgICAgIGFjdGl2ZVBhZ2U6IGFjdGl2ZVBhZ2UgKyAxLFxuICAgICAgfSxcbiAgICAgICgpID0+IHRoaXMuc2Nyb2xsVG9Db25maXJtYXRpb24oKVxuICAgICk7XG4gIH07XG5cbiAgcHJldlN0ZXAgPSAoZSkgPT4ge1xuICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHsgYWN0aXZlUGFnZSB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7IGFjdGl2ZVBhZ2U6IHNldEFjdGl2ZSB9ID0gdGhpcy5wcm9wcztcblxuICAgIHNldEFjdGl2ZSAmJiBzZXRBY3RpdmUoYWN0aXZlUGFnZSAtIDEpO1xuICAgIHRoaXMuc2V0U3RhdGUoXG4gICAgICB7XG4gICAgICAgIGFjdGl2ZVBhZ2U6IGFjdGl2ZVBhZ2UgLSAxLFxuICAgICAgfSxcbiAgICAgICgpID0+IHRoaXMuc2Nyb2xsVG9Db25maXJtYXRpb24oKVxuICAgICk7XG4gIH07XG5cbiAgY2hlY2tDb25kaXRpb25hbExvZ2ljID0gKGNvbmRpdGlvbiwgZmllbGRzID0gZmFsc2UpID0+IHtcbiAgICBjb25zdCB7IHJ1bGVzLCBhY3Rpb25UeXBlIH0gPSBjb25kaXRpb247XG4gICAgaWYgKCFydWxlcykgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCBmb3JtVmFsdWVzID0gZmllbGRzIHx8IHRoaXMuc3RhdGUuZm9ybVZhbHVlcztcblxuICAgIC8vIHNob3cgb25seSBpZiBpcyBzZWxlY3RlZCBcIkFsbCBmaWVsZHNcIiAoaXQgc2hvdWxkIGJlIHR3ZWFrZWQgaW4gZnV0dXJlKVxuICAgIC8vIHdvcmtzIG9ubHkgXCJzaG93L2hpZGUgd2hlbiBmaWVsZCBpcyBlcXVhbCB0b1wiXG4gICAgbGV0IGhpZGVGaWVsZCA9IGFjdGlvblR5cGUgIT09IFwiaGlkZVwiO1xuICAgIGNvbnN0IGhpZGVCYXNlZE9uUnVsZXMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB7IGZpZWxkSWQsIHZhbHVlLCBvcGVyYXRvciB9ID0gcnVsZXNbaV07XG4gICAgICBjb25zdCBjb25kaXRpb25GaWVsZFZhbHVlID1cbiAgICAgICAgZm9ybVZhbHVlc1tmaWVsZElkXS52YWx1ZSAmJiBmb3JtVmFsdWVzW2ZpZWxkSWRdLnZhbHVlLnZhbHVlXG4gICAgICAgICAgPyBmb3JtVmFsdWVzW2ZpZWxkSWRdLnZhbHVlLnZhbHVlXG4gICAgICAgICAgOiBmb3JtVmFsdWVzW2ZpZWxkSWRdLnZhbHVlIHx8IGZhbHNlO1xuXG4gICAgICBjb25zdCBzdHJpbmdWYWx1ZSA9IEFycmF5LmlzQXJyYXkoY29uZGl0aW9uRmllbGRWYWx1ZSlcbiAgICAgICAgPyBjb25kaXRpb25GaWVsZFZhbHVlLmpvaW4oXCJcIilcbiAgICAgICAgOiBjb25kaXRpb25GaWVsZFZhbHVlO1xuXG4gICAgICAvLyBDaGVjayBpZiBjb21wYXJpc2lvbiB2YWx1ZSBpcyBlbXB0eVxuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICBpZiAoIXN0cmluZ1ZhbHVlICYmICF2YWx1ZSkge1xuICAgICAgICAgIGhpZGVCYXNlZE9uUnVsZXNbaV0gPSBhY3Rpb25UeXBlID09PSBcImhpZGVcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoaWRlQmFzZWRPblJ1bGVzW2ldID0gYWN0aW9uVHlwZSAhPT0gXCJoaWRlXCI7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3RyaW5nVmFsdWUgJiYgdmFsdWUgPT0gc3RyaW5nVmFsdWUpIHtcbiAgICAgICAgaGlkZUJhc2VkT25SdWxlc1tpXSA9IGFjdGlvblR5cGUgPT09IFwiaGlkZVwiO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaGlkZUJhc2VkT25SdWxlc1tpXSA9IGFjdGlvblR5cGUgIT09IFwiaGlkZVwiO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBvcGVyYXRvciBpcyAnaXNub3QnIHJldmVyc2UgdmFsdWVcbiAgICAgIGlmIChvcGVyYXRvciA9PT0gXCJpc25vdFwiKSB7XG4gICAgICAgIGhpZGVCYXNlZE9uUnVsZXNbaV0gPSAhaGlkZUJhc2VkT25SdWxlc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gICAgaGlkZUZpZWxkID0gaGlkZUJhc2VkT25SdWxlcy5ldmVyeSgoaSkgPT4gaSA9PT0gdHJ1ZSk7XG4gICAgLy8gZm9ybVZhbHVlc1tpZF0uaGlkZUZpZWxkID0gaGlkZUZpZWxkO1xuICAgIC8vIHRoaXMuc2V0U3RhdGUoeyBmb3JtVmFsdWVzIH0pO1xuICAgIHJldHVybiBoaWRlRmllbGQ7XG4gIH07XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGZvcm1EYXRhLFxuICAgICAgZm9ybVZhbHVlcyxcbiAgICAgIHN1Ym1pdEZhaWxlZCxcbiAgICAgIHN1Ym1pdFN1Y2Nlc3MsXG4gICAgICB0b3VjaGVkLFxuICAgICAgc3VibWl0dGluZyxcbiAgICAgIGFjdGl2ZVBhZ2UsXG4gICAgICBpc011bHRpcGFydCxcbiAgICB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCB7XG4gICAgICB0aXRsZSxcbiAgICAgIHN1Ym1pdEljb24sXG4gICAgICBzYXZlU3RhdGVUb0h0bWxGaWVsZCxcbiAgICAgIHN0eWxlZENvbXBvbmVudHMsXG4gICAgICBjdXN0b21Db21wb25lbnRzLFxuICAgICAgZXJyb3JNZXNzYWdlLFxuICAgICAgZHJvcHpvbmVUZXh0LFxuICAgICAgbG9hZGluZ1NwaW5uZXIsXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBCdXR0b24sIExvYWRpbmcsIEdGV3JhcHBlciA9IFwiZGl2XCIsIEZvcm1FcnJvcjogU0Zvcm1FcnJvciB9ID1cbiAgICAgIHN0eWxlZENvbXBvbmVudHMgfHwgZmFsc2U7XG5cbiAgICBjb25zdCB7IGNzc0NsYXNzIH0gPSBmb3JtRGF0YTtcblxuICAgIGNvbnN0IGlzRGlzYWJsZWQgPSBPYmplY3Qua2V5cyhmb3JtVmFsdWVzKS5zb21lKFxuICAgICAgKHgpID0+ICFmb3JtVmFsdWVzW3hdLmhpZGVGaWVsZCAmJiBmb3JtVmFsdWVzW3hdLnZhbGlkXG4gICAgKTtcbiAgICBjb25zdCBpc05leHREaXNhYmxlZCA9IGFjdGl2ZVBhZ2VcbiAgICAgID8gT2JqZWN0LmtleXMoZm9ybVZhbHVlcykuc29tZShcbiAgICAgICAgICAoeCkgPT5cbiAgICAgICAgICAgIGZvcm1WYWx1ZXNbeF0ucGFnZU51bWJlciA9PT0gYWN0aXZlUGFnZSAmJlxuICAgICAgICAgICAgIWZvcm1WYWx1ZXNbeF0uaGlkZUZpZWxkICYmXG4gICAgICAgICAgICBmb3JtVmFsdWVzW3hdLnZhbGlkXG4gICAgICAgIClcbiAgICAgIDogZmFsc2U7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEdGV3JhcHBlclxuICAgICAgICByZWY9eyhlbCkgPT4gKHRoaXMud3JhcHBlclJlZiA9IGVsKX1cbiAgICAgICAgY2xhc3NOYW1lPVwiZm9ybS13cmFwcGVyXCJcbiAgICAgICAgY3NzPXt7IHBvc2l0aW9uOiBcInJlbGF0aXZlXCIgfX1cbiAgICAgICAgaWQ9e2BncmF2aXR5X2Zvcm1fJHt0aGlzLnByb3BzLmZvcm1JRH1gfVxuICAgICAgPlxuICAgICAgICB7Zm9ybURhdGEudGl0bGUgPyBudWxsIDogTG9hZGluZyAmJiA8TG9hZGluZyBpc0xvYWRpbmcgLz59XG5cbiAgICAgICAge3N1Ym1pdEZhaWxlZCAmJiAhc3VibWl0U3VjY2VzcyAmJiAoXG4gICAgICAgICAgPEZvcm1FcnJvclxuICAgICAgICAgICAgU0Zvcm1FcnJvcj17U0Zvcm1FcnJvciB8fCBmYWxzZX1cbiAgICAgICAgICAgIGVycm9yTWVzc2FnZT17XG4gICAgICAgICAgICAgIGVycm9yTWVzc2FnZSB8fCBcIlRoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB5b3VyIHN1Ym1pc3Npb25cIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG5cbiAgICAgICAge3N1Ym1pdFN1Y2Nlc3MgJiYgdGhpcy5zdGF0ZS5jb25maXJtYXRpb25NZXNzYWdlICYmIChcbiAgICAgICAgICA8Rm9ybUNvbmZpcm1hdGlvbiBjb25maXJtYXRpb249e3RoaXMuc3RhdGUuY29uZmlybWF0aW9uTWVzc2FnZX0gLz5cbiAgICAgICAgKX1cblxuICAgICAgICB7IXN1Ym1pdFN1Y2Nlc3MgJiYgZm9ybURhdGEuZmllbGRzID8gKFxuICAgICAgICAgIDxmb3JtXG4gICAgICAgICAgICBvblN1Ym1pdD17KGUpID0+IHRoaXMub25TdWJtaXQoZSl9XG4gICAgICAgICAgICBjbGFzc05hbWU9e2Nzc0NsYXNzfVxuICAgICAgICAgICAgZW5jVHlwZT17aXNNdWx0aXBhcnQgPyBcIm11bHRpcGFydC9mb3JtLWRhdGFcIiA6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIG5vVmFsaWRhdGVcbiAgICAgICAgICA+XG4gICAgICAgICAgICB7KGZvcm1EYXRhLnRpdGxlIHx8IGZvcm1EYXRhLmRlc2NyaXB0aW9uKSAmJiAoXG4gICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAge2Zvcm1EYXRhLnRpdGxlICYmIHRpdGxlID8gKFxuICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzTmFtZT1cImZvcm0tdGl0bGVcIj57Zm9ybURhdGEudGl0bGV9PC9oMz5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgICB7Zm9ybURhdGEuZGVzY3JpcHRpb24gPyAoXG4gICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJmb3JtLWRlc2NyaXB0aW9uXCI+e2Zvcm1EYXRhLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICApIDogbnVsbH1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvcm0td3JhcHBlclwiPlxuICAgICAgICAgICAgICA8UmVuZGVyRmllbGRzXG4gICAgICAgICAgICAgICAgc3R5bGVkQ29tcG9uZW50cz17c3R5bGVkQ29tcG9uZW50c31cbiAgICAgICAgICAgICAgICBjdXN0b21Db21wb25lbnRzPXtjdXN0b21Db21wb25lbnRzfVxuICAgICAgICAgICAgICAgIGZpZWxkcz17Zm9ybURhdGEuZmllbGRzfVxuICAgICAgICAgICAgICAgIGZvcm1WYWx1ZXM9e2Zvcm1WYWx1ZXN9XG4gICAgICAgICAgICAgICAgc3VibWl0RmFpbGVkPXtzdWJtaXRGYWlsZWR9XG4gICAgICAgICAgICAgICAgc3VibWl0U3VjY2Vzcz17c3VibWl0U3VjY2Vzc31cbiAgICAgICAgICAgICAgICB1cGRhdGVGb3JtPXt0aGlzLnVwZGF0ZUZvcm1IYW5kbGVyfVxuICAgICAgICAgICAgICAgIHRvdWNoZWQ9e3RvdWNoZWR9XG4gICAgICAgICAgICAgICAgc2V0VG91Y2hlZD17dGhpcy5zZXRUb3VjaGVkfVxuICAgICAgICAgICAgICAgIHBhZ2luYXRpb249e2Zvcm1EYXRhLnBhZ2luYXRpb259XG4gICAgICAgICAgICAgICAgYWN0aXZlUGFnZT17YWN0aXZlUGFnZX1cbiAgICAgICAgICAgICAgICBwcmV2U3RlcD17dGhpcy5wcmV2U3RlcH1cbiAgICAgICAgICAgICAgICBuZXh0U3RlcD17dGhpcy5uZXh0U3RlcH1cbiAgICAgICAgICAgICAgICBpc05leHREaXNhYmxlZD17aXNOZXh0RGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgY2hlY2tDb25kaXRpb25hbExvZ2ljPXt0aGlzLmNoZWNrQ29uZGl0aW9uYWxMb2dpY31cbiAgICAgICAgICAgICAgICBzYXZlU3RhdGVUb0h0bWxGaWVsZD17c2F2ZVN0YXRlVG9IdG1sRmllbGR9XG4gICAgICAgICAgICAgICAgZW5hYmxlSG9uZXlwb3Q9e2Zvcm1EYXRhLmVuYWJsZUhvbmV5cG90fVxuICAgICAgICAgICAgICAgIGVycm9ycz17dGhpcy5zdGF0ZS5lcnJvck1lc3NhZ2VzfVxuICAgICAgICAgICAgICAgIHVuc2V0RXJyb3I9e3RoaXMudW5zZXRFcnJvcn1cbiAgICAgICAgICAgICAgICBkcm9wem9uZVRleHQ9e2Ryb3B6b25lVGV4dH1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgeyghZm9ybURhdGEucGFnaW5hdGlvbiB8fFxuICAgICAgICAgICAgICAgIChmb3JtRGF0YS5wYWdpbmF0aW9uICYmXG4gICAgICAgICAgICAgICAgICBmb3JtRGF0YS5wYWdpbmF0aW9uLnBhZ2VzLmxlbmd0aCA9PT0gYWN0aXZlUGFnZSkpICYmIChcbiAgICAgICAgICAgICAgICA8U3VibWl0XG4gICAgICAgICAgICAgICAgICBCdXR0b249e0J1dHRvbn1cbiAgICAgICAgICAgICAgICAgIExvYWRpbmc9e0xvYWRpbmd9XG4gICAgICAgICAgICAgICAgICBmb3JtRGF0YT17Zm9ybURhdGF9XG4gICAgICAgICAgICAgICAgICBzdWJtaXRJY29uPXtzdWJtaXRJY29ufVxuICAgICAgICAgICAgICAgICAgaXNEaXNhYmxlZD17aXNEaXNhYmxlZH1cbiAgICAgICAgICAgICAgICAgIHN1Ym1pdHRpbmc9e3N1Ym1pdHRpbmd9XG4gICAgICAgICAgICAgICAgICBwcmV2U3RlcD17dGhpcy5wcmV2U3RlcH1cbiAgICAgICAgICAgICAgICAgIGxvYWRpbmdTcGlubmVyPXtsb2FkaW5nU3Bpbm5lcn1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9mb3JtPlxuICAgICAgICApIDogKFxuICAgICAgICAgIFwiXCJcbiAgICAgICAgKX1cbiAgICAgIDwvR0ZXcmFwcGVyPlxuICAgICk7XG4gIH1cbn1cblxuR3Jhdml0eUZvcm0uZGVmYXVsdFByb3BzID0ge1xuICB0aXRsZTogdHJ1ZSxcbiAgc3VibWl0SWNvbjogZmFsc2UsXG4gIHNhdmVTdGF0ZVRvSHRtbEZpZWxkOiBmYWxzZSxcbiAganVtcFRvQ29uZmlybWF0aW9uOiB0cnVlLFxufTtcblxuZXhwb3J0IHsgdmFsaWRhdGVGaWVsZCwgRm9ybUNvbmZpcm1hdGlvbiwgRm9ybUVycm9yLCBSZW5kZXJGaWVsZHMsIFN1Ym1pdCB9O1xuXG5leHBvcnQgZGVmYXVsdCBHcmF2aXR5Rm9ybTtcbiJdfQ==