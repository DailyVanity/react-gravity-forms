"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_react=_interopRequireWildcard(require("react")),FormFields=_interopRequireWildcard(require("../Fields")),frac2dec=function(a){var b=a.split("-");if(1===b.length&&(b=a.split(" ")),1<b.length&&-1!==a.indexOf("/")){var c=parseInt(b[0]),d=b[1].split("/"),e=parseInt(d[0])/parseInt(d[1]);return c+e}if(-1!==a.indexOf("/")){var f=a.split("/"),g=parseInt(f[0])/parseInt(f[1]);return g}return parseInt(a)},formatComponentName=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},formatWidthFromCss=function(a){if(!a)return{};var b=a.indexOf("["),c=a.indexOf("]");if(-1===b||-1===c)return{};var d=a.substring(b+1,c).split(",").map(function(a){return frac2dec(a.replace(/\s/g,""))}),e="".concat(a.replace(a.substring(b,c+1),"")," custom-width");return{width:d,cleanedCssClass:e}},RenderField=function(a){var b=a.field,c=a.formValues,d=a.submitFailed,e=a.submitSuccess,f=a.setTouched,g=a.setErrorMessages,h=a.touched,i=a.updateForm,j=a.pages,k=a.prevStep,l=a.nextStep,m=a.isNextDisabled,n=a.saveStateToHtmlField,o=a.styledComponents,p=a.customComponents,q=a.error,r=a.unsetError,s=a.dropzoneText,t=a.language,u=a.apiKeys,v=FormFields[formatComponentName(b.type)];p&&(p[b.id]||p[b.cssClass])&&(v=FormFields[formatComponentName("custom")]);var w=formatWidthFromCss(b.cssClass),x=w.cleanedCssClass,y=w.width;y&&(b.cssClass=x,b.width=y);var z=c[b.id]?c[b.id].value:b.defaultValue,A=(0,_react.useState)("".concat(b.cssClass).concat("select"===b.type?z.value&&""!==z.value?" filled":"":z&&""!==z?" filled":"")),B=(0,_slicedToArray2["default"])(A,2),C=B[0],D=B[1];return _react["default"].createElement(v,{key:"el-".concat(b.formId,"-").concat(b.id),field:b,value:z,updateForm:function updateForm(a,b,c){return i(a,b,c)},validationMessage:!!c[b.id]&&c[b.id].valid,formValues:c,submitFailed:d,submitSuccess:e,touched:h[b.id],setTouched:f,setErrorMessages:g,unsetError:r,error:q,pages:j,prevStep:k,nextStep:l,isNextDisabled:m,hideField:!!c[b.id]&&c[b.id].hideField,saveStateToHtmlField:!("html"!==b.type||-1===b.cssClass.indexOf("set-state"))&&{formValues:c,saveStateToHtmlField:n},styledComponents:o,cssClass:C,setFocusClass:function setFocusClass(a){a?-1===C.indexOf(" filled")&&D("".concat(C," filled")):D(C.replace(" filled",""))},component:p&&(p[b.id]||p[b.cssClass]),dropzoneText:s,language:t,apiKeys:u})},_default=RenderField;exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Gb3JtRWxlbWVudHMvUmVuZGVyRmllbGQuanN4Il0sIm5hbWVzIjpbImZyYWMyZGVjIiwiZnJhY3Rpb24iLCJmcmFjdGlvblBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJpbmRleE9mIiwiaW50ZWdlciIsInBhcnNlSW50IiwiZGVjaW1hbFBhcnRzIiwiZGVjaW1hbCIsImZvcm1hdENvbXBvbmVudE5hbWUiLCJzdHJpbmciLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZm9ybWF0V2lkdGhGcm9tQ3NzIiwiY3NzQ2xhc3MiLCJ3aWR0aFN0YXJ0cyIsIndpZHRoRW5kcyIsIndpZHRoIiwic3Vic3RyaW5nIiwibWFwIiwiaXRlbSIsInJlcGxhY2UiLCJjbGVhbmVkQ3NzQ2xhc3MiLCJSZW5kZXJGaWVsZCIsImZpZWxkIiwiZm9ybVZhbHVlcyIsInN1Ym1pdEZhaWxlZCIsInN1Ym1pdFN1Y2Nlc3MiLCJzZXRUb3VjaGVkIiwic2V0RXJyb3JNZXNzYWdlcyIsInRvdWNoZWQiLCJ1cGRhdGVGb3JtIiwicGFnZXMiLCJwcmV2U3RlcCIsIm5leHRTdGVwIiwiaXNOZXh0RGlzYWJsZWQiLCJzYXZlU3RhdGVUb0h0bWxGaWVsZCIsInN0eWxlZENvbXBvbmVudHMiLCJjdXN0b21Db21wb25lbnRzIiwiZXJyb3IiLCJ1bnNldEVycm9yIiwiZHJvcHpvbmVUZXh0IiwibGFuZ3VhZ2UiLCJhcGlLZXlzIiwiRm9ybUNvbXBvbmVudCIsIkZvcm1GaWVsZHMiLCJ0eXBlIiwiaWQiLCJ2YWx1ZSIsImRlZmF1bHRWYWx1ZSIsImZpZWxkQ2xhc3NOYW1lIiwic2V0RmllbGRDbGFzc05hbWUiLCJmb3JtSWQiLCJldmVudCIsImlucHV0SUQiLCJ2YWxpZCIsImhpZGVGaWVsZCIsInNldEZvY3VzQ2xhc3MiLCJhY3Rpb24iXSwibWFwcGluZ3MiOiJ3Y0FHTUEsUUFBUSxDQUFHLFNBQUNDLENBQUQsQ0FBYyxDQUc3QixHQUFJQyxDQUFBQSxDQUFhLENBQUdE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Q0FBQ3NCLElBQU4sRUFBaUUsQ0FBQyxDQUF6QyxHQUFBdEIsQ0FBSyxDQUFDVixRQUFOLENBQWVYLE9BQWYsQ0FBdUIsV0FBdkIsQ0FEUCxHQUVkLENBQUVzQixVQUFVLENBQVZBLENBQUYsQ0FBY1csb0JBQW9CLENBQXBCQSxDQUFkLENBdkJSLENBMEJFLGdCQUFnQixDQUFFQyxDQTFCcEIsQ0EyQkUsUUFBUSxDQUFFYSxDQTNCWixDQTRCRSxhQUFhLENBdkNLLFFBQWhCTyxDQUFBQSxhQUFnQixDQUFDQyxDQUFELENBQVksQ0FDNUJBLENBRDRCLENBRVksQ0FBQyxDQUF2QyxHQUFBUixDQUFjLENBQUMvQyxPQUFmLENBQXVCLFNBQXZCLENBRjBCLEVBRzVCZ0QsQ0FBaUIsV0FBSUQsQ0FBSixZQUhXLENBTTlCQyxDQUFpQixDQUFDRCxDQUFjLENBQUM3QixPQUFmLENBQXVCLFNBQXZCLENBQWtDLEVBQWxDLENBQUQsQ0FFcEIsQ0FHQyxDQTZCRSxTQUFTLENBQ1BpQixDQUFnQixHQUNmQSxDQUFnQixDQUFDZCxDQUFLLENBQUN1QixFQUFQLENBQWhCLEVBQThCVCxDQUFnQixDQUFDZCxDQUFLLENBQUNWLFFBQVAsQ0FEL0IsQ0E5QnBCLENBaUNFLFlBQVksQ0FBRTJCLENBakNoQixDQWtDRSxRQUFRLENBQUVDLENBbENaLENBbUNFLE9BQU8sQ0FBRUMsQ0FuQ1gsRUFzQ0gsQyxVQUVjcEIsVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgRm9ybUZpZWxkcyBmcm9tIFwiLi4vRmllbGRzXCI7XG5cbmNvbnN0IGZyYWMyZGVjID0gKGZyYWN0aW9uKSA9PiB7XG4gIC8qIGFzc3VtZXMgZnJhY3Rpb24gaXMgaW4gdGhlIGZvcm0gIDEtMS8yIG9yIDEgMS8yICovXG4gIC8qIGRvZXNuJ3Qgd29yayBvbiBuZWdhdGl2ZSBudW1iZXJzICovXG4gIGxldCBmcmFjdGlvblBhcnRzID0gZnJhY3Rpb24uc3BsaXQoXCItXCIpO1xuICBpZiAoZnJhY3Rpb25QYXJ0cy5sZW5ndGggPT09IDEpIHtcbiAgICAvKiB0cnkgc3BhY2UgYXMgZGl2aWRlciAqL1xuICAgIGZyYWN0aW9uUGFydHMgPSBmcmFjdGlvbi5zcGxpdChcIiBcIik7XG4gIH1cblxuICBpZiAoZnJhY3Rpb25QYXJ0cy5sZW5ndGggPiAxICYmIGZyYWN0aW9uLmluZGV4T2YoXCIvXCIpICE9PSAtMSkge1xuICAgIGNvbnN0IGludGVnZXIgPSBwYXJzZUludChmcmFjdGlvblBhcnRzWzBdKTtcbiAgICBjb25zdCBkZWNpbWFsUGFydHMgPSBmcmFjdGlvblBhcnRzWzFdLnNwbGl0KFwiL1wiKTtcbiAgICBjb25zdCBkZWNpbWFsID0gcGFyc2VJbnQoZGVjaW1hbFBhcnRzWzBdKSAvIHBhcnNlSW50KGRlY2ltYWxQYXJ0c1sxXSk7XG5cbiAgICByZXR1cm4gaW50ZWdlciArIGRlY2ltYWw7XG4gIH1cbiAgaWYgKGZyYWN0aW9uLmluZGV4T2YoXCIvXCIpICE9PSAtMSkge1xuICAgIGNvbnN0IGRlY2ltYWxQYXJ0cyA9IGZyYWN0aW9uLnNwbGl0KFwiL1wiKTtcbiAgICBjb25zdCBkZWNpbWFsID0gcGFyc2VJbnQoZGVjaW1hbFBhcnRzWzBdKSAvIHBhcnNlSW50KGRlY2ltYWxQYXJ0c1sxXSk7XG4gICAgcmV0dXJuIGRlY2ltYWw7XG4gIH1cbiAgcmV0dXJuIHBhcnNlSW50KGZyYWN0aW9uKTtcbn07XG5cbmNvbnN0IGZvcm1hdENvbXBvbmVudE5hbWUgPSAoc3RyaW5nKSA9PlxuICBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG5jb25zdCBmb3JtYXRXaWR0aEZyb21Dc3MgPSAoY3NzQ2xhc3MpID0+IHtcbiAgaWYgKCFjc3NDbGFzcykgcmV0dXJuIHt9O1xuICBjb25zdCB3aWR0aFN0YXJ0cyA9IGNzc0NsYXNzLmluZGV4T2YoXCJbXCIpO1xuICBjb25zdCB3aWR0aEVuZHMgPSBjc3NDbGFzcy5pbmRleE9mKFwiXVwiKTtcblxuICBpZiAod2lkdGhTdGFydHMgPT09IC0xIHx8IHdpZHRoRW5kcyA9PT0gLTEpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBjb25zdCB3aWR0aCA9IGNzc0NsYXNzXG4gICAgLnN1YnN0cmluZyh3aWR0aFN0YXJ0cyArIDEsIHdpZHRoRW5kcylcbiAgICAuc3BsaXQoXCIsXCIpXG4gICAgLm1hcCgoaXRlbSkgPT4gZnJhYzJkZWMoaXRlbS5yZXBsYWNlKC9cXHMvZywgXCJcIikpKTtcblxuICBjb25zdCBjbGVhbmVkQ3NzQ2xhc3MgPSBgJHtjc3NDbGFzcy5yZXBsYWNlKFxuICAgIGNzc0NsYXNzLnN1YnN0cmluZyh3aWR0aFN0YXJ0cywgd2lkdGhFbmRzICsgMSksXG4gICAgXCJcIlxuICApfSBjdXN0b20td2lkdGhgO1xuXG4gIHJldHVybiB7XG4gICAgd2lkdGgsXG4gICAgY2xlYW5lZENzc0NsYXNzLFxuICB9O1xufTtcblxuY29uc3QgUmVuZGVyRmllbGQgPSAoe1xuICBmaWVsZCxcbiAgZm9ybVZhbHVlcyxcbiAgc3VibWl0RmFpbGVkLFxuICBzdWJtaXRTdWNjZXNzLFxuICBzZXRUb3VjaGVkLFxuICBzZXRFcnJvck1lc3NhZ2VzLFxuICB0b3VjaGVkLFxuICB1cGRhdGVGb3JtLFxuICBwYWdlcyxcbiAgcHJldlN0ZXAsXG4gIG5leHRTdGVwLFxuICBpc05leHREaXNhYmxlZCxcbiAgc2F2ZVN0YXRlVG9IdG1sRmllbGQsXG4gIHN0eWxlZENvbXBvbmVudHMsXG4gIGN1c3RvbUNvbXBvbmVudHMsXG4gIGVycm9yLFxuICB1bnNldEVycm9yLFxuICBkcm9wem9uZVRleHQsXG4gIGxhbmd1YWdlLFxuICBhcGlLZXlzLFxufSkgPT4ge1xuICBsZXQgRm9ybUNvbXBvbmVudCA9IEZvcm1GaWVsZHNbZm9ybWF0Q29tcG9uZW50TmFtZShmaWVsZC50eXBlKV07XG5cbiAgaWYgKFxuICAgIGN1c3RvbUNvbXBvbmVudHMgJiZcbiAgICAoY3VzdG9tQ29tcG9uZW50c1tmaWVsZC5pZF0gfHwgY3VzdG9tQ29tcG9uZW50c1tmaWVsZC5jc3NDbGFzc10pXG4gICkge1xuICAgIEZvcm1Db21wb25lbnQgPSBGb3JtRmllbGRzW2Zvcm1hdENvbXBvbmVudE5hbWUoXCJjdXN0b21cIildO1xuICB9XG5cbiAgY29uc3QgeyBjbGVhbmVkQ3NzQ2xhc3MsIHdpZHRoIH0gPSBmb3JtYXRXaWR0aEZyb21Dc3MoZmllbGQuY3NzQ2xhc3MpO1xuICBpZiAod2lkdGgpIHtcbiAgICBmaWVsZC5jc3NDbGFzcyA9IGNsZWFuZWRDc3NDbGFzcztcbiAgICBmaWVsZC53aWR0aCA9IHdpZHRoO1xuICB9XG4gIGNvbnN0IHZhbHVlID0gZm9ybVZhbHVlc1tmaWVsZC5pZF1cbiAgICA/IGZvcm1WYWx1ZXNbZmllbGQuaWRdLnZhbHVlXG4gICAgOiBmaWVsZC5kZWZhdWx0VmFsdWU7XG4gIGNvbnN0IFtmaWVsZENsYXNzTmFtZSwgc2V0RmllbGRDbGFzc05hbWVdID0gdXNlU3RhdGUoXG4gICAgYCR7ZmllbGQuY3NzQ2xhc3N9JHtcbiAgICAgIGZpZWxkLnR5cGUgPT09IFwic2VsZWN0XCJcbiAgICAgICAgPyB2YWx1ZS52YWx1ZSAmJiB2YWx1ZS52YWx1ZSAhPT0gXCJcIlxuICAgICAgICAgID8gXCIgZmlsbGVkXCJcbiAgICAgICAgICA6IFwiXCJcbiAgICAgICAgOiB2YWx1ZSAmJiB2YWx1ZSAhPT0gXCJcIlxuICAgICAgICA/IFwiIGZpbGxlZFwiXG4gICAgICAgIDogXCJcIlxuICAgIH1gXG4gICk7XG5cbiAgY29uc3Qgc2V0Rm9jdXNDbGFzcyA9IChhY3Rpb24pID0+IHtcbiAgICBpZiAoYWN0aW9uKSB7XG4gICAgICBpZiAoZmllbGRDbGFzc05hbWUuaW5kZXhPZihcIiBmaWxsZWRcIikgPT09IC0xKSB7XG4gICAgICAgIHNldEZpZWxkQ2xhc3NOYW1lKGAke2ZpZWxkQ2xhc3NOYW1lfSBmaWxsZWRgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RmllbGRDbGFzc05hbWUoZmllbGRDbGFzc05hbWUucmVwbGFjZShcIiBmaWxsZWRcIiwgXCJcIikpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxGb3JtQ29tcG9uZW50XG4gICAgICBrZXk9e2BlbC0ke2ZpZWxkLmZvcm1JZH0tJHtmaWVsZC5pZH1gfVxuICAgICAgZmllbGQ9e2ZpZWxkfVxuICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgdXBkYXRlRm9ybT17KGV2ZW50LCBmaWVsZCwgaW5wdXRJRCkgPT4gdXBkYXRlRm9ybShldmVudCwgZmllbGQsIGlucHV0SUQpfVxuICAgICAgdmFsaWRhdGlvbk1lc3NhZ2U9e1xuICAgICAgICBmb3JtVmFsdWVzW2ZpZWxkLmlkXSA/IGZvcm1WYWx1ZXNbZmllbGQuaWRdLnZhbGlkIDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGZvcm1WYWx1ZXM9e2Zvcm1WYWx1ZXN9XG4gICAgICBzdWJtaXRGYWlsZWQ9e3N1Ym1pdEZhaWxlZH1cbiAgICAgIHN1Ym1pdFN1Y2Nlc3M9e3N1Ym1pdFN1Y2Nlc3N9XG4gICAgICB0b3VjaGVkPXt0b3VjaGVkW2ZpZWxkLmlkXX1cbiAgICAgIHNldFRvdWNoZWQ9e3NldFRvdWNoZWR9XG4gICAgICBzZXRFcnJvck1lc3NhZ2VzPXtzZXRFcnJvck1lc3NhZ2VzfVxuICAgICAgdW5zZXRFcnJvcj17dW5zZXRFcnJvcn1cbiAgICAgIGVycm9yPXtlcnJvcn1cbiAgICAgIHBhZ2VzPXtwYWdlc31cbiAgICAgIHByZXZTdGVwPXtwcmV2U3RlcH1cbiAgICAgIG5leHRTdGVwPXtuZXh0U3RlcH1cbiAgICAgIGlzTmV4dERpc2FibGVkPXtpc05leHREaXNhYmxlZH1cbiAgICAgIGhpZGVGaWVsZD17Zm9ybVZhbHVlc1tmaWVsZC5pZF0gPyBmb3JtVmFsdWVzW2ZpZWxkLmlkXS5oaWRlRmllbGQgOiBmYWxzZX1cbiAgICAgIHNhdmVTdGF0ZVRvSHRtbEZpZWxkPXtcbiAgICAgICAgZmllbGQudHlwZSA9PT0gXCJodG1sXCIgJiYgZmllbGQuY3NzQ2xhc3MuaW5kZXhPZihcInNldC1zdGF0ZVwiKSAhPT0gLTFcbiAgICAgICAgICA/IHsgZm9ybVZhbHVlcywgc2F2ZVN0YXRlVG9IdG1sRmllbGQgfVxuICAgICAgICAgIDogZmFsc2VcbiAgICAgIH1cbiAgICAgIHN0eWxlZENvbXBvbmVudHM9e3N0eWxlZENvbXBvbmVudHN9XG4gICAgICBjc3NDbGFzcz17ZmllbGRDbGFzc05hbWV9XG4gICAgICBzZXRGb2N1c0NsYXNzPXtzZXRGb2N1c0NsYXNzfVxuICAgICAgY29tcG9uZW50PXtcbiAgICAgICAgY3VzdG9tQ29tcG9uZW50cyAmJlxuICAgICAgICAoY3VzdG9tQ29tcG9uZW50c1tmaWVsZC5pZF0gfHwgY3VzdG9tQ29tcG9uZW50c1tmaWVsZC5jc3NDbGFzc10pXG4gICAgICB9XG4gICAgICBkcm9wem9uZVRleHQ9e2Ryb3B6b25lVGV4dH1cbiAgICAgIGxhbmd1YWdlPXtsYW5ndWFnZX1cbiAgICAgIGFwaUtleXM9e2FwaUtleXN9XG4gICAgLz5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlckZpZWxkO1xuIl19