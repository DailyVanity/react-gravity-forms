"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_react=_interopRequireWildcard(require("react")),FormFields=_interopRequireWildcard(require("../Fields")),frac2dec=function(a){var b=a.split("-");if(1===b.length&&(b=a.split(" ")),1<b.length&&-1!==a.indexOf("/")){var c=parseInt(b[0]),d=b[1].split("/"),e=parseInt(d[0])/parseInt(d[1]);return c+e}if(-1!==a.indexOf("/")){var f=a.split("/"),g=parseInt(f[0])/parseInt(f[1]);return g}return parseInt(a)},formatComponentName=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},formatWidthFromCss=function(a){if(!a)return{};var b=a.indexOf("["),c=a.indexOf("]");if(-1===b||-1===c)return{};var d=a.substring(b+1,c).split(",").map(function(a){return frac2dec(a.replace(/\s/g,""))}),e="".concat(a.replace(a.substring(b,c+1),"")," custom-width");return{width:d,cleanedCssClass:e}},RenderField=function(a){var b=a.field,c=a.formValues,d=a.submitFailed,e=a.submitSuccess,f=a.setTouched,g=a.setErrorMessages,h=a.touched,i=a.updateForm,j=a.pages,k=a.prevStep,l=a.nextStep,m=a.isNextDisabled,n=a.saveStateToHtmlField,o=a.styledComponents,p=a.customComponents,q=a.error,r=a.unsetError,s=a.dropzoneText,t=a.language,u=a.apiKeys,v=(0,_objectWithoutProperties2["default"])(a,["field","formValues","submitFailed","submitSuccess","setTouched","setErrorMessages","touched","updateForm","pages","prevStep","nextStep","isNextDisabled","saveStateToHtmlField","styledComponents","customComponents","error","unsetError","dropzoneText","language","apiKeys"]),w=FormFields[formatComponentName(b.type)];p&&(p[b.id]||p[b.cssClass]||p[b.inputName])&&(w=FormFields[formatComponentName("custom")]);var x=formatWidthFromCss(b.cssClass),y=x.cleanedCssClass,z=x.width;z&&(b.cssClass=y,b.width=z);var A=c[b.id]?c[b.id].value:b.defaultValue,B=(0,_react.useState)("".concat(b.cssClass).concat("select"===b.type?A.value&&""!==A.value?" filled":"":A&&""!==A?" filled":"")),C=(0,_slicedToArray2["default"])(B,2),D=C[0],E=C[1];return _react["default"].createElement(w,(0,_extends2["default"])({key:"el-".concat(b.formId,"-").concat(b.id),field:b,value:A,updateForm:function updateForm(a,b,c){return i(a,b,c)},validationMessage:!!c[b.id]&&c[b.id].valid,formValues:c,submitFailed:d,submitSuccess:e,touched:h[b.id],setTouched:f,setErrorMessages:g,unsetError:r,error:q,pages:j,prevStep:k,nextStep:l,isNextDisabled:m,hideField:!!c[b.id]&&c[b.id].hideField,saveStateToHtmlField:!("html"!==b.type||-1===b.cssClass.indexOf("set-state"))&&{formValues:c,saveStateToHtmlField:n},styledComponents:o,cssClass:D,setFocusClass:function setFocusClass(a){a?-1===D.indexOf(" filled")&&E("".concat(D," filled")):E(D.replace(" filled",""))},component:p&&(p[b.id]||p[b.cssClass]),dropzoneText:s,language:t,apiKeys:u},v))},_default=RenderField;exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9Gb3JtRWxlbWVudHMvUmVuZGVyRmllbGQuanN4Il0sIm5hbWVzIjpbImZyYWMyZGVjIiwiZnJhY3Rpb24iLCJmcmFjdGlvblBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJpbmRleE9mIiwiaW50ZWdlciIsInBhcnNlSW50IiwiZGVjaW1hbFBhcnRzIiwiZGVjaW1hbCIsImZvcm1hdENvbXBvbmVudE5hbWUiLCJzdHJpbmciLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZm9ybWF0V2lkdGhGcm9tQ3NzIiwiY3NzQ2xhc3MiLCJ3aWR0aFN0YXJ0cyIsIndpZHRoRW5kcyIsIndpZHRoIiwic3Vic3RyaW5nIiwibWFwIiwiaXRlbSIsInJlcGxhY2UiLCJjbGVhbmVkQ3NzQ2xhc3MiLCJSZW5kZXJGaWVsZCIsImZpZWxkIiwiZm9ybVZhbHVlcyIsInN1Ym1pdEZhaWxlZCIsInN1Ym1pdFN1Y2Nlc3MiLCJzZXRUb3VjaGVkIiwic2V0RXJyb3JNZXNzYWdlcyIsInRvdWNoZWQiLCJ1cGRhdGVGb3JtIiwicGFnZXMiLCJwcmV2U3RlcCIsIm5leHRTdGVwIiwiaXNOZXh0RGlzYWJsZWQiLCJzYXZlU3RhdGVUb0h0bWxGaWVsZCIsInN0eWxlZENvbXBvbmVudHMiLCJjdXN0b21Db21wb25lbnRzIiwiZXJyb3IiLCJ1bnNldEVycm9yIiwiZHJvcHpvbmVUZXh0IiwibGFuZ3VhZ2UiLCJhcGlLZXlzIiwicHJvcHMiLCJGb3JtQ29tcG9uZW50IiwiRm9ybUZpZWxkcyIsInR5cGUiLCJpZCIsImlucHV0TmFtZSIsInZhbHVlIiwiZGVmYXVsdFZhbHVlIiwiZmllbGRDbGFzc05hbWUiLCJzZXRGaWVsZENsYXNzTmFtZSIsImZvcm1JZCIsImV2ZW50IiwiaW5wdXRJRCIsInZhbGlkIiwiaGlkZUZpZWxkIiwic2V0Rm9jdXNDbGFzcyIsImFjdGlvbiJdLCJtYXBwaW5ncyI6ImdvQkFHTUEsUUFBUSxDQUFHLFNBQUFDLENBQVEsQ0FBSSxDQUczQixH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Q0FBQ0QsQ0FBSyxDQUFDd0IsRUFBUCxDQUFWLENBQXFCVSxTQXBCekQsQ0FxQkUsb0JBQW9CLEdBQ0gsTUFBZixHQUFBbEMsQ0FBSyxDQUFDdUIsSUFBTixFQUFpRSxDQUFDLENBQXpDLEdBQUF2QixDQUFLLENBQUNWLFFBQU4sQ0FBZVgsT0FBZixDQUF1QixXQUF2QixDQURQLEdBRWQsQ0FBRXNCLFVBQVUsQ0FBVkEsQ0FBRixDQUFjVyxvQkFBb0IsQ0FBcEJBLENBQWQsQ0F2QlIsQ0EwQkUsZ0JBQWdCLENBQUVDLENBMUJwQixDQTJCRSxRQUFRLENBQUVlLENBM0JaLENBNEJFLGFBQWEsQ0F2Q0ssUUFBaEJPLENBQUFBLGFBQWdCLENBQUFDLENBQU0sQ0FBSSxDQUMxQkEsQ0FEMEIsQ0FFYyxDQUFDLENBQXZDLEdBQUFSLENBQWMsQ0FBQ2pELE9BQWYsQ0FBdUIsU0FBdkIsQ0FGd0IsRUFHMUJrRCxDQUFpQixXQUFJRCxDQUFKLFlBSFMsQ0FNNUJDLENBQWlCLENBQUNELENBQWMsQ0FBQy9CLE9BQWYsQ0FBdUIsU0FBdkIsQ0FBa0MsRUFBbEMsQ0FBRCxDQUVwQixDQUdDLENBNkJFLFNBQVMsQ0FDUGlCLENBQWdCLEdBQ2ZBLENBQWdCLENBQUNkLENBQUssQ0FBQ3dCLEVBQVAsQ0FBaEIsRUFBOEJWLENBQWdCLENBQUNkLENBQUssQ0FBQ1YsUUFBUCxDQUQvQixDQTlCcEIsQ0FpQ0UsWUFBWSxDQUFFMkIsQ0FqQ2hCLENBa0NFLFFBQVEsQ0FBRUMsQ0FsQ1osQ0FtQ0UsT0FBTyxDQUFFQyxDQW5DWCxFQW9DTUMsQ0FwQ04sRUF1Q0gsQyxVQUVjckIsVyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgRm9ybUZpZWxkcyBmcm9tIFwiLi4vRmllbGRzXCI7XG5cbmNvbnN0IGZyYWMyZGVjID0gZnJhY3Rpb24gPT4ge1xuICAvKiBhc3N1bWVzIGZyYWN0aW9uIGlzIGluIHRoZSBmb3JtICAxLTEvMiBvciAxIDEvMiAqL1xuICAvKiBkb2Vzbid0IHdvcmsgb24gbmVnYXRpdmUgbnVtYmVycyAqL1xuICBsZXQgZnJhY3Rpb25QYXJ0cyA9IGZyYWN0aW9uLnNwbGl0KFwiLVwiKTtcbiAgaWYgKGZyYWN0aW9uUGFydHMubGVuZ3RoID09PSAxKSB7XG4gICAgLyogdHJ5IHNwYWNlIGFzIGRpdmlkZXIgKi9cbiAgICBmcmFjdGlvblBhcnRzID0gZnJhY3Rpb24uc3BsaXQoXCIgXCIpO1xuICB9XG5cbiAgaWYgKGZyYWN0aW9uUGFydHMubGVuZ3RoID4gMSAmJiBmcmFjdGlvbi5pbmRleE9mKFwiL1wiKSAhPT0gLTEpIHtcbiAgICBjb25zdCBpbnRlZ2VyID0gcGFyc2VJbnQoZnJhY3Rpb25QYXJ0c1swXSk7XG4gICAgY29uc3QgZGVjaW1hbFBhcnRzID0gZnJhY3Rpb25QYXJ0c1sxXS5zcGxpdChcIi9cIik7XG4gICAgY29uc3QgZGVjaW1hbCA9IHBhcnNlSW50KGRlY2ltYWxQYXJ0c1swXSkgLyBwYXJzZUludChkZWNpbWFsUGFydHNbMV0pO1xuXG4gICAgcmV0dXJuIGludGVnZXIgKyBkZWNpbWFsO1xuICB9XG4gIGlmIChmcmFjdGlvbi5pbmRleE9mKFwiL1wiKSAhPT0gLTEpIHtcbiAgICBjb25zdCBkZWNpbWFsUGFydHMgPSBmcmFjdGlvbi5zcGxpdChcIi9cIik7XG4gICAgY29uc3QgZGVjaW1hbCA9IHBhcnNlSW50KGRlY2ltYWxQYXJ0c1swXSkgLyBwYXJzZUludChkZWNpbWFsUGFydHNbMV0pO1xuICAgIHJldHVybiBkZWNpbWFsO1xuICB9XG4gIHJldHVybiBwYXJzZUludChmcmFjdGlvbik7XG59O1xuXG5jb25zdCBmb3JtYXRDb21wb25lbnROYW1lID0gc3RyaW5nID0+XG4gIHN0cmluZy5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHN0cmluZy5zbGljZSgxKTtcbmNvbnN0IGZvcm1hdFdpZHRoRnJvbUNzcyA9IGNzc0NsYXNzID0+IHtcbiAgaWYgKCFjc3NDbGFzcykgcmV0dXJuIHt9O1xuICBjb25zdCB3aWR0aFN0YXJ0cyA9IGNzc0NsYXNzLmluZGV4T2YoXCJbXCIpO1xuICBjb25zdCB3aWR0aEVuZHMgPSBjc3NDbGFzcy5pbmRleE9mKFwiXVwiKTtcblxuICBpZiAod2lkdGhTdGFydHMgPT09IC0xIHx8IHdpZHRoRW5kcyA9PT0gLTEpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICBjb25zdCB3aWR0aCA9IGNzc0NsYXNzXG4gICAgLnN1YnN0cmluZyh3aWR0aFN0YXJ0cyArIDEsIHdpZHRoRW5kcylcbiAgICAuc3BsaXQoXCIsXCIpXG4gICAgLm1hcChpdGVtID0+IGZyYWMyZGVjKGl0ZW0ucmVwbGFjZSgvXFxzL2csIFwiXCIpKSk7XG5cbiAgY29uc3QgY2xlYW5lZENzc0NsYXNzID0gYCR7Y3NzQ2xhc3MucmVwbGFjZShcbiAgICBjc3NDbGFzcy5zdWJzdHJpbmcod2lkdGhTdGFydHMsIHdpZHRoRW5kcyArIDEpLFxuICAgIFwiXCJcbiAgKX0gY3VzdG9tLXdpZHRoYDtcblxuICByZXR1cm4ge1xuICAgIHdpZHRoLFxuICAgIGNsZWFuZWRDc3NDbGFzcyxcbiAgfTtcbn07XG5cbmNvbnN0IFJlbmRlckZpZWxkID0gKHtcbiAgZmllbGQsXG4gIGZvcm1WYWx1ZXMsXG4gIHN1Ym1pdEZhaWxlZCxcbiAgc3VibWl0U3VjY2VzcyxcbiAgc2V0VG91Y2hlZCxcbiAgc2V0RXJyb3JNZXNzYWdlcyxcbiAgdG91Y2hlZCxcbiAgdXBkYXRlRm9ybSxcbiAgcGFnZXMsXG4gIHByZXZTdGVwLFxuICBuZXh0U3RlcCxcbiAgaXNOZXh0RGlzYWJsZWQsXG4gIHNhdmVTdGF0ZVRvSHRtbEZpZWxkLFxuICBzdHlsZWRDb21wb25lbnRzLFxuICBjdXN0b21Db21wb25lbnRzLFxuICBlcnJvcixcbiAgdW5zZXRFcnJvcixcbiAgZHJvcHpvbmVUZXh0LFxuICBsYW5ndWFnZSxcbiAgYXBpS2V5cyxcbiAgLi4ucHJvcHNcbn0pID0+IHtcbiAgbGV0IEZvcm1Db21wb25lbnQgPSBGb3JtRmllbGRzW2Zvcm1hdENvbXBvbmVudE5hbWUoZmllbGQudHlwZSldO1xuXG4gIGlmIChcbiAgICBjdXN0b21Db21wb25lbnRzICYmXG4gICAgKGN1c3RvbUNvbXBvbmVudHNbZmllbGQuaWRdIHx8XG4gICAgICBjdXN0b21Db21wb25lbnRzW2ZpZWxkLmNzc0NsYXNzXSB8fFxuICAgICAgY3VzdG9tQ29tcG9uZW50c1tmaWVsZC5pbnB1dE5hbWVdKVxuICApIHtcbiAgICBGb3JtQ29tcG9uZW50ID0gRm9ybUZpZWxkc1tmb3JtYXRDb21wb25lbnROYW1lKFwiY3VzdG9tXCIpXTtcbiAgfVxuXG4gIGNvbnN0IHsgY2xlYW5lZENzc0NsYXNzLCB3aWR0aCB9ID0gZm9ybWF0V2lkdGhGcm9tQ3NzKGZpZWxkLmNzc0NsYXNzKTtcbiAgaWYgKHdpZHRoKSB7XG4gICAgZmllbGQuY3NzQ2xhc3MgPSBjbGVhbmVkQ3NzQ2xhc3M7XG4gICAgZmllbGQud2lkdGggPSB3aWR0aDtcbiAgfVxuICBjb25zdCB2YWx1ZSA9IGZvcm1WYWx1ZXNbZmllbGQuaWRdXG4gICAgPyBmb3JtVmFsdWVzW2ZpZWxkLmlkXS52YWx1ZVxuICAgIDogZmllbGQuZGVmYXVsdFZhbHVlO1xuICBjb25zdCBbZmllbGRDbGFzc05hbWUsIHNldEZpZWxkQ2xhc3NOYW1lXSA9IHVzZVN0YXRlKFxuICAgIGAke2ZpZWxkLmNzc0NsYXNzfSR7XG4gICAgICBmaWVsZC50eXBlID09PSBcInNlbGVjdFwiXG4gICAgICAgID8gdmFsdWUudmFsdWUgJiYgdmFsdWUudmFsdWUgIT09IFwiXCJcbiAgICAgICAgICA/IFwiIGZpbGxlZFwiXG4gICAgICAgICAgOiBcIlwiXG4gICAgICAgIDogdmFsdWUgJiYgdmFsdWUgIT09IFwiXCJcbiAgICAgICAgPyBcIiBmaWxsZWRcIlxuICAgICAgICA6IFwiXCJcbiAgICB9YFxuICApO1xuXG4gIGNvbnN0IHNldEZvY3VzQ2xhc3MgPSBhY3Rpb24gPT4ge1xuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIGlmIChmaWVsZENsYXNzTmFtZS5pbmRleE9mKFwiIGZpbGxlZFwiKSA9PT0gLTEpIHtcbiAgICAgICAgc2V0RmllbGRDbGFzc05hbWUoYCR7ZmllbGRDbGFzc05hbWV9IGZpbGxlZGApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzZXRGaWVsZENsYXNzTmFtZShmaWVsZENsYXNzTmFtZS5yZXBsYWNlKFwiIGZpbGxlZFwiLCBcIlwiKSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPEZvcm1Db21wb25lbnRcbiAgICAgIGtleT17YGVsLSR7ZmllbGQuZm9ybUlkfS0ke2ZpZWxkLmlkfWB9XG4gICAgICBmaWVsZD17ZmllbGR9XG4gICAgICB2YWx1ZT17dmFsdWV9XG4gICAgICB1cGRhdGVGb3JtPXsoZXZlbnQsIGZpZWxkLCBpbnB1dElEKSA9PiB1cGRhdGVGb3JtKGV2ZW50LCBmaWVsZCwgaW5wdXRJRCl9XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZT17XG4gICAgICAgIGZvcm1WYWx1ZXNbZmllbGQuaWRdID8gZm9ybVZhbHVlc1tmaWVsZC5pZF0udmFsaWQgOiBmYWxzZVxuICAgICAgfVxuICAgICAgZm9ybVZhbHVlcz17Zm9ybVZhbHVlc31cbiAgICAgIHN1Ym1pdEZhaWxlZD17c3VibWl0RmFpbGVkfVxuICAgICAgc3VibWl0U3VjY2Vzcz17c3VibWl0U3VjY2Vzc31cbiAgICAgIHRvdWNoZWQ9e3RvdWNoZWRbZmllbGQuaWRdfVxuICAgICAgc2V0VG91Y2hlZD17c2V0VG91Y2hlZH1cbiAgICAgIHNldEVycm9yTWVzc2FnZXM9e3NldEVycm9yTWVzc2FnZXN9XG4gICAgICB1bnNldEVycm9yPXt1bnNldEVycm9yfVxuICAgICAgZXJyb3I9e2Vycm9yfVxuICAgICAgcGFnZXM9e3BhZ2VzfVxuICAgICAgcHJldlN0ZXA9e3ByZXZTdGVwfVxuICAgICAgbmV4dFN0ZXA9e25leHRTdGVwfVxuICAgICAgaXNOZXh0RGlzYWJsZWQ9e2lzTmV4dERpc2FibGVkfVxuICAgICAgaGlkZUZpZWxkPXtmb3JtVmFsdWVzW2ZpZWxkLmlkXSA/IGZvcm1WYWx1ZXNbZmllbGQuaWRdLmhpZGVGaWVsZCA6IGZhbHNlfVxuICAgICAgc2F2ZVN0YXRlVG9IdG1sRmllbGQ9e1xuICAgICAgICBmaWVsZC50eXBlID09PSBcImh0bWxcIiAmJiBmaWVsZC5jc3NDbGFzcy5pbmRleE9mKFwic2V0LXN0YXRlXCIpICE9PSAtMVxuICAgICAgICAgID8geyBmb3JtVmFsdWVzLCBzYXZlU3RhdGVUb0h0bWxGaWVsZCB9XG4gICAgICAgICAgOiBmYWxzZVxuICAgICAgfVxuICAgICAgc3R5bGVkQ29tcG9uZW50cz17c3R5bGVkQ29tcG9uZW50c31cbiAgICAgIGNzc0NsYXNzPXtmaWVsZENsYXNzTmFtZX1cbiAgICAgIHNldEZvY3VzQ2xhc3M9e3NldEZvY3VzQ2xhc3N9XG4gICAgICBjb21wb25lbnQ9e1xuICAgICAgICBjdXN0b21Db21wb25lbnRzICYmXG4gICAgICAgIChjdXN0b21Db21wb25lbnRzW2ZpZWxkLmlkXSB8fCBjdXN0b21Db21wb25lbnRzW2ZpZWxkLmNzc0NsYXNzXSlcbiAgICAgIH1cbiAgICAgIGRyb3B6b25lVGV4dD17ZHJvcHpvbmVUZXh0fVxuICAgICAgbGFuZ3VhZ2U9e2xhbmd1YWdlfVxuICAgICAgYXBpS2V5cz17YXBpS2V5c31cbiAgICAgIHsuLi5wcm9wc31cbiAgICAvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUmVuZGVyRmllbGQ7XG4iXX0=