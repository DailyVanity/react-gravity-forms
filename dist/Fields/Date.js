"use strict";function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _react=_interopRequireWildcard(require("react")),_reactDatepicker=_interopRequireDefault(require("react-datepicker"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return _getRequireWildcardCache=function(){return a},a}function _interopRequireWildcard(a){if(a&&a.__esModule)return a;if(null===a||"object"!==_typeof(a)&&"function"!=typeof a)return{default:a};var b=_getRequireWildcardCache();if(b&&b.has(a))return b.get(a);var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;f&&(f.get||f.set)?Object.defineProperty(c,e,f):c[e]=a[e]}return c["default"]=a,b&&b.set(a,c),c}function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _objectWithoutProperties(a,b){if(null==a)return{};var c,d,e=_objectWithoutPropertiesLoose(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function _objectWithoutPropertiesLoose(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);return e}var _default=function(a){var b=a.field,c=a.value,d=a.validationMessage,e=a.touched,f=a.setTouched,g=a.hideField,h=a.updateForm,i=a.styledComponents,j=a.error,k=a.unsetError,l=a.setFocusClass,m=a.cssClass,n=_objectWithoutProperties(a,["field","value","validationMessage","touched","setTouched","hideField","updateForm","styledComponents","error","unsetError","setFocusClass","cssClass"]),o=b.id,p=b.formId,q=b.type,r=b.label,s=b.placeholder,t=b.isRequired,u=b.maxLength,v=b.description,w=b.descriptionPlacement,x=b.labelPlacement,y=b.width,z=b.inputs,A=b.customName,B=b.dateType,C=b.dateFormat,D=b.defaultValue,E=b.datepickerOptions,F=i||!1,G=F.Input,H=void 0===G?"input":G,I=F.Label,J=void 0===I?"label":I,K=F.Box,L=void 0===K?"div":K,M=F.DatePicker,N=void 0===M?"div":M,O=F.ReactSelect,P=O||Select,Q=!!(C&&"dmy"===C)&&"dd/MM/yyyy",R=!!D&&new Date(D);if(Q&&D){var S=D.split("/"),T=new Date(+S[2],S[1]-1,+S[0]);R=T}var U=(0,_react.useState)(R),V=_slicedToArray(U,2),W=V[0],X=V[1],Y=function getFormattedInputs(a){if(B){if("datefield"===B)return"dmy"===C||"dmy_dash"===C||"dmy_dot"===C?[a[1],a[0],a[2]]:"ymd_slash"===C||"ymd_dash"===C||"ymd_dot"===C?[a[2],a[0],a[1]]:a;if("datedropdown"===B)return[a[1],a[0],a[2]]}return a}(z),Z=function adjustDatePickerOptions(a){if(B&&"datepicker"===B&&a){var b=Object.keys(a);if(b&&0<b.length)for(var c=0;c<b.length;c++)("minDate"===b[c]||"maxDate"===b[c])&&(a[b[c]]=new Date(a[b[c]]))}return a}(E)||{},$=function(a,b,c){for(var d=[],e=b<c?1:-1,f=b;f!=c+e;f+=e)d.push({value:f,label:f,selected:parseInt(f)===parseInt(a)});return d};return _react["default"].createElement(L,{width:y,className:d&&e||j?"form-field error ".concat(m):"form-field ".concat(m),style:{display:g?"none":void 0}},_react["default"].createElement(J,{htmlFor:"input_".concat(p,"_").concat(o),className:"gf-label ".concat(x)},r,t?_react["default"].createElement("abbr",null,"*"):null),_react["default"].createElement("div",{className:q},"above"===w&&v&&_react["default"].createElement("div",{className:"description"},v),B&&"datefield"!==B?"datepicker"===B?_react["default"].createElement(_react["default"].Fragment,null,_react["default"].createElement(N,{className:"ginput_container ginput_container_date"},_react["default"].createElement(_reactDatepicker["default"],_extends({name:"input_".concat(o),id:"input_".concat(p,"_").concat(o),type:"text",className:"datepicker hasDatepicker",selected:W,onChange:function onChange(a){X(a),h({target:{value:a}},b),f(o),k(o),l(a)},onBlur:function onBlur(){h({target:{value:W}},b),f(o),k(o),l(W)},dateFormat:Q||void 0,onFocus:function onFocus(){return l(!0)},autoComplete:"off",required:t,placeholderText:s,maxDate:m.includes("past")&&new Date},Z))),(d&&e||j)&&_react["default"].createElement("span",{className:"error-message",id:"error_".concat(p,"_").concat(o)},d||j)):_react["default"].createElement(_react["default"].Fragment,null,Y&&Y.map(function(a,c){return _react["default"].createElement("div",{key:a.id,className:"gfield_date_dropdown"},_react["default"].createElement(P,{required:t,placeholder:a.placeholder,options:0===c?$(0,1,31):1===c?$(0,1,12):$(0,1920,new Date().getFullYear()),id:"input_".concat(p,"_").concat(o,"_").concat(c+1),name:A||"input_".concat(o,"[]"),onBlur:function onBlur(d){b.subId=c,b.dateLabel=a.label,h(d,b),f(o),k(o),l(""!==a.value)},onFocus:function onFocus(){return l(!0)}}))}),(d&&e||j)&&_react["default"].createElement("span",{className:"error-message",id:"error_".concat(p,"_").concat(o)},d||j)):_react["default"].createElement(_react["default"].Fragment,null,Y&&Y.map(function(a,c){return _react["default"].createElement("div",{className:q,key:a.id},_react["default"].createElement(H,{id:"input_".concat(p,"_").concat(o,"_").concat(c),type:"number",name:A||"input_".concat(o,"[]"),placeholder:a.placeholder,step:"1",min:"1",max:"MM"===a.label?12:"DD"===a.label?31:new Date().getFullYear()+1,maxLength:"YYYY"===a.label?4:2,value:a.value,onBlur:function onBlur(d){b.subId=c,b.dateLabel=a.label,h(d,b),f(o),k(o),l(""!==a.value)},onFocus:function onFocus(){return l(!0)}}),_react["default"].createElement("label",{htmlFor:"input_".concat(p,"_").concat(o,"_").concat(c),className:"hide-label"},a.label),d&&e&&d[c]&&c===d[c].index&&d[c].message&&_react["default"].createElement("span",{className:"error-message",id:"error_".concat(p,"_").concat(a.id)},d[c].message),j&&_react["default"].createElement("span",{className:"error-message"},j))})),"above"!==w&&v&&_react["default"].createElement("div",{className:"description"},v)))};exports["default"]=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9GaWVsZHMvRGF0ZS5qc3giXSwibmFtZXMiOlsiZmllbGQiLCJ2YWx1ZSIsInZhbGlkYXRpb25NZXNzYWdlIiwidG91Y2hlZCIsInNldFRvdWNoZWQiLCJoaWRlRmllbGQiLCJ1cGRhdGVGb3JtIiwic3R5bGVkQ29tcG9uZW50cyIsImVycm9yIiwidW5zZXRFcnJvciIsInNldEZvY3VzQ2xhc3MiLCJjc3NDbGFzcyIsInByb3BzIiwiaWQiLCJmb3JtSWQiLCJ0eXBlIiwibGFiZWwiLCJwbGFjZWhvbGRlciIsImlzUmVxdWlyZWQiLCJtYXhMZW5ndGgiLCJkZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uUGxhY2VtZW50IiwibGFiZWxQbGFjZW1lbnQiLCJ3aWR0aCIsImlucHV0cyIsImN1c3RvbU5hbWUiLCJkYXRlVHlwZSIsImRhdGVGb3JtYXQiLCJkZWZhdWx0VmFsdWUiLCJkYXRlcGlja2VyT3B0aW9ucyIsIklucHV0IiwiTGFiZWwiLCJCb3giLCJEYXRlUGlja2VyIiwiU2RhdGVQaWNrZXIiLCJSZWFjdFNlbGVjdCIsIlJTZWxlY3QiLCJTZWxlY3QiLCJmb3JtYXQiLCJzZWxlY3RlZFZhbHVlIiwiRGF0ZSIsImRhdGVQYXJ0cyIsInNwbGl0IiwiZGF0ZU9iamVjdCIsInN0YXJ0RGF0ZSIsInNldERhdGUiLCJmb3JtYXRlZElucHV0cyIsImdldEZvcm1hdHRlZElucHV0cyIsIml0ZW1zIiwiZGF0ZU9wdGlvbnMiLCJhZGp1c3REYXRlUGlja2VyT3B0aW9ucyIsIm9wdGlvbnMiLCJrZXlzIiwiT2JqZWN0IiwibGVuZ3RoIiwiaSIsImdldF9udW1iZXJfZHJvcGRvd24iLCJzZWxlY3RlZF92YWx1ZSIsInN0YXJ0X251bWJlciIsImVuZF9udW1iZXIiLCJpbmNyZW1lbnQiLCJwdXNoIiwic2VsZWN0ZWQiLCJwYXJzZUludCIsImRpc3BsYXkiLCJkYXRlIiwidGFyZ2V0IiwiaW5jbHVkZXMiLCJtYXAiLCJpbnB1dCIsImluZGV4IiwiZ2V0RnVsbFllYXIiLCJldmVudCIsInN1YklkIiwiZGF0ZUxhYmVsIiwiaXRlbSIsIm1lc3NhZ2UiXSwibWFwcGluZ3MiOiJnN0VBR2UsV0FjVCxJQWJKQSxDQUFBQSxDQWFJLEdBYkpBLEtBYUksQ0FaSkMsQ0FZSSxHQVpKQSxLQVlJLENBWEpDLENBV0ksR0FYSkEsaUJBV0ksQ0FWSkMsQ0FVSSxHQVZKQSxPQVVJLENBVEpDLENBU0ksR0FUSkEsVUFTSSxDQVJKQyxDQVFJLEdBUkpBLFNBUUksQ0FQSkMsQ0FPSSxHQVBKQSxVQU9JLENBTkpDLENBTUksR0FOSkEsZ0JBTUksQ0FMSkMsQ0FLSSxHQUxKQSxLQUtJLENBSkpDLENBSUksR0FKSkEsVUFJSSxDQUhKQyxDQUdJLEdBSEpBLGFBR0ksQ0FGSkMsQ0FFSSxHQUZKQSxRQUVJLENBRERDLENBQ0Msc0xBRUZDLENBRkUsQ0FtQkFiLENBbkJBLENBRUZhLEVBRkUsQ0FHRkMsQ0FIRSxDQW1CQWQsQ0FuQkEsQ0FHRmMsTUFIRSxDQUlGQyxDQUpFLENBbUJBZixDQW5CQSxDQUlGZSxJQUpFLENBS0ZDLENBTEUsQ0FtQkFoQixDQW5CQSxDQUtGZ0IsS0FMRSxDQU1GQyxDQU5FLENBbUJBakIsQ0FuQkEsQ0FNRmlCLFdBTkUsQ0FPRkMsQ0FQRSxDQW1CQWxCLENBbkJBLENBT0ZrQixVQVBFLENBUUZDLENBUkUsQ0FtQkFuQixDQW5CQSxDQVFGbUIsU0FSRSxDQVNGQyxDQVRFLENBbUJBcEIsQ0FuQkEsQ0FTRm9CLFdBVEUsQ0FVRkMsQ0FWRSxDQW1CQXJCLENBbkJBLENBVUZxQixvQkFWRSxDQVdGQyxDQVhFLENBbUJBdEIsQ0FuQkEsQ0FXRnNCLGNBWEUsQ0FZRkMsQ0FaRSxDQW1CQXZCLENBbkJBLENBWUZ1QixLQVpFLENBYUZDLENBYkUsQ0FtQkF4QixDQW5CQSxDQWFGd0IsTUFiRSxDQWNGQyxDQWRFLENBbUJBekIsQ0FuQkEsQ0FjRnlCLFVBZEUsQ0FlRkMsQ0FmRSxDQW1CQTFCLENBbkJBLENBZUYwQixRQWZFLENBZ0JGQyxDQWhCRSxDQW1CQTNCLENBbkJBLENBZ0JGMkIsVUFoQkUsQ0FpQkZDLENBakJFLENBbUJBNUIsQ0FuQkEsQ0FpQkY0QixZQWpCRSxDQWtCRkMsQ0FsQkUsQ0FtQkE3QixDQW5CQSxDQWtCRjZCLGlCQWxCRSxHQTJCQXRCLENBQWdCLElBM0JoQixLQXNCRnVCLEtBdEJFLENBc0JGQSxDQXRCRSxZQXNCTSxPQXRCTixPQXVCRkMsS0F2QkUsQ0F1QkZBLENBdkJFLFlBdUJNLE9BdkJOLE9Bd0JGQyxHQXhCRSxDQXdCRkEsQ0F4QkUsWUF3QkksS0F4QkosT0F5QkZDLFVBekJFLENBeUJVQyxDQXpCVixZQXlCd0IsS0F6QnhCLEdBMEJGQyxDQTFCRSxHQTBCRkEsV0ExQkUsQ0E2QkVDLENBQU8sQ0FBR0QsQ0FBVyxFQUFJRSxNQTdCM0IsQ0FnQ0VDLENBQU0sSUFBR1gsQ0FBVSxFQUFtQixLQUFmLEdBQUFBLENBQWpCLEdBQXdDLFlBaENoRCxDQWlDQVksQ0FBYSxHQUFHWCxDQUFILEVBQWtCLEdBQUlZLENBQUFBLElBQUosQ0FBU1osQ0FBVCxDQWpDL0IsQ0FrQ0osR0FBSVUsQ0FBTSxFQUFJVixDQUFkLENBQTRCLElBQ3BCYSxDQUFBQSxDQUFTLENBQUdiLENBQVksQ0FBQ2MsS0FBYixDQUFtQixHQUFuQixDQURRLENBRXBCQyxDQUFVLENBQUcsR0FBSUgsQ0FBQUEsSUFBSixDQUFTLENBQUNDLENBQVMsQ0FBQyxDQUFELENBQW5CLENBQXdCQSxDQUFTLENBQUMsQ0FBRCxDQUFULENBQWUsQ0FBdkMsQ0FBMEMsQ0FBQ0EsQ0FBUyxDQUFDLENBQUQsQ0FBcEQsQ0FGTyxDQUcxQkYsQ0FBYSxDQUFHSSxDQUNqQixDQXRDRyxNQXdDeUIsb0JBQVNKLENBQVQsQ0F4Q3pCLHVCQXdDR0ssQ0F4Q0gsTUF3Q2NDLENBeENkLE1BbUVFQyxDQUFjLENBekJPLFFBQXJCQyxDQUFBQSxrQkFBcUIsQ0FBQ0MsQ0FBRCxDQUFXLENBQ3BDLEdBQUl0QixDQUFKLENBQWMsQ0FDWixHQUFpQixXQUFiLEdBQUFBLENBQUosT0FLUyxLQUxULEdBSVVDLENBSlYsRUFNUyxVQU5ULEdBSVVBLENBSlYsRUFPUyxTQVBULEdBSVVBLENBSlYsQ0FRYSxDQUFDcUIsQ0FBSyxDQUFDLENBQUQsQ0FBTixDQUFXQSxDQUFLLENBQUMsQ0FBRCxDQUFoQixDQUFxQkEsQ0FBSyxDQUFDLENBQUQsQ0FBMUIsQ0FSYixDQVNTLFdBVFQsR0FJVXJCLENBSlYsRUFVUyxVQVZULEdBSVVBLENBSlYsRUFXUyxTQVhULEdBSVVBLENBSlYsQ0FZYSxDQUFDcUIsQ0FBSyxDQUFDLENBQUQsQ0FBTixDQUFXQSxDQUFLLENBQUMsQ0FBRCxDQUFoQixDQUFxQkEsQ0FBSyxDQUFDLENBQUQsQ0FBMUIsQ0FaYixDQWNhQSxDQWRiLENBZ0JPLEdBQWlCLGNBQWIsR0FBQXRCLENBQUosQ0FDTCxNQUFPLENBQUNzQixDQUFLLENBQUMsQ0FBRCxDQUFOLENBQVdBLENBQUssQ0FBQyxDQUFELENBQWhCLENBQXFCQSxDQUFLLENBQUMsQ0FBRCxDQUExQixDQUVWLENBQ0QsTUFBT0EsQ0FBQUEsQ0FDUixDQUVzQixDQUFtQnhCLENBQW5CLENBbkVuQixDQWtGRXlCLENBQVcsQ0FiZSxRQUExQkMsQ0FBQUEsdUJBQTBCLENBQUNDLENBQUQsQ0FBYSxDQUMzQyxHQUFJekIsQ0FBUSxFQUFpQixZQUFiLEdBQUFBLENBQVosRUFBeUN5QixDQUE3QyxDQUFzRCxDQUNwRCxHQUFNQyxDQUFBQSxDQUFJLENBQUdDLE1BQU0sQ0FBQ0QsSUFBUCxDQUFZRCxDQUFaLENBQWIsQ0FDQSxHQUFJQyxDQUFJLEVBQWtCLENBQWQsQ0FBQUEsQ0FBSSxDQUFDRSxNQUFqQixDQUNFLElBQUssR0FBSUMsQ0FBQUEsQ0FBQyxDQUFHLENBQWIsQ0FBZ0JBLENBQUMsQ0FBR0gsQ0FBSSxDQUFDRSxNQUF6QixDQUFpQ0MsQ0FBQyxFQUFsQyxFQUNrQixTQUFaLEdBQUFILENBQUksQ0FBQ0csQ0FBRCxDQUFKLEVBQXFDLFNBQVosR0FBQUgsQ0FBSSxDQUFDRyxDQUFELENBRG5DLElBRUlKLENBQU8sQ0FBQ0MsQ0FBSSxDQUFDRyxDQUFELENBQUwsQ0FBUCxDQUFtQixHQUFJZixDQUFBQSxJQUFKLENBQVNXLENBQU8sQ0FBQ0MsQ0FBSSxDQUFDRyxDQUFELENBQUwsQ0FBaEIsQ0FGdkIsQ0FNSCxDQUNELE1BQU9KLENBQUFBLENBQ1IsQ0FDbUIsQ0FBd0J0QixDQUF4QixHQUE4QyxFQWxGOUQsQ0FvRkUyQixDQUFtQixDQUFHLFNBQUNDLENBQUQsQ0FBaUJDLENBQWpCLENBQStCQyxDQUEvQixDQUE4QyxDQUd4RSxPQUZNUixDQUFBQSxDQUFPLENBQUcsRUFFaEIsQ0FETVMsQ0FBUyxDQUFHRixDQUFZLENBQUdDLENBQWYsQ0FBNEIsQ0FBNUIsQ0FBZ0MsQ0FBQyxDQUNuRCxDQUFTSixDQUFDLENBQUdHLENBQWIsQ0FBMkJILENBQUMsRUFBSUksQ0FBVSxDQUFHQyxDQUE3QyxDQUF3REwsQ0FBQyxFQUFJSyxDQUE3RCxDQUNFVCxDQUFPLENBQUNVLElBQVIsQ0FBYSxDQUNYNUQsS0FBSyxDQUFFc0QsQ0FESSxDQUVYdkMsS0FBSyxDQUFFdUMsQ0FGSSxDQUdYTyxRQUFRLENBQUVDLFFBQVEsQ0FBQ1IsQ0FBRCxDQUFSLEdBQWdCUSxRQUFRLENBQUNOLENBQUQsQ0FIdkIsQ0FBYixFQU1GLE1BQU9OLENBQUFBLENBQ1IsQ0EvRkcsQ0FpR0osTUFDRSxpQ0FBQyxDQUFELEVBQ0UsS0FBSyxDQUFFNUIsQ0FEVCxDQUVFLFNBQVMsQ0FDTnJCLENBQWlCLEVBQUlDLENBQXRCLEVBQWtDSyxDQUFsQyw0QkFDd0JHLENBRHhCLHVCQUVrQkEsQ0FGbEIsQ0FISixDQU9FLEtBQUssQ0FBRSxDQUFFcUQsT0FBTyxDQUFFM0QsQ0FBUyxDQUFHLE1BQUgsT0FBcEIsQ0FQVCxFQVNFLGdDQUFDLENBQUQsRUFDRSxPQUFPLGlCQUFXUyxDQUFYLGFBQXFCRCxDQUFyQixDQURULENBRUUsU0FBUyxvQkFBY1MsQ0FBZCxDQUZYLEVBSUdOLENBSkgsQ0FLR0UsQ0FBVSxDQUFHLGdEQUFILENBQW9CLElBTGpDLENBVEYsQ0FnQkUsdUNBQUssU0FBUyxDQUFFSCxDQUFoQixFQUM0QixPQUF6QixHQUFBTSxDQUFvQixFQUFnQkQsQ0FBcEMsRUFDQyx1Q0FBSyxTQUFTLENBQUMsYUFBZixFQUE4QkEsQ0FBOUIsQ0FGSixDQUlHTSxDQUFRLEVBQWlCLFdBQWIsR0FBQUEsQ0FBWixDQUNjLFlBQWIsR0FBQUEsQ0FBUSxDQUNOLGdDQUFDLGlCQUFELENBQU8sUUFBUCxNQUNFLGdDQUFDLENBQUQsRUFBYSxTQUFTLENBQUMsd0NBQXZCLEVBQ0UsZ0NBQUMsMkJBQUQsV0FDRSxJQUFJLGlCQUFXYixDQUFYLENBRE4sQ0FFRSxFQUFFLGlCQUFXQyxDQUFYLGFBQXFCRCxDQUFyQixDQUZKLENBR0UsSUFBSSxDQUFDLE1BSFAsQ0FJRSxTQUFTLENBQUMsMEJBSlosQ0FLRSxRQUFRLENBQUUrQixDQUxaLENBTUUsUUFBUSxDQUFFLGtCQUFDcUIsQ0FBRCxDQUFVLENBQ2xCcEIsQ0FBTyxDQUFDb0IsQ0FBRCxDQURXLENBRWxCM0QsQ0FBVSxDQUNSLENBQ0U0RCxNQUFNLENBQUUsQ0FDTmpFLEtBQUssQ0FBRWdFLENBREQsQ0FEVixDQURRLENBTVJqRSxDQU5RLENBRlEsQ0FVbEJJLENBQVUsQ0FBQ1MsQ0FBRCxDQVZRLENBV2xCSixDQUFVLENBQUNJLENBQUQsQ0FYUSxDQVlsQkgsQ0FBYSxDQUFDdUQsQ0FBRCxDQUNkLENBbkJILENBb0JFLE1BQU0sQ0FBRSxpQkFBTyxDQUNiM0QsQ0FBVSxDQUNSLENBQ0U0RCxNQUFNLENBQUUsQ0FDTmpFLEtBQUssQ0FBRTJDLENBREQsQ0FEVixDQURRLENBTVI1QyxDQU5RLENBREcsQ0FTYkksQ0FBVSxDQUFDUyxDQUFELENBVEcsQ0FVYkosQ0FBVSxDQUFDSSxDQUFELENBVkcsQ0FXYkgsQ0FBYSxDQUFDa0MsQ0FBRCxDQUNkLENBaENILENBaUNFLFVBQVUsQ0FBRU4sQ0FBTSxRQWpDcEIsQ0FrQ0UsT0FBTyxDQUFFLHlCQUFNNUIsQ0FBQUEsQ0FBYSxJQUFuQixDQWxDWCxDQW1DRSxZQUFZLENBQUMsS0FuQ2YsQ0FvQ0UsUUFBUSxDQUFFUSxDQXBDWixDQXFDRSxlQUFlLENBQUVELENBckNuQixDQXNDRSxPQUFPLENBQUVOLENBQVEsQ0FBQ3dELFFBQVQsQ0FBa0IsTUFBbEIsR0FBNkIsR0FBSTNCLENBQUFBLElBdEM1QyxFQXVDTVMsQ0F2Q04sRUFERixDQURGLENBNENHLENBQUUvQyxDQUFpQixFQUFJQyxDQUF0QixFQUFrQ0ssQ0FBbkMsR0FDQyx3Q0FBTSxTQUFTLENBQUMsZUFBaEIsQ0FBZ0MsRUFBRSxpQkFBV00sQ0FBWCxhQUFxQkQsQ0FBckIsQ0FBbEMsRUFDR1gsQ0FBaUIsRUFBSU0sQ0FEeEIsQ0E3Q0osQ0FETSxDQW9ETixnQ0FBQyxpQkFBRCxDQUFPLFFBQVAsTUFDR3NDLENBQWMsRUFDYkEsQ0FBYyxDQUFDc0IsR0FBZixDQUFtQixTQUFDQyxDQUFELENBQVFDLENBQVIsUUFDakIsd0NBQUssR0FBRyxDQUFFRCxDQUFLLENBQUN4RCxFQUFoQixDQUFvQixTQUFTLENBQUMsc0JBQTlCLEVBQ0UsZ0NBQUMsQ0FBRCxFQUNFLFFBQVEsQ0FBRUssQ0FEWixDQUVFLFdBQVcsQ0FBRW1ELENBQUssQ0FBQ3BELFdBRnJCLENBR0UsT0FBTyxDQUNLLENBQVYsR0FBQXFELENBQUssQ0FDRGQsQ0FBbUIsQ0FBQyxDQUFELENBQUksQ0FBSixDQUFPLEVBQVAsQ0FEbEIsQ0FFUyxDQUFWLEdBQUFjLENBQUssQ0FDTGQsQ0FBbUIsQ0FBQyxDQUFELENBQUksQ0FBSixDQUFPLEVBQVAsQ0FEZCxDQUVMQSxDQUFtQixDQUNqQixDQURpQixDQUVqQixJQUZpQixDQUdqQixHQUFJaEIsQ0FBQUEsSUFBSixHQUFXK0IsV0FBWCxFQUhpQixDQVIzQixDQWNFLEVBQUUsaUJBQVd6RCxDQUFYLGFBQXFCRCxDQUFyQixhQUEyQnlELENBQUssQ0FBRyxDQUFuQyxDQWRKLENBZUUsSUFBSSxDQUFFN0MsQ0FBVSxrQkFBYVosQ0FBYixNQWZsQixDQWdCRSxNQUFNLENBQUUsZ0JBQUMyRCxDQUFELENBQVcsQ0FDakJ4RSxDQUFLLENBQUN5RSxLQUFOLENBQWNILENBREcsQ0FFakJ0RSxDQUFLLENBQUMwRSxTQUFOLENBQWtCTCxDQUFLLENBQUNyRCxLQUZQLENBR2pCVixDQUFVLENBQUNrRSxDQUFELENBQVF4RSxDQUFSLENBSE8sQ0FJakJJLENBQVUsQ0FBQ1MsQ0FBRCxDQUpPLENBS2pCSixDQUFVLENBQUNJLENBQUQsQ0FMTyxDQU1qQkgsQ0FBYSxDQUFpQixFQUFoQixHQUFBMkQsQ0FBSyxDQUFDcEUsS0FBUCxDQUNkLENBdkJILENBd0JFLE9BQU8sQ0FBRSx5QkFBTVMsQ0FBQUEsQ0FBYSxJQUFuQixDQXhCWCxFQURGLENBRGlCLENBQW5CLENBRkosQ0FnQ0csQ0FBRVIsQ0FBaUIsRUFBSUMsQ0FBdEIsRUFBa0NLLENBQW5DLEdBQ0Msd0NBQU0sU0FBUyxDQUFDLGVBQWhCLENBQWdDLEVBQUUsaUJBQVdNLENBQVgsYUFBcUJELENBQXJCLENBQWxDLEVBQ0dYLENBQWlCLEVBQUlNLENBRHhCLENBakNKLENBckRILENBNkZDLGdDQUFDLGlCQUFELENBQU8sUUFBUCxNQUNHc0MsQ0FBYyxFQUNiQSxDQUFjLENBQUNzQixHQUFmLENBQW1CLFNBQUNPLENBQUQsQ0FBT0wsQ0FBUCxRQUNqQix3Q0FBSyxTQUFTLENBQUV2RCxDQUFoQixDQUFzQixHQUFHLENBQUU0RCxDQUFJLENBQUM5RCxFQUFoQyxFQUNFLGdDQUFDLENBQUQsRUFDRSxFQUFFLGlCQUFXQyxDQUFYLGFBQXFCRCxDQUFyQixhQUEyQnlELENBQTNCLENBREosQ0FFRSxJQUFJLENBQUMsUUFGUCxDQUdFLElBQUksQ0FBRTdDLENBQVUsa0JBQWFaLENBQWIsTUFIbEIsQ0FJRSxXQUFXLENBQUU4RCxDQUFJLENBQUMxRCxXQUpwQixDQUtFLElBQUksQ0FBQyxHQUxQLENBTUUsR0FBRyxDQUFDLEdBTk4sQ0FPRSxHQUFHLENBQ2MsSUFBZixHQUFBMEQsQ0FBSSxDQUFDM0QsS0FBTCxDQUNJLEVBREosQ0FFbUIsSUFBZixHQUFBMkQsQ0FBSSxDQUFDM0QsS0FBTCxDQUNBLEVBREEsQ0FFQSxHQUFJd0IsQ0FBQUEsSUFBSixHQUFXK0IsV0FBWCxHQUEyQixDQVpuQyxDQWNFLFNBQVMsQ0FBaUIsTUFBZixHQUFBSSxDQUFJLENBQUMzRCxLQUFMLENBQXdCLENBQXhCLENBQTRCLENBZHpDLENBZUUsS0FBSyxDQUFFMkQsQ0FBSSxDQUFDMUUsS0FmZCxDQWdCRSxNQUFNLENBQUUsZ0JBQUN1RSxDQUFELENBQVcsQ0FDakJ4RSxDQUFLLENBQUN5RSxLQUFOLENBQWNILENBREcsQ0FFakJ0RSxDQUFLLENBQUMwRSxTQUFOLENBQWtCQyxDQUFJLENBQUMzRCxLQUZOLENBR2pCVixDQUFVLENBQUNrRSxDQUFELENBQVF4RSxDQUFSLENBSE8sQ0FJakJJLENBQVUsQ0FBQ1MsQ0FBRCxDQUpPLENBS2pCSixDQUFVLENBQUNJLENBQUQsQ0FMTyxDQU1qQkgsQ0FBYSxDQUFnQixFQUFmLEdBQUFpRSxDQUFJLENBQUMxRSxLQUFOLENBQ2QsQ0F2QkgsQ0F3QkUsT0FBTyxDQUFFLHlCQUFNUyxDQUFBQSxDQUFhLElBQW5CLENBeEJYLEVBREYsQ0EyQkUseUNBQ0UsT0FBTyxpQkFBV0ksQ0FBWCxhQUFxQkQsQ0FBckIsYUFBMkJ5RCxDQUEzQixDQURULENBRUUsU0FBUyxDQUFDLFlBRlosRUFJR0ssQ0FBSSxDQUFDM0QsS0FKUixDQTNCRixDQWlDR2QsQ0FBaUIsRUFDaEJDLENBREQsRUFFQ0QsQ0FBaUIsQ0FBQ29FLENBQUQsQ0FGbEIsRUFHQ0EsQ0FBSyxHQUFLcEUsQ0FBaUIsQ0FBQ29FLENBQUQsQ0FBakIsQ0FBeUJBLEtBSHBDLEVBSUNwRSxDQUFpQixDQUFDb0UsQ0FBRCxDQUFqQixDQUF5Qk0sT0FKMUIsRUFLRyx3Q0FDRSxTQUFTLENBQUMsZUFEWixDQUVFLEVBQUUsaUJBQVc5RCxDQUFYLGFBQXFCNkQsQ0FBSSxDQUFDOUQsRUFBMUIsQ0FGSixFQUlHWCxDQUFpQixDQUFDb0UsQ0FBRCxDQUFqQixDQUF5Qk0sT0FKNUIsQ0F0Q04sQ0E2Q0dwRSxDQUFLLEVBQUksd0NBQU0sU0FBUyxDQUFDLGVBQWhCLEVBQWlDQSxDQUFqQyxDQTdDWixDQURpQixDQUFuQixDQUZKLENBakdKLENBc0o0QixPQUF6QixHQUFBYSxDQUFvQixFQUFnQkQsQ0FBcEMsRUFDQyx1Q0FBSyxTQUFTLENBQUMsYUFBZixFQUE4QkEsQ0FBOUIsQ0F2SkosQ0FoQkYsQ0E0S0gsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IERhdGVQaWNrZXIgZnJvbSBcInJlYWN0LWRhdGVwaWNrZXJcIjtcblxuZXhwb3J0IGRlZmF1bHQgKHtcbiAgZmllbGQsXG4gIHZhbHVlLFxuICB2YWxpZGF0aW9uTWVzc2FnZSxcbiAgdG91Y2hlZCxcbiAgc2V0VG91Y2hlZCxcbiAgaGlkZUZpZWxkLFxuICB1cGRhdGVGb3JtLFxuICBzdHlsZWRDb21wb25lbnRzLFxuICBlcnJvcixcbiAgdW5zZXRFcnJvcixcbiAgc2V0Rm9jdXNDbGFzcyxcbiAgY3NzQ2xhc3MsXG4gIC4uLnByb3BzXG59KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBpZCxcbiAgICBmb3JtSWQsXG4gICAgdHlwZSxcbiAgICBsYWJlbCxcbiAgICBwbGFjZWhvbGRlcixcbiAgICBpc1JlcXVpcmVkLFxuICAgIG1heExlbmd0aCxcbiAgICBkZXNjcmlwdGlvbixcbiAgICBkZXNjcmlwdGlvblBsYWNlbWVudCxcbiAgICBsYWJlbFBsYWNlbWVudCxcbiAgICB3aWR0aCxcbiAgICBpbnB1dHMsXG4gICAgY3VzdG9tTmFtZSxcbiAgICBkYXRlVHlwZSxcbiAgICBkYXRlRm9ybWF0LFxuICAgIGRlZmF1bHRWYWx1ZSxcbiAgICBkYXRlcGlja2VyT3B0aW9ucyxcbiAgfSA9IGZpZWxkO1xuXG4gIGNvbnN0IHtcbiAgICBJbnB1dCA9IFwiaW5wdXRcIixcbiAgICBMYWJlbCA9IFwibGFiZWxcIixcbiAgICBCb3ggPSBcImRpdlwiLFxuICAgIERhdGVQaWNrZXI6IFNkYXRlUGlja2VyID0gXCJkaXZcIixcbiAgICBSZWFjdFNlbGVjdCxcbiAgfSA9IHN0eWxlZENvbXBvbmVudHMgfHwgZmFsc2U7XG5cbiAgY29uc3QgUlNlbGVjdCA9IFJlYWN0U2VsZWN0IHx8IFNlbGVjdDtcblxuICAvLyBjb252ZXIgZGF0ZSBmb3JtYXRcbiAgY29uc3QgZm9ybWF0ID0gZGF0ZUZvcm1hdCAmJiBkYXRlRm9ybWF0ID09PSBcImRteVwiID8gXCJkZC9NTS95eXl5XCIgOiBmYWxzZTtcbiAgbGV0IHNlbGVjdGVkVmFsdWUgPSBkZWZhdWx0VmFsdWUgPyBuZXcgRGF0ZShkZWZhdWx0VmFsdWUpIDogZmFsc2U7XG4gIGlmIChmb3JtYXQgJiYgZGVmYXVsdFZhbHVlKSB7XG4gICAgY29uc3QgZGF0ZVBhcnRzID0gZGVmYXVsdFZhbHVlLnNwbGl0KFwiL1wiKTtcbiAgICBjb25zdCBkYXRlT2JqZWN0ID0gbmV3IERhdGUoK2RhdGVQYXJ0c1syXSwgZGF0ZVBhcnRzWzFdIC0gMSwgK2RhdGVQYXJ0c1swXSk7XG4gICAgc2VsZWN0ZWRWYWx1ZSA9IGRhdGVPYmplY3Q7XG4gIH1cblxuICBjb25zdCBbc3RhcnREYXRlLCBzZXREYXRlXSA9IHVzZVN0YXRlKHNlbGVjdGVkVmFsdWUpO1xuXG4gIGNvbnN0IGdldEZvcm1hdHRlZElucHV0cyA9IChpdGVtcykgPT4ge1xuICAgIGlmIChkYXRlVHlwZSkge1xuICAgICAgaWYgKGRhdGVUeXBlID09PSBcImRhdGVmaWVsZFwiKSB7XG4gICAgICAgIC8vIDAgLSBNTVxuICAgICAgICAvLyAxIC0gRERcbiAgICAgICAgLy8gMiAtIFlZWVlcbiAgICAgICAgc3dpdGNoIChkYXRlRm9ybWF0KSB7XG4gICAgICAgICAgY2FzZSBcImRteVwiOlxuICAgICAgICAgIGNhc2UgXCJkbXlfZGFzaFwiOlxuICAgICAgICAgIGNhc2UgXCJkbXlfZG90XCI6XG4gICAgICAgICAgICByZXR1cm4gW2l0ZW1zWzFdLCBpdGVtc1swXSwgaXRlbXNbMl1dO1xuICAgICAgICAgIGNhc2UgXCJ5bWRfc2xhc2hcIjpcbiAgICAgICAgICBjYXNlIFwieW1kX2Rhc2hcIjpcbiAgICAgICAgICBjYXNlIFwieW1kX2RvdFwiOlxuICAgICAgICAgICAgcmV0dXJuIFtpdGVtc1syXSwgaXRlbXNbMF0sIGl0ZW1zWzFdXTtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGRhdGVUeXBlID09PSBcImRhdGVkcm9wZG93blwiKSB7XG4gICAgICAgIHJldHVybiBbaXRlbXNbMV0sIGl0ZW1zWzBdLCBpdGVtc1syXV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtcztcbiAgfTtcblxuICBjb25zdCBmb3JtYXRlZElucHV0cyA9IGdldEZvcm1hdHRlZElucHV0cyhpbnB1dHMpO1xuXG4gIGNvbnN0IGFkanVzdERhdGVQaWNrZXJPcHRpb25zID0gKG9wdGlvbnMpID0+IHtcbiAgICBpZiAoZGF0ZVR5cGUgJiYgZGF0ZVR5cGUgPT09IFwiZGF0ZXBpY2tlclwiICYmIG9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvcHRpb25zKTtcbiAgICAgIGlmIChrZXlzICYmIGtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoa2V5c1tpXSA9PT0gXCJtaW5EYXRlXCIgfHwga2V5c1tpXSA9PT0gXCJtYXhEYXRlXCIpIHtcbiAgICAgICAgICAgIG9wdGlvbnNba2V5c1tpXV0gPSBuZXcgRGF0ZShvcHRpb25zW2tleXNbaV1dKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH07XG4gIGNvbnN0IGRhdGVPcHRpb25zID0gYWRqdXN0RGF0ZVBpY2tlck9wdGlvbnMoZGF0ZXBpY2tlck9wdGlvbnMpIHx8IHt9O1xuXG4gIGNvbnN0IGdldF9udW1iZXJfZHJvcGRvd24gPSAoc2VsZWN0ZWRfdmFsdWUsIHN0YXJ0X251bWJlciwgZW5kX251bWJlcikgPT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBbXTtcbiAgICBjb25zdCBpbmNyZW1lbnQgPSBzdGFydF9udW1iZXIgPCBlbmRfbnVtYmVyID8gMSA6IC0xO1xuICAgIGZvciAobGV0IGkgPSBzdGFydF9udW1iZXI7IGkgIT0gZW5kX251bWJlciArIGluY3JlbWVudDsgaSArPSBpbmNyZW1lbnQpIHtcbiAgICAgIG9wdGlvbnMucHVzaCh7XG4gICAgICAgIHZhbHVlOiBpLFxuICAgICAgICBsYWJlbDogaSxcbiAgICAgICAgc2VsZWN0ZWQ6IHBhcnNlSW50KGkpID09PSBwYXJzZUludChzZWxlY3RlZF92YWx1ZSksXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnM7XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8Qm94XG4gICAgICB3aWR0aD17d2lkdGh9XG4gICAgICBjbGFzc05hbWU9e1xuICAgICAgICAodmFsaWRhdGlvbk1lc3NhZ2UgJiYgdG91Y2hlZCkgfHwgZXJyb3JcbiAgICAgICAgICA/IGBmb3JtLWZpZWxkIGVycm9yICR7Y3NzQ2xhc3N9YFxuICAgICAgICAgIDogYGZvcm0tZmllbGQgJHtjc3NDbGFzc31gXG4gICAgICB9XG4gICAgICBzdHlsZT17eyBkaXNwbGF5OiBoaWRlRmllbGQgPyBcIm5vbmVcIiA6IHVuZGVmaW5lZCB9fVxuICAgID5cbiAgICAgIDxMYWJlbFxuICAgICAgICBodG1sRm9yPXtgaW5wdXRfJHtmb3JtSWR9XyR7aWR9YH1cbiAgICAgICAgY2xhc3NOYW1lPXtgZ2YtbGFiZWwgJHtsYWJlbFBsYWNlbWVudH1gfVxuICAgICAgPlxuICAgICAgICB7bGFiZWx9XG4gICAgICAgIHtpc1JlcXVpcmVkID8gPGFiYnI+KjwvYWJicj4gOiBudWxsfVxuICAgICAgPC9MYWJlbD5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPXt0eXBlfT5cbiAgICAgICAge2Rlc2NyaXB0aW9uUGxhY2VtZW50ID09PSBcImFib3ZlXCIgJiYgZGVzY3JpcHRpb24gJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGVzY3JpcHRpb25cIj57ZGVzY3JpcHRpb259PC9kaXY+XG4gICAgICAgICl9XG4gICAgICAgIHtkYXRlVHlwZSAmJiBkYXRlVHlwZSAhPT0gXCJkYXRlZmllbGRcIiA/IChcbiAgICAgICAgICBkYXRlVHlwZSA9PT0gXCJkYXRlcGlja2VyXCIgPyAoXG4gICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgIDxTZGF0ZVBpY2tlciBjbGFzc05hbWU9XCJnaW5wdXRfY29udGFpbmVyIGdpbnB1dF9jb250YWluZXJfZGF0ZVwiPlxuICAgICAgICAgICAgICAgIDxEYXRlUGlja2VyXG4gICAgICAgICAgICAgICAgICBuYW1lPXtgaW5wdXRfJHtpZH1gfVxuICAgICAgICAgICAgICAgICAgaWQ9e2BpbnB1dF8ke2Zvcm1JZH1fJHtpZH1gfVxuICAgICAgICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZGF0ZXBpY2tlciBoYXNEYXRlcGlja2VyXCJcbiAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPXtzdGFydERhdGV9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGRhdGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2V0RGF0ZShkYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRm9ybShcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgZmllbGRcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VG91Y2hlZChpZCk7XG4gICAgICAgICAgICAgICAgICAgIHVuc2V0RXJyb3IoaWQpO1xuICAgICAgICAgICAgICAgICAgICBzZXRGb2N1c0NsYXNzKGRhdGUpO1xuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIG9uQmx1cj17KGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlRm9ybShcbiAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICBzZXRUb3VjaGVkKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgdW5zZXRFcnJvcihpZCk7XG4gICAgICAgICAgICAgICAgICAgIHNldEZvY3VzQ2xhc3Moc3RhcnREYXRlKTtcbiAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICBkYXRlRm9ybWF0PXtmb3JtYXQgfHwgdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgICAgb25Gb2N1cz17KCkgPT4gc2V0Rm9jdXNDbGFzcyh0cnVlKX1cbiAgICAgICAgICAgICAgICAgIGF1dG9Db21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICAgICAgICByZXF1aXJlZD17aXNSZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyVGV4dD17cGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgICAgICBtYXhEYXRlPXtjc3NDbGFzcy5pbmNsdWRlcyhcInBhc3RcIikgJiYgbmV3IERhdGUoKX1cbiAgICAgICAgICAgICAgICAgIHsuLi5kYXRlT3B0aW9uc31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L1NkYXRlUGlja2VyPlxuICAgICAgICAgICAgICB7KCh2YWxpZGF0aW9uTWVzc2FnZSAmJiB0b3VjaGVkKSB8fCBlcnJvcikgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yLW1lc3NhZ2VcIiBpZD17YGVycm9yXyR7Zm9ybUlkfV8ke2lkfWB9PlxuICAgICAgICAgICAgICAgICAge3ZhbGlkYXRpb25NZXNzYWdlIHx8IGVycm9yfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAge2Zvcm1hdGVkSW5wdXRzICYmXG4gICAgICAgICAgICAgICAgZm9ybWF0ZWRJbnB1dHMubWFwKChpbnB1dCwgaW5kZXgpID0+IChcbiAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXtpbnB1dC5pZH0gY2xhc3NOYW1lPVwiZ2ZpZWxkX2RhdGVfZHJvcGRvd25cIj5cbiAgICAgICAgICAgICAgICAgICAgPFJTZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZD17aXNSZXF1aXJlZH1cbiAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj17aW5wdXQucGxhY2Vob2xkZXJ9XG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucz17XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9PT0gMFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdldF9udW1iZXJfZHJvcGRvd24oMCwgMSwgMzEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogaW5kZXggPT09IDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnZXRfbnVtYmVyX2Ryb3Bkb3duKDAsIDEsIDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IGdldF9udW1iZXJfZHJvcGRvd24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTkyMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgaWQ9e2BpbnB1dF8ke2Zvcm1JZH1fJHtpZH1fJHtpbmRleCArIDF9YH1cbiAgICAgICAgICAgICAgICAgICAgICBuYW1lPXtjdXN0b21OYW1lIHx8IGBpbnB1dF8ke2lkfVtdYH1cbiAgICAgICAgICAgICAgICAgICAgICBvbkJsdXI9eyhldmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQuc3ViSWQgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLmRhdGVMYWJlbCA9IGlucHV0LmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRm9ybShldmVudCwgZmllbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VG91Y2hlZChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNldEVycm9yKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvY3VzQ2xhc3MoaW5wdXQudmFsdWUgIT09IFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgb25Gb2N1cz17KCkgPT4gc2V0Rm9jdXNDbGFzcyh0cnVlKX1cbiAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICB7KCh2YWxpZGF0aW9uTWVzc2FnZSAmJiB0b3VjaGVkKSB8fCBlcnJvcikgJiYgKFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yLW1lc3NhZ2VcIiBpZD17YGVycm9yXyR7Zm9ybUlkfV8ke2lkfWB9PlxuICAgICAgICAgICAgICAgICAge3ZhbGlkYXRpb25NZXNzYWdlIHx8IGVycm9yfVxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgKVxuICAgICAgICApIDogKFxuICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgIHtmb3JtYXRlZElucHV0cyAmJlxuICAgICAgICAgICAgICBmb3JtYXRlZElucHV0cy5tYXAoKGl0ZW0sIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e3R5cGV9IGtleT17aXRlbS5pZH0+XG4gICAgICAgICAgICAgICAgICA8SW5wdXRcbiAgICAgICAgICAgICAgICAgICAgaWQ9e2BpbnB1dF8ke2Zvcm1JZH1fJHtpZH1fJHtpbmRleH1gfVxuICAgICAgICAgICAgICAgICAgICB0eXBlPVwibnVtYmVyXCJcbiAgICAgICAgICAgICAgICAgICAgbmFtZT17Y3VzdG9tTmFtZSB8fCBgaW5wdXRfJHtpZH1bXWB9XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtpdGVtLnBsYWNlaG9sZGVyfVxuICAgICAgICAgICAgICAgICAgICBzdGVwPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgIG1pbj1cIjFcIlxuICAgICAgICAgICAgICAgICAgICBtYXg9e1xuICAgICAgICAgICAgICAgICAgICAgIGl0ZW0ubGFiZWwgPT09IFwiTU1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgPyAxMlxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLmxhYmVsID09PSBcIkREXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gMzFcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgMVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1heExlbmd0aD17aXRlbS5sYWJlbCA9PT0gXCJZWVlZXCIgPyA0IDogMn1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2l0ZW0udmFsdWV9XG4gICAgICAgICAgICAgICAgICAgIG9uQmx1cj17KGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgZmllbGQuc3ViSWQgPSBpbmRleDtcbiAgICAgICAgICAgICAgICAgICAgICBmaWVsZC5kYXRlTGFiZWwgPSBpdGVtLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZvcm0oZXZlbnQsIGZpZWxkKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRUb3VjaGVkKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICB1bnNldEVycm9yKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRGb2N1c0NsYXNzKGl0ZW0udmFsdWUgIT09IFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBvbkZvY3VzPXsoKSA9PiBzZXRGb2N1c0NsYXNzKHRydWUpfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgIDxsYWJlbFxuICAgICAgICAgICAgICAgICAgICBodG1sRm9yPXtgaW5wdXRfJHtmb3JtSWR9XyR7aWR9XyR7aW5kZXh9YH1cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiaGlkZS1sYWJlbFwiXG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHtpdGVtLmxhYmVsfVxuICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgIHt2YWxpZGF0aW9uTWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgICAgICB0b3VjaGVkICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25NZXNzYWdlW2luZGV4XSAmJlxuICAgICAgICAgICAgICAgICAgICBpbmRleCA9PT0gdmFsaWRhdGlvbk1lc3NhZ2VbaW5kZXhdLmluZGV4ICYmXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRpb25NZXNzYWdlW2luZGV4XS5tZXNzYWdlICYmIChcbiAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZXJyb3ItbWVzc2FnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBpZD17YGVycm9yXyR7Zm9ybUlkfV8ke2l0ZW0uaWR9YH1cbiAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICB7dmFsaWRhdGlvbk1lc3NhZ2VbaW5kZXhdLm1lc3NhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAge2Vycm9yICYmIDxzcGFuIGNsYXNzTmFtZT1cImVycm9yLW1lc3NhZ2VcIj57ZXJyb3J9PC9zcGFuPn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKX1cbiAgICAgICAge2Rlc2NyaXB0aW9uUGxhY2VtZW50ICE9PSBcImFib3ZlXCIgJiYgZGVzY3JpcHRpb24gJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGVzY3JpcHRpb25cIj57ZGVzY3JpcHRpb259PC9kaXY+XG4gICAgICAgICl9XG4gICAgICA8L2Rpdj5cbiAgICA8L0JveD5cbiAgKTtcbn07XG4iXX0=