"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkConditionalLogic=checkConditionalLogic,exports.parseLogicType=parseLogicType,exports.parseOperator=parseOperator;function checkConditionalLogic(a,b=!1){const{rules:c,actionType:d,logicType:e}=a;if(!c)return!0;const f=[];c.forEach(({fieldId:a,value:c,operator:d},e)=>{const g=b[a].value;if(g instanceof Array){let a=0;0<g.length&&g.forEach(b=>{parseOperator(d,c,b)&&a++}),f[e]="isnot"==d?a==c.length:0<a}else f[e]=parseOperator(d,c,g)});let g=parseLogicType(e,f);return"show"===d&&(g=!g),g}function parseOperator(a,b,c){switch(a){case"is":return b===c;case"isnot":return b!=c;case"<":return b<c;case">":return b>c;case"contains":return 0<=b.indexOf(c);case"starts_with":return 0==b.indexOf(c);case"ends_with":{const a=b.length-c.length;if(0>a)return!1;const d=b.substring(a);return c==d}default:return console.error(`ERROR: ${a} is not known. showing field anyway`),!1}}function parseLogicType(a,b){return"any"===a?b.includes(!0):"all"===a?b.every(a=>!0===a):void 0}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjaGVja0NvbmRpdGlvbmFsTG9naWMiLCJjb25kaXRpb24iLCJmaWVsZHMiLCJydWxlcyIsImFjdGlvblR5cGUiLCJsb2dpY1R5cGUiLCJoaWRlQmFzZWRPblJ1bGVzIiwiZm9yRWFjaCIsImZpZWxkSWQiLCJ2YWx1ZSIsIm9wZXJhdG9yIiwiaSIsImZpZWxkVmFsdWUiLCJBcnJheSIsIm1hdGNoQ291bnQiLCJsZW5ndGgiLCJzdWJGaWVsZCIsInBhcnNlT3BlcmF0b3IiLCJoaWRlRmllbGQiLCJwYXJzZUxvZ2ljVHlwZSIsInJ1bGVWYWx1ZSIsImluZGV4T2YiLCJzdGFydCIsInRhaWwiLCJzdWJzdHJpbmciLCJjb25zb2xlIiwiZXJyb3IiLCJpbmNsdWRlcyIsImV2ZXJ5Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL0hlbHBlcnMvZm9ybS9jaGVja0NvbmRpdGlvbmFsTG9naWMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY2hlY2tDb25kaXRpb25hbExvZ2ljKGNvbmRpdGlvbiwgZmllbGRzID0gZmFsc2UpIHtcbiAgY29uc3QgeyBydWxlcywgYWN0aW9uVHlwZSwgbG9naWNUeXBlIH0gPSBjb25kaXRpb247XG4gIGlmICghcnVsZXMpIHJldHVybiB0cnVlO1xuXG4gIGNvbnN0IGhpZGVCYXNlZE9uUnVsZXMgPSBbXTtcblxuICBydWxlcy5mb3JFYWNoKCh7IGZpZWxkSWQsIHZhbHVlLCBvcGVyYXRvciB9LCBpKSA9PiB7XG4gICAgLy8gdGhlIGZpZWxkIHRoZSB1c2VyIHNlZXMgb24gdGhlIGZyb250ZW5kXG4gICAgY29uc3QgZmllbGRWYWx1ZSA9IGZpZWxkc1tmaWVsZElkXS52YWx1ZTtcblxuICAgIGlmIChmaWVsZFZhbHVlIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIGxldCBtYXRjaENvdW50ID0gMDtcbiAgICAgIGZpZWxkVmFsdWUubGVuZ3RoID4gMCAmJlxuICAgICAgICBmaWVsZFZhbHVlLmZvckVhY2goKHN1YkZpZWxkKSA9PiB7XG4gICAgICAgICAgaWYgKHBhcnNlT3BlcmF0b3Iob3BlcmF0b3IsIHZhbHVlLCBzdWJGaWVsZCkpIHtcbiAgICAgICAgICAgIG1hdGNoQ291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBjaGVjayBpZiBhbGwgdGhlIHZhbHVlcyBtYXRjaCB0aGUgcnVsZSB2YWx1ZS5cbiAgICAgIGhpZGVCYXNlZE9uUnVsZXNbaV0gPVxuICAgICAgICBvcGVyYXRvciA9PSAnaXNub3QnID8gbWF0Y2hDb3VudCA9PSB2YWx1ZS5sZW5ndGggOiBtYXRjaENvdW50ID4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY2hlY2sgaWYgdGhlIG1hdGNoVmFsdWUgYW5kIEZpZWxkIHZhbHVlIG1hdGNoXG4gICAgICBoaWRlQmFzZWRPblJ1bGVzW2ldID0gcGFyc2VPcGVyYXRvcihvcGVyYXRvciwgdmFsdWUsIGZpZWxkVmFsdWUpO1xuICAgIH1cbiAgfSk7XG5cbiAgbGV0IGhpZGVGaWVsZCA9IHBhcnNlTG9naWNUeXBlKGxvZ2ljVHlwZSwgaGlkZUJhc2VkT25SdWxlcyk7XG5cbiAgLy8gYmVjYXVzZSB3ZSB3ZXJlIGFzc3VtaW5nIGhpZGUgaWYgLi4uLiB3ZSB3YW50IHRvIGludmVyc2UgdGhhdFxuICBpZiAoYWN0aW9uVHlwZSA9PT0gJ3Nob3cnKSB7XG4gICAgaGlkZUZpZWxkID0gIWhpZGVGaWVsZDtcbiAgfVxuXG4gIHJldHVybiBoaWRlRmllbGQ7XG59XG5cbi8qKlxuICogdGhlc2UgcnVsZXMgcGFyc2UgdGhlIGNvbmRpdGlvbmFsIGxvZ2ljIG9iamVjdCBmcm9tIGdyYXZpdHlmb3Jtc1xuICogaW1wbGVtZW50czogaHR0cHM6Ly9kb2NzLmdyYXZpdHlmb3Jtcy5jb20vY29uZGl0aW9uYWwtbG9naWMtb2JqZWN0L1xuICogYmFzZWQgb246IGh0dHBzOi8vYml0YnVja2V0Lm9yZy9nb2hpa2UvZ3Jhdml0eWZvcm1zLW1pcnJvci9zcmMvNDdkZGM4YzIzNDNkMDkwZjI1ZDJjMDM4OTIxMjBkMDk1YmUwNjI0NS9qcy9jb25kaXRpb25hbF9sb2dpYy5qcz9hdD1tYXN0ZXIjY29uZGl0aW9uYWxfbG9naWMuanMtMzAxXG4gKiBAcGFyYW0ge3N0cmluZ30gb3BlcmF0b3JcbiAqIEBwYXJhbSB7Ym9vbH0gaGlkZUJhc2VkT25SdWxlcyBkb2VzIHRoZSBmaWVsZCBtYXRjaFxuICogQHBhcmFtIHtzdHJpbmd9IHJ1bGVWYWx1ZSB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIG9mIHRoZSBjb25kaXRpb25hbCBsb2dpY1xuICogQHBhcmFtIHtzdHJpbmcsaW50LGZsb2F0fSBmaWVsZFZhbHVlIHRoZSB2YWx1ZSBvZiB3aGF0IHRoZSB1c2VyIGVudGVyZWQgaW4gdGhlIGZpZWxkXG4gKiBAcmV0dXJucyB7Ym9vbH1cbiAqL1xuZnVuY3Rpb24gcGFyc2VPcGVyYXRvcihvcGVyYXRvciwgcnVsZVZhbHVlLCBmaWVsZFZhbHVlKSB7XG5cbiAgLy8gd2UgZG9udCBkbyBhbnl0aGluZyB3aXRoIGhpZGUgb3Igc2hvdy4gd2UgZG8gdGhhdCBsYXRlclxuICBzd2l0Y2ggKG9wZXJhdG9yKSB7XG4gICAgLy8gaXM6IEV2YWx1YXRlcyB0aGlzIHJ1bGUgdG8gdHJ1ZSB3aGVuIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGZpZWxkSWQgaXMgZXF1YWwgdG8gdmFsdWUuXG4gICAgY2FzZSAnaXMnOlxuICAgICAgcmV0dXJuIHJ1bGVWYWx1ZSA9PT0gZmllbGRWYWx1ZTtcblxuICAgIC8vIGlzbm90OiBFdmFsdWF0ZXMgdGhpcyBydWxlIHRvIHRydWUgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBmaWVsZElkIGlzIG5vdCBlcXVhbCB0byB2YWx1ZS5cbiAgICBjYXNlICdpc25vdCc6XG4gICAgICByZXR1cm4gcnVsZVZhbHVlICE9IGZpZWxkVmFsdWU7XG5cbiAgICAvLyA8OiBFdmFsdWF0ZXMgdGhpcyBydWxlIHRvIHRydWUgd2hlbiB0aGUgdmFsdWUgb2YgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBmaWVsZElkIGlzIGxlc3MgdGhhbiB2YWx1ZS5cbiAgICBjYXNlICc8JzpcbiAgICAgIHJldHVybiBydWxlVmFsdWUgPCBmaWVsZFZhbHVlO1xuXG4gICAgLy8gPjogRXZhbHVhdGVzIHRoaXMgcnVsZSB0byB0cnVlIHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgZmllbGRJZCBpcyBncmVhdGhlciB0aGFuIHZhbHVlLlxuICAgIGNhc2UgJz4nOlxuICAgICAgcmV0dXJuIHJ1bGVWYWx1ZSA+IGZpZWxkVmFsdWU7XG5cbiAgICAvLyBjb250YWluczogRXZhbHVhdGVzIHRoaXMgcnVsZSB0byB0cnVlIHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgZmllbGRJZCBjb250YWlucyB2YWx1ZS5cbiAgICBjYXNlICdjb250YWlucyc6XG4gICAgICByZXR1cm4gcnVsZVZhbHVlLmluZGV4T2YoZmllbGRWYWx1ZSkgPj0gMDsgXG5cbiAgICAvLyBzdGFydHNfd2l0aDogRXZhbHVhdGVzIHRoaXMgcnVsZSB0byB0cnVlIHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgZmllbGRJZCBzdGFydHMgd2l0aCB2YWx1ZS5cbiAgICBjYXNlICdzdGFydHNfd2l0aCc6XG4gICAgICByZXR1cm4gcnVsZVZhbHVlLmluZGV4T2YoZmllbGRWYWx1ZSkgPT0gMDtcblxuICAgIC8vIGVuZHNfd2l0aDogRXZhbHVhdGVzIHRoaXMgcnVsZSB0byB0cnVlIHdoZW4gdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgZmllbGRJZCBlbmRzIHdpdGggdmFsdWUuXG4gICAgY2FzZSAnZW5kc193aXRoJzp7XG4gICAgICBjb25zdCBzdGFydCA9IHJ1bGVWYWx1ZS5sZW5ndGggLSBmaWVsZFZhbHVlLmxlbmd0aDtcbiAgICAgIGlmKHN0YXJ0IDwgMCl7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhaWwgPSBydWxlVmFsdWUuc3Vic3RyaW5nKHN0YXJ0KTtcbiAgICAgIHJldHVybiBmaWVsZFZhbHVlID09IHRhaWw7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovXG4gICAgICBjb25zb2xlLmVycm9yKGBFUlJPUjogJHtvcGVyYXRvcn0gaXMgbm90IGtub3duLiBzaG93aW5nIGZpZWxkIGFueXdheWApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogcGFyc2UgdGhlIGxvZ2ljIHR5cGUgZm9yIG1hdGNoZWQgZmllbGRzXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9naWNUeXBlIEdGIGxvZ2ljIHR5cGUgdGhpcyBjb3VsZCBiZSBhbnkgb3IgYWxsXG4gKiBAcGFyYW0ge2FycmF5fX0gaGlkZUJhc2VkT25SdWxlc1xuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gcGFyc2VMb2dpY1R5cGUobG9naWNUeXBlLCBoaWRlQmFzZWRPblJ1bGVzKSB7XG4gIGlmIChsb2dpY1R5cGUgPT09ICdhbnknKSB7XG4gICAgcmV0dXJuIGhpZGVCYXNlZE9uUnVsZXMuaW5jbHVkZXModHJ1ZSk7XG4gIH1cbiAgaWYgKGxvZ2ljVHlwZSA9PT0gJ2FsbCcpIHtcbiAgICByZXR1cm4gaGlkZUJhc2VkT25SdWxlcy5ldmVyeSgoaSkgPT4gaSA9PT0gdHJ1ZSk7XG4gIH1cbn1cblxuZXhwb3J0IHsgcGFyc2VMb2dpY1R5cGUsIGNoZWNrQ29uZGl0aW9uYWxMb2dpYywgcGFyc2VPcGVyYXRvciB9O1xuIl0sIm1hcHBpbmdzIjoia01BQUEsUUFBUyxDQUFBQSxxQkFBcUJBLENBQUNDLENBQVMsQ0FBRUMsQ0FBTSxHQUFRLENBQUUsQ0FDeEQsS0FBTSxDQUFFQyxLQUFLLENBQUxBLENBQUssQ0FBRUMsVUFBVSxDQUFWQSxDQUFVLENBQUVDLFNBQVMsQ0FBVEEsQ0FBVSxDQUFDLENBQUdKLENBQVMsQ0FDbEQs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