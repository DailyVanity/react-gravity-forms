"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isomorphicUnfetch=_interopRequireDefault(require("isomorphic-unfetch")),_index=require("./index");async function onSubmit(a,b,c,d,e,f,g,h,i,j,k,l,m){const{onSubmit:n}=b,o=new FormData(a.target);a.preventDefault();const p=(0,_index.forceValidation)(d,c,j,k);if(!p)return!1;if(n)n(o);else{f(!0),h(!1),i(!1),l(!1),m(!1);const{formID:a,backendUrl:c,jumpToConfirmation:d,onSubmitSuccess:g,onError:j}=b,k=c.substring(0,c.indexOf("/wp-json"));(0,_isomorphicUnfetch.default)(`${k}/wp-json/gf/v2/forms/${a}/submissions`,{method:"POST",body:o}).then(a=>a.json()).then(a=>{if(a&&a.is_valid){if(g){const b=g(a);if(!b)return!1}const c=a.confirmation_message,{confirmation_type:i,confirmation_redirect:j}=c||!1;if(i&&j&&"redirect"===i&&"undefined"!=typeof window)return window.location.replace(j),!1;f(!1),h(!0),l(c),d&&(0,_index.scrollToConfirmation)(b,e)}else throw{response:a}}).catch(a=>{const c=a&&a.response&&a.response.validation_messages?a.response.validation_messages:"Something went wrong";j?(j(c),f(!1),i(!0)):(f(!1),i(!0),m(c)),d&&(0,_index.scrollToConfirmation)(b,e)})}}var _default=exports.default=onSubmit;