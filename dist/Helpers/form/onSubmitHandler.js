"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isomorphicUnfetch=_interopRequireDefault(require("isomorphic-unfetch")),_index=require("./index");async function onSubmit(a,b,c,d,e,f,g,h,i,j,k,l,m){const{onSubmit:n}=b,o=new FormData(a.target);a.preventDefault();const p=(0,_index.forceValidation)(d,c,j,k);if(!p)return!1;if(n)n(o);else{f(!0),h(!1),i(!1),l(!1),m(!1);const{formID:a,backendUrl:c,jumpToConfirmation:d,onSubmitSuccess:g,onError:j}=b,k=c.substring(0,c.indexOf("/wp-json"));(0,_isomorphicUnfetch.default)(`${k}/wp-json/gf/v2/forms/${a}/submissions`,{method:"POST",body:o}).then(a=>a.json()).then(a=>{if(a&&a.is_valid){if(g){const b=g(a);if(!b)return!1}const c=a.confirmation_message,{confirmation_type:i,confirmation_redirect:j}=c||!1;if(i&&j&&"redirect"===i&&"undefined"!=typeof window)return window.location.replace(j),!1;f(!1),h(!0),l(c),d&&(0,_index.scrollToConfirmation)(b,e)}else throw{response:a}}).catch(a=>{const c=a&&a.response&&a.response.validation_messages?a.response.validation_messages:"Something went wrong";j?(j(c),f(!1),i(!0)):(f(!1),i(!0),m(c)),d&&(0,_index.scrollToConfirmation)(b,e)})}}var _default=exports.default=onSubmit;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvblN1Ym1pdCIsImV2ZW50IiwicHJvcHMiLCJmb3JtVmFsdWVzIiwiYWN0aXZlUGFnZSIsIndyYXBwZXJSZWYiLCJzZXRTdWJtaXR0aW5nIiwic3VibWl0U3VjY2VzcyIsInNldFN1Ym1pdFN1Y2Nlc3MiLCJzZXRTdWJtaXRGYWlsZWQiLCJzZXRTaG93UGFnZVZhbGlkYXRpb25Nc2ciLCJzZXRUb3VjaGVkIiwic2V0Q29uZmlybWF0aW9uTWVzc2FnZSIsInNldEVycm9yTWVzc2FnZXMiLCJjdXN0b21PblN1Ym1pdCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJ0YXJnZXQiLCJwcmV2ZW50RGVmYXVsdCIsImlzUGFnZVZhbGlkIiwiZm9yY2VWYWxpZGF0aW9uIiwiZm9ybUlEIiwiYmFja2VuZFVybCIsImp1bXBUb0NvbmZpcm1hdGlvbiIsIm9uU3VibWl0U3VjY2VzcyIsIm9uRXJyb3IiLCJnZlN1Ym1pc3Npb25VcmwiLCJzdWJzdHJpbmciLCJpbmRleE9mIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwidGhlbiIsInJlc3AiLCJqc29uIiwicmVzcG9uc2UiLCJpc192YWxpZCIsInJlcyIsImNvbmZpcm1hdGlvbk1lc3NhZ2UiLCJjb25maXJtYXRpb25fbWVzc2FnZSIsImNvbmZpcm1hdGlvbl90eXBlIiwiY29uZmlybWF0aW9uX3JlZGlyZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJyZXBsYWNlIiwic2Nyb2xsVG9Db25maXJtYXRpb24iLCJjYXRjaCIsImVycm9yIiwiZXJyb3JNZXNzYWdlcyIsInZhbGlkYXRpb25fbWVzc2FnZXMiLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL0hlbHBlcnMvZm9ybS9vblN1Ym1pdEhhbmRsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZldGNoIGZyb20gXCJpc29tb3JwaGljLXVuZmV0Y2hcIjtcbmltcG9ydCB7IGZvcmNlVmFsaWRhdGlvbiwgc2Nyb2xsVG9Db25maXJtYXRpb24gfSBmcm9tIFwiLi9pbmRleFwiO1xuXG5hc3luYyBmdW5jdGlvbiBvblN1Ym1pdChcbiAgZXZlbnQsXG4gIHByb3BzLFxuICBmb3JtVmFsdWVzLFxuICBhY3RpdmVQYWdlLFxuICB3cmFwcGVyUmVmLFxuICBzZXRTdWJtaXR0aW5nLFxuICBzdWJtaXRTdWNjZXNzLFxuICBzZXRTdWJtaXRTdWNjZXNzLFxuICBzZXRTdWJtaXRGYWlsZWQsXG4gIHNldFNob3dQYWdlVmFsaWRhdGlvbk1zZyxcbiAgc2V0VG91Y2hlZCxcbiAgc2V0Q29uZmlybWF0aW9uTWVzc2FnZSxcbiAgc2V0RXJyb3JNZXNzYWdlc1xuKSB7XG4gIGNvbnN0IHsgb25TdWJtaXQ6IGN1c3RvbU9uU3VibWl0IH0gPSBwcm9wcztcbiAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZXZlbnQudGFyZ2V0KTtcblxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0IGlzUGFnZVZhbGlkID0gZm9yY2VWYWxpZGF0aW9uKFxuICAgIGFjdGl2ZVBhZ2UsXG4gICAgZm9ybVZhbHVlcyxcbiAgICBzZXRTaG93UGFnZVZhbGlkYXRpb25Nc2csXG4gICAgc2V0VG91Y2hlZFxuICApO1xuICBpZiAoIWlzUGFnZVZhbGlkKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKGN1c3RvbU9uU3VibWl0KSB7XG4gICAgY3VzdG9tT25TdWJtaXQoZm9ybURhdGEpO1xuICB9IGVsc2Uge1xuICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7XG4gICAgc2V0U3VibWl0U3VjY2VzcyhmYWxzZSk7XG4gICAgc2V0U3VibWl0RmFpbGVkKGZhbHNlKTtcbiAgICBzZXRDb25maXJtYXRpb25NZXNzYWdlKGZhbHNlKTtcbiAgICBzZXRFcnJvck1lc3NhZ2VzKGZhbHNlKTtcblxuICAgIGNvbnN0IHsgZm9ybUlELCBiYWNrZW5kVXJsLCBqdW1wVG9Db25maXJtYXRpb24sIG9uU3VibWl0U3VjY2Vzcywgb25FcnJvciB9ID1cbiAgICAgIHByb3BzO1xuICAgIGNvbnN0IGdmU3VibWlzc2lvblVybCA9IGJhY2tlbmRVcmwuc3Vic3RyaW5nKFxuICAgICAgMCxcbiAgICAgIGJhY2tlbmRVcmwuaW5kZXhPZihcIi93cC1qc29uXCIpXG4gICAgKTtcblxuICAgIGZldGNoKGAke2dmU3VibWlzc2lvblVybH0vd3AtanNvbi9nZi92Mi9mb3Jtcy8ke2Zvcm1JRH0vc3VibWlzc2lvbnNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgYm9keTogZm9ybURhdGEsXG4gICAgfSlcbiAgICAgIC50aGVuKHJlc3AgPT4gcmVzcC5qc29uKCkpXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5pc192YWxpZCkge1xuICAgICAgICAgIGlmIChvblN1Ym1pdFN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IG9uU3VibWl0U3VjY2VzcyhyZXNwb25zZSk7XG4gICAgICAgICAgICBpZiAoIXJlcykge1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNvbmZpcm1hdGlvbk1lc3NhZ2UgPSByZXNwb25zZS5jb25maXJtYXRpb25fbWVzc2FnZTtcbiAgICAgICAgICBjb25zdCB7IGNvbmZpcm1hdGlvbl90eXBlLCBjb25maXJtYXRpb25fcmVkaXJlY3QgfSA9IGNvbmZpcm1hdGlvbk1lc3NhZ2UgfHwgZmFsc2U7XG4gICAgICAgICAgaWYgKGNvbmZpcm1hdGlvbl90eXBlICYmIGNvbmZpcm1hdGlvbl9yZWRpcmVjdCAmJiBjb25maXJtYXRpb25fdHlwZSA9PT0gXCJyZWRpcmVjdFwiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShjb25maXJtYXRpb25fcmVkaXJlY3QpO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuICAgICAgICAgIHNldFN1Ym1pdFN1Y2Nlc3ModHJ1ZSk7XG4gICAgICAgICAgc2V0Q29uZmlybWF0aW9uTWVzc2FnZShjb25maXJtYXRpb25NZXNzYWdlKTtcblxuICAgICAgICAgIGlmIChqdW1wVG9Db25maXJtYXRpb24pIHtcbiAgICAgICAgICAgIHNjcm9sbFRvQ29uZmlybWF0aW9uKHByb3BzLCB3cmFwcGVyUmVmKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cge1xuICAgICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZXMgPVxuICAgICAgICAgIGVycm9yICYmIGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnZhbGlkYXRpb25fbWVzc2FnZXNcbiAgICAgICAgICAgID8gZXJyb3IucmVzcG9uc2UudmFsaWRhdGlvbl9tZXNzYWdlc1xuICAgICAgICAgICAgOiBcIlNvbWV0aGluZyB3ZW50IHdyb25nXCI7XG5cbiAgICAgICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICAgICBvbkVycm9yKGVycm9yTWVzc2FnZXMpO1xuICAgICAgICAgIHNldFN1Ym1pdHRpbmcoZmFsc2UpO1xuICAgICAgICAgIHNldFN1Ym1pdEZhaWxlZCh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTtcbiAgICAgICAgICBzZXRTdWJtaXRGYWlsZWQodHJ1ZSk7XG4gICAgICAgICAgc2V0RXJyb3JNZXNzYWdlcyhlcnJvck1lc3NhZ2VzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdW1wVG9Db25maXJtYXRpb24pIHtcbiAgICAgICAgICBzY3JvbGxUb0NvbmZpcm1hdGlvbihwcm9wcywgd3JhcHBlclJlZik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG9uU3VibWl0O1xuIl0sIm1hcHBpbmdzIjoicVJBR0EsY0FBZSxDQUFBQSxRQUFRQSxDQUNyQkMsQ0FBSyxDQUNMQyxDQUFLLENBQ0xDLENBQVUsQ0FDVkMsQ0FBVSxDQUNWQyxDQUFVLENBQ1ZDLENBQWEsQ0FDYkMsQ0FBYSxDQUNiQyxDQUFnQixDQUNoQkMsQ0FBZSxDQUNmQyxDQUF3QixDQUN4QkMsQ0FBVSxDQUNWQyxDQUFzQixDQUN0QkMsQ0FBZ0IsQ0FDaEIsTUFDTSxDQUFFYixRQUFRLENBQUVjLENBQWUsQ0FBQyxDQUFHWixDQUFLLENBQ3BDYSxDQUFRLENBQUcsR0FBSSxDQUFBQyxRQUFRLENBQUNmLENBQUssQ0FBQ2dCLE1BQU0sQ0FBQyxDQUUzQ2hCLENBQUssQ0FBQ2lCLGNBQWMsQ0FBQyxDQUFDLENBRXRCLEtBQU0sQ0FBQUMsQ0FBVyxDQUFHLEdBQUFDLHNCQUFlLEVBQ2pDaEIsQ0FBVSxDQUNWRCxDQUFVLENBQ1ZPLENBQXdCLENBQ3hCQyxDQUNGLENBQUMsQ0FDRCxHQUFJLENBQUNRLENBQVcsQ0FBRSxTQUVsQixHQUFJTCxDQUFjLENBQ2hCQSxDQUFjLENBQUNDLENBQVEsQ0FBQyxLQUNuQixDQUNMVCxDQUFhLEdBQUssQ0FBQyxDQUNuQkUsQ0FBZ0IsR0FBTSxDQUFDLENBQ3ZCQyxDQUFlLEdBQU0sQ0FBQyxDQUN0QkcsQ0FBc0IsR0FBTSxDQUFDLENBQzdCQyxDQUFnQixHQUFNLENBQUMsTUFFakIsQ0FBRVEsTUFBTSxDQUFOQSxDQUFNLENBQUVDLFVBQVUsQ0FBVkEsQ0FBVSxDQUFFQyxrQkFBa0IsQ0FBbEJBLENBQWtCLENBQUVDLGVBQWUsQ0FBZkEsQ0FBZSxDQUFFQyxPQUFPLENBQVBBLENBQVEsQ0FBQyxDQUN4RXZCLENBQUssQ0FDRHdCLENBQWUsQ0FBR0osQ0FBVSxDQUFDSyxTQUFTLENBQzFDLENBQUMsQ0FDREwsQ0FBVSxDQUFDTSxPQUFPLENBQUMsVUFBVSxDQUMvQixDQUFDLENBRUQsR0FBQUMsMEJBQUssRUFBRSxHQUFFSCxDQUFnQix3QkFBdUJMLENBQU8sY0FBYSxDQUFFLENBQ3BFUyxNQUFNLENBQUUsTUFBTSxDQUNkQyxJQUFJLENBQUVoQixDQUNSLENBQUMsQ0FBQyxDQUNDaUIsSUFBSSxDQUFDQyxDQUFJLEVBQUlBLENBQUksQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUN6QkYsSUFBSSxDQUFDRyxDQUFRLEVBQUksQ0FDaEIsR0FBSUEsQ0FBUSxFQUFJQSxDQUFRLENBQUNDLFFBQVEsQ0FBRSxDQUNqQyxHQUFJWixDQUFlLENBQUUsQ0FDbkIsS0FBTSxDQUFBYSxDQUFHLENBQUdiLENBQWUsQ0FBQ1csQ0FBUSxDQUFDLENBQ3JDLEdBQUksQ0FBQ0UsQ0FBRyxDQUNOLFFBRUosQ0FBQyxLQUNLLENBQUFDLENBQW1CLENBQUdILENBQVEsQ0FBQ0ksb0JBQW9CLENBQ25ELENBQUVDLGlCQUFpQixDQUFqQkEsQ0FBaUIsQ0FBRUMscUJBQXFCLENBQXJCQSxDQUFzQixDQUFDLENBQUdILENBQW1CLElBQVMsQ0FDakYsR0FBSUUsQ0FBaUIsRUFBSUMsQ0FBcUIsRUFBMEIsVUFBVSxHQUFoQ0QsQ0FBZ0MsRUFDMUQsV0FBVyxFQUE3QixNQUFPLENBQUFFLE1BQXNCLENBRS9CLE1BREEsQ0FBQUEsTUFBTSxDQUFDQyxRQUFRLENBQUNDLE9BQU8sQ0FBQ0gsQ0FBcUIsQ0FBQyxJQUlsRG5DLENBQWEsR0FBTSxDQUFDLENBQ3BCRSxDQUFnQixHQUFLLENBQUMsQ0FDdEJJLENBQXNCLENBQUMwQixDQUFtQixDQUFDLENBRXZDZixDQUFrQixFQUNwQixHQUFBc0IsMkJBQW9CLEVBQUMzQyxDQUFLLENBQUVHLENBQVUsQ0FFMUMsQ0FBQyxJQUNDLE1BQU0sQ0FDSjhCLFFBQVEsQ0FBUkEsQ0FDRixDQUVKLENBQUMsQ0FBQyxDQUNEVyxLQUFLLENBQUNDLENBQUssRUFBSSxDQUNkLEtBQU0sQ0FBQUMsQ0FBYSxDQUNqQkQsQ0FBSyxFQUFJQSxDQUFLLENBQUNaLFFBQVEsRUFBSVksQ0FBSyxDQUFDWixRQUFRLENBQUNjLG1CQUFtQixDQUN6REYsQ0FBSyxDQUFDWixRQUFRLENBQUNjLG1CQUFtQixDQUNsQyxzQkFBc0IsQ0FFeEJ4QixDQUFPLEVBQ1RBLENBQU8sQ0FBQ3VCLENBQWEsQ0FBQyxDQUN0QjFDLENBQWEsR0FBTSxDQUFDLENBQ3BCRyxDQUFlLEdBQUssQ0FBQyxHQUVyQkgsQ0FBYSxHQUFNLENBQUMsQ0FDcEJHLENBQWUsR0FBSyxDQUFDLENBQ3JCSSxDQUFnQixDQUFDbUMsQ0FBYSxDQUFDLEVBRzdCekIsQ0FBa0IsRUFDcEIsR0FBQXNCLDJCQUFvQixFQUFDM0MsQ0FBSyxDQUFFRyxDQUFVLENBRTFDLENBQUMsQ0FDTCxDQUNGLENBQUMsSUFBQTZDLFFBQUEsQ0FBQUMsT0FBQSxDQUFBQyxPQUFBLENBRWNwRCxRQUFRIn0=