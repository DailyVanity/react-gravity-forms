"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _isomorphicUnfetch=_interopRequireDefault(require("isomorphic-unfetch")),_index=require("./index"),_validation=require("../validation"),_checkConditionalLogic=require("./checkConditionalLogic");async function fetchForm({initialPage:a,fetchOptions:b,setFormData:c,setFormValues:d,setActivePage:e,setConditionFields:f,setConditionalIds:g,setPages:h,setIsMultiPart:i,populatedFields:j,populatedEntry:k,getParams:l,backendUrl:m,formID:n}){let o=!1;const p=l?Object.keys(l).map(a=>`${a}=${l[a]}`).join("&"):"",q=`${m}/${n}${p?`?${p}`:""}`,r=await(0,_isomorphicUnfetch.default)(q,b).then(a=>a.json()).then(a=>a).catch(a=>console.log(a));if(r){const b={},l=[],m=[],n=[];for(const a of r.fields){let c;if("page"===a.type&&n.push(a.id),c=(0,_index.getFieldPrepopulatedValue)(a,j,k),"fileupload"===a.type&&(o=!0),a.conditionalLogic){const b={id:a.id,conditionalLogic:a.conditionalLogic},c=a.conditionalLogic.rules.map(a=>a.fieldId);for(let a=0;a<c.length;a++){const b=parseInt(c[a]);-1===m.indexOf(b)&&m.push(b)}l.push(b)}b[a.id]={valid:(0,_validation.validateField)(c,a),value:c,label:a.label,pageNumber:a.pageNumber,cssClass:a.cssClass,isRequired:a.isRequired,type:a.type,inputName:a.inputName}}for(let a=0;a<l.length;a++)b[l[a].id].hideField=(0,_checkConditionalLogic.checkConditionalLogic)(l[a].conditionalLogic,b);c(r),d(b),e(a||!!r.pagination&&1),f(l),g(m),o&&i(o),!n.length||h(n)}}var _default=exports.default=fetchForm;