"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateField=exports.isRequired=exports.isEmail=exports.isUrl=exports.checkboxValidation=exports.selectValidation=exports.isEmpty=void 0;function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var getMessage=function(a,b){return!!b&&(a&&"object"===_typeof(a)&&a[b]?a[b]:a)},isEmail=function(a,b){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!c.test(a)){var d=getMessage(b,"email");return d||"Enter a valid email"}return!1};exports.isEmail=isEmail;var isUrl=function(a,b){var c=/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i;if(!c.test(a)){var d=getMessage(b,"url");return d||"Enter a valid url"}return!1};exports.isUrl=isUrl;var isEmpty=function(a){return!a};exports.isEmpty=isEmpty;var isRequired=function(a,b,c){if(a&&b){var d=getMessage(c,"required");return d||"This field is required"}return!1};exports.isRequired=isRequired;var selectValidation=function(a,b,c){return!(b===c&&a)};exports.selectValidation=selectValidation;var checkboxValidation=function(a,b){return!!(1>a.length)&&(b||"This field is required")};exports.checkboxValidation=checkboxValidation;var passwordValidation=function(a,b){var c=b||!1,d=c.inputs,e=c.isRequired,f=c.errorMessage,g=f||!1,h=g.required,i=g.mismatch,j=a&&a.filter(function(a){return a&&""===a.val}).length;return(a&&0===a.length||j===d.length)&&e?h||"This field is required":!!(a&&2===a.length&&d&&2===d.length&&a[1]&&a[0]&&""!==a[1].val&&a[1].val!==a[0].val)&&(i||"Mismatch")},isDate=function(a){for(var b=[],c=0;c<a.length;c++)if(a[c]){var d=a[c],e=d.val,f=d.label;if(e)if("MM"===f){(e.length>2||e<1||12<e)&&(b[c]={index:c,message:"Enter a valid month"})}else if("DD"===f){(e.length>2||e<1||31<e)&&(b[c]={index:c,message:"Enter a valid date"})}else if("YYYY"===f){var g=new Date().getFullYear()+1;(e.length>4||e<1920||e>g)&&(b[c]={index:c,message:"Enter a valid year"})}}return b},validateField=function(a,b){var c=b.type,d=b.isRequired;if(("checkbox"===c||"radio"===c)&&d)return checkboxValidation(a,b.errorMessage);if("password"===c)return passwordValidation(a,b);var e=isEmpty(a),f="",g=!!(b&&b.errorMessage)&&b.errorMessage;if(f=!!d&&isRequired(d,e,g),!f&&!e)if("email"===c)f=isEmail(a,g);else if("website"===c)f=isUrl(a,g);else if("date"===c){var h=!0;h=b.dateType&&"datepicker"===b.dateType?!!d&&isRequired(d,e,g):isDate(a,b),f=!!(0<h.length)&&h}return f};exports.validateField=validateField;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9IZWxwZXJzL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiZ2V0TWVzc2FnZSIsIm1lc3NhZ2UiLCJ0eXBlIiwiaXNFbWFpbCIsImVtYWlsIiwicmUiLCJ0ZXN0IiwiY3VzdG9tTWVzc2FnZSIsImlzVXJsIiwic3RyIiwicGF0dGVybiIsImlzRW1wdHkiLCJ2YWx1ZSIsImlzUmVxdWlyZWQiLCJyZXF1aXJlZCIsImVtcHR5Iiwic2VsZWN0VmFsaWRhdGlvbiIsInBsYWNlaG9sZGVyIiwiY2hlY2tib3hWYWxpZGF0aW9uIiwidmFsdWVzIiwibGVuZ3RoIiwicGFzc3dvcmRWYWxpZGF0aW9uIiwiZmllbGQiLCJpbnB1dHMiLCJlcnJvck1lc3NhZ2UiLCJyZXF1aXJlZE1zZyIsIm1pc21hdGNoIiwiaXNJbnB1dHNFbXB0eSIsImZpbHRlciIsIml0ZW0iLCJ2YWwiLCJpc0RhdGUiLCJ2YWxpZGF0aW9uIiwiaSIsImxhYmVsIiwiaW5kZXgiLCJtYXgiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJ2YWxpZGF0ZUZpZWxkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpc1ZhbGlkIiwiZGF0ZVR5cGUiXSwibWFwcGluZ3MiOiJpZEFBTUEsQ0FBQUEsVUFBVSxDQUFHLFNBQUNDLENBQUQsQ0FBVUMsQ0FBVixDQUFtQixTQUMvQkEsQ0FEK0IsR0FFaENELENBQU8sRUFBdUIsUUFBbkIsV0FBT0EsQ0FBUCxDQUFYLEVBQTBDQSxDQUFPLENBQUNDLENBQUQsQ0FGakIsQ0FHM0JELENBQU8sQ0FBQ0MsQ0FBRCxDQUhvQixDQUs3QkQsQ0FMNkIsQ0FNckMsQyxDQUVLRSxPQUFPLENBQUcsU0FBQ0MsQ0FBRCxDQUFRSCxDQUFSLENBQW9CLENBQ2xDLEdBQU1JLENBQUFBLENBQUUsQ0FBRyx3SkFBWCxDQUNBLEdBQUksQ0FBQ0EsQ0FBRSxDQUFDQyxJQUFILENBQVFGLENBQVIsQ0FBTCxDQUFxQixDQUNuQixHQUFNRyxDQUFBQSxDQUFhLENBQUdQLFVBQVUsQ0FBQ0Ms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QUFvQixDQUFqQixDQUFBQyxDQUFPLENBQUNyQixNQUFYLEdBQXdCcUIsQ0FDMUMsQ0FFSCxNQUFPRCxDQUFBQSxDQUNSLEMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnZXRNZXNzYWdlID0gKG1lc3NhZ2UsIHR5cGUpID0+IHtcbiAgaWYgKCF0eXBlKSByZXR1cm4gZmFsc2U7XG4gIGlmIChtZXNzYWdlICYmIHR5cGVvZiBtZXNzYWdlID09PSBcIm9iamVjdFwiICYmIG1lc3NhZ2VbdHlwZV0pIHtcbiAgICByZXR1cm4gbWVzc2FnZVt0eXBlXTtcbiAgfVxuICByZXR1cm4gbWVzc2FnZTtcbn07XG5cbmNvbnN0IGlzRW1haWwgPSAoZW1haWwsIG1lc3NhZ2UpID0+IHtcbiAgY29uc3QgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgaWYgKCFyZS50ZXN0KGVtYWlsKSkge1xuICAgIGNvbnN0IGN1c3RvbU1lc3NhZ2UgPSBnZXRNZXNzYWdlKG1lc3NhZ2UsIFwiZW1haWxcIik7XG4gICAgcmV0dXJuIGN1c3RvbU1lc3NhZ2UgfHwgXCJFbnRlciBhIHZhbGlkIGVtYWlsXCI7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgaXNVcmwgPSAoc3RyLCBtZXNzYWdlKSA9PiB7XG4gIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKFxuICAgIFwiXihodHRwcz86XFxcXC9cXFxcLyk/XCIgKyAvLyBwcm90b2NvbFxuICAgIFwiKCgoW2EtelxcXFxkXShbYS16XFxcXGQtXSpbYS16XFxcXGRdKSopXFxcXC4pK1thLXpdezIsfXxcIiArIC8vIGRvbWFpbiBuYW1lXG4gICAgXCIoKFxcXFxkezEsM31cXFxcLil7M31cXFxcZHsxLDN9KSlcIiArIC8vIE9SIGlwICh2NCkgYWRkcmVzc1xuICAgIFwiKFxcXFw6XFxcXGQrKT8oXFxcXC9bLWEtelxcXFxkJV8ufitdKikqXCIgKyAvLyBwb3J0IGFuZCBwYXRoXG4gICAgXCIoXFxcXD9bOyZhLXpcXFxcZCVfLn4rPS1dKik/XCIgKyAvLyBxdWVyeSBzdHJpbmdcbiAgICAgIFwiKFxcXFwjWy1hLXpcXFxcZF9dKik/JFwiLFxuICAgIFwiaVwiXG4gICk7IC8vIGZyYWdtZW50IGxvY2F0b3JcbiAgaWYgKCFwYXR0ZXJuLnRlc3Qoc3RyKSkge1xuICAgIGNvbnN0IGN1c3RvbU1lc3NhZ2UgPSBnZXRNZXNzYWdlKG1lc3NhZ2UsIFwidXJsXCIpO1xuICAgIHJldHVybiBjdXN0b21NZXNzYWdlIHx8IFwiRW50ZXIgYSB2YWxpZCB1cmxcIjtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBpc0VtcHR5ID0gdmFsdWUgPT4ge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgaXNSZXF1aXJlZCA9IChyZXF1aXJlZCwgZW1wdHksIG1lc3NhZ2UpID0+IHtcbiAgaWYgKHJlcXVpcmVkICYmIGVtcHR5KSB7XG4gICAgY29uc3QgY3VzdG9tTWVzc2FnZSA9IGdldE1lc3NhZ2UobWVzc2FnZSwgXCJyZXF1aXJlZFwiKTtcbiAgICByZXR1cm4gY3VzdG9tTWVzc2FnZSB8fCBcIlRoaXMgZmllbGQgaXMgcmVxdWlyZWRcIjtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBzZWxlY3RWYWxpZGF0aW9uID0gKHJlcXVpcmVkLCB2YWx1ZSwgcGxhY2Vob2xkZXIpID0+XG4gICEodmFsdWUgPT09IHBsYWNlaG9sZGVyICYmIHJlcXVpcmVkKTtcblxuY29uc3QgY2hlY2tib3hWYWxpZGF0aW9uID0gKHZhbHVlcywgbWVzc2FnZSkgPT4ge1xuICBpZiAodmFsdWVzLmxlbmd0aCA8IDEpIHtcbiAgICByZXR1cm4gbWVzc2FnZSB8fCBcIlRoaXMgZmllbGQgaXMgcmVxdWlyZWRcIjtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBwYXNzd29yZFZhbGlkYXRpb24gPSAodmFsdWVzLCBmaWVsZCkgPT4ge1xuICBjb25zdCB7IGlucHV0cywgaXNSZXF1aXJlZDogcmVxdWlyZWQsIGVycm9yTWVzc2FnZSB9ID0gZmllbGQgfHwgZmFsc2U7XG4gIGNvbnN0IHsgcmVxdWlyZWQ6IHJlcXVpcmVkTXNnLCBtaXNtYXRjaCB9ID0gZXJyb3JNZXNzYWdlIHx8IGZhbHNlO1xuXG4gIC8vIGNoZWNrIGlmIGZpZWxkcyBpcyByZXF1aXJlZCBhbmQgaXNuJ3QgZW1wdHlcbiAgY29uc3QgaXNJbnB1dHNFbXB0eSA9XG4gICAgdmFsdWVzICYmIHZhbHVlcy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udmFsID09PSBcIlwiKS5sZW5ndGg7XG5cbiAgaWYgKFxuICAgICgodmFsdWVzICYmIHZhbHVlcy5sZW5ndGggPT09IDApIHx8IGlzSW5wdXRzRW1wdHkgPT09IGlucHV0cy5sZW5ndGgpICYmXG4gICAgcmVxdWlyZWRcbiAgKSB7XG4gICAgcmV0dXJuIHJlcXVpcmVkTXNnIHx8IFwiVGhpcyBmaWVsZCBpcyByZXF1aXJlZFwiO1xuICB9XG5cbiAgLy8gaWYgdGhlcmUgaXMgcmVwZWF0IHBhc3N3b3JkIGZpZWxkID0+IGNoZWNrIGlmIG1hdGNoXG4gIGlmICh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCA9PT0gMiAmJiBpbnB1dHMgJiYgaW5wdXRzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChcbiAgICAgIHZhbHVlc1sxXSAmJlxuICAgICAgdmFsdWVzWzBdICYmXG4gICAgICB2YWx1ZXNbMV0udmFsICE9PSBcIlwiICYmXG4gICAgICB2YWx1ZXNbMV0udmFsICE9PSB2YWx1ZXNbMF0udmFsXG4gICAgKSB7XG4gICAgICByZXR1cm4gbWlzbWF0Y2ggfHwgXCJNaXNtYXRjaFwiO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGlzRGF0ZSA9ICh2YWx1ZXMsIGZpZWxkKSA9PiB7XG4gIGNvbnN0IHZhbGlkYXRpb24gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodmFsdWVzW2ldKSB7XG4gICAgICBjb25zdCB7IHZhbCwgbGFiZWwgfSA9IHZhbHVlc1tpXTtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgaWYgKGxhYmVsID09PSBcIk1NXCIpIHtcbiAgICAgICAgICBjb25zdCBtYXggPSAxMjtcbiAgICAgICAgICBjb25zdCBtaW4gPSAxO1xuICAgICAgICAgIGNvbnN0IG1heExlbmd0aCA9IDI7XG4gICAgICAgICAgaWYgKHZhbC5sZW5ndGggPiBtYXhMZW5ndGggfHwgdmFsIDwgbWluIHx8IHZhbCA+IG1heCkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbltpXSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRW50ZXIgYSB2YWxpZCBtb250aFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsYWJlbCA9PT0gXCJERFwiKSB7XG4gICAgICAgICAgY29uc3QgbWF4ID0gMzE7XG4gICAgICAgICAgY29uc3QgbWluID0gMTtcbiAgICAgICAgICBjb25zdCBtYXhMZW5ndGggPSAyO1xuICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gbWF4TGVuZ3RoIHx8IHZhbCA8IG1pbiB8fCB2YWwgPiBtYXgpIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb25baV0gPSB7XG4gICAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIkVudGVyIGEgdmFsaWQgZGF0ZVwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsYWJlbCA9PT0gXCJZWVlZXCIpIHtcbiAgICAgICAgICBjb25zdCBtYXggPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkgKyAxO1xuICAgICAgICAgIGNvbnN0IG1pbiA9IDE5MjA7XG4gICAgICAgICAgY29uc3QgbWF4TGVuZ3RoID0gNDtcbiAgICAgICAgICBpZiAodmFsLmxlbmd0aCA+IG1heExlbmd0aCB8fCB2YWwgPCBtaW4gfHwgdmFsID4gbWF4KSB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uW2ldID0ge1xuICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJFbnRlciBhIHZhbGlkIHllYXJcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbGlkYXRpb247XG59O1xuXG5jb25zdCB2YWxpZGF0ZUZpZWxkID0gKHZhbHVlLCBmaWVsZCkgPT4ge1xuICBjb25zdCB7IHR5cGUsIGlzUmVxdWlyZWQ6IHJlcXVpcmVkIH0gPSBmaWVsZDtcbiAgLy8gQ2hlY2sgZmlyc3QgaWYgcmVxdXJpZWQgY2hlY2tib3ggb3IgcmFkaW9cbiAgaWYgKCh0eXBlID09PSBcImNoZWNrYm94XCIgfHwgdHlwZSA9PT0gXCJyYWRpb1wiKSAmJiByZXF1aXJlZCkge1xuICAgIHJldHVybiBjaGVja2JveFZhbGlkYXRpb24odmFsdWUsIGZpZWxkLmVycm9yTWVzc2FnZSk7XG4gIH1cblxuICBpZiAodHlwZSA9PT0gXCJwYXNzd29yZFwiKSB7XG4gICAgcmV0dXJuIHBhc3N3b3JkVmFsaWRhdGlvbih2YWx1ZSwgZmllbGQpO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgZW1wdHlcbiAgY29uc3QgZW1wdHkgPSBpc0VtcHR5KHZhbHVlKTtcbiAgbGV0IHZhbGlkYXRpb25NZXNzYWdlID0gXCJcIjtcbiAgY29uc3QgbWVzc2FnZSA9IGZpZWxkICYmIGZpZWxkLmVycm9yTWVzc2FnZSA/IGZpZWxkLmVycm9yTWVzc2FnZSA6IGZhbHNlO1xuICAvLyBTZXQgdmFsaWRhdGlvbiBtZXNzYWdlIGlmIHJlcXVpcmVkXG4gIHZhbGlkYXRpb25NZXNzYWdlID0gcmVxdWlyZWQgPyBpc1JlcXVpcmVkKHJlcXVpcmVkLCBlbXB0eSwgbWVzc2FnZSkgOiBmYWxzZTtcbiAgLy8gU2V0IG90aGVyIHZhbGlkYXRpb24gbWVzc2FnZXNcbiAgaWYgKCF2YWxpZGF0aW9uTWVzc2FnZSAmJiAhZW1wdHkpIHtcbiAgICBpZiAodHlwZSA9PT0gXCJlbWFpbFwiKSB7XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZSA9IGlzRW1haWwodmFsdWUsIG1lc3NhZ2UpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJ3ZWJzaXRlXCIpIHtcbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlID0gaXNVcmwodmFsdWUsIG1lc3NhZ2UpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJkYXRlXCIpIHtcbiAgICAgIGxldCBpc1ZhbGlkID0gdHJ1ZTtcbiAgICAgIGlmIChmaWVsZC5kYXRlVHlwZSAmJiBmaWVsZC5kYXRlVHlwZSA9PT0gXCJkYXRlcGlja2VyXCIpIHtcbiAgICAgICAgaXNWYWxpZCA9IHJlcXVpcmVkID8gaXNSZXF1aXJlZChyZXF1aXJlZCwgZW1wdHksIG1lc3NhZ2UpIDogZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpc1ZhbGlkID0gaXNEYXRlKHZhbHVlLCBmaWVsZCk7XG4gICAgICB9XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZSA9IGlzVmFsaWQubGVuZ3RoID4gMCA/IGlzVmFsaWQgOiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbGlkYXRpb25NZXNzYWdlO1xufTtcblxuZXhwb3J0IHtcbiAgaXNFbXB0eSxcbiAgc2VsZWN0VmFsaWRhdGlvbixcbiAgY2hlY2tib3hWYWxpZGF0aW9uLFxuICBpc1VybCxcbiAgaXNFbWFpbCxcbiAgaXNSZXF1aXJlZCxcbiAgdmFsaWRhdGVGaWVsZFxufTtcbiJdfQ==