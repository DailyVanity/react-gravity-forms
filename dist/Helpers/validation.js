"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateField=exports.isRequired=exports.isEmail=exports.isUrl=exports.checkboxValidation=exports.selectValidation=exports.isEmpty=void 0;function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var getMessage=function(a,b){return!!b&&(a&&"object"===_typeof(a)&&a[b]?a[b]:a)},isEmail=function(a,b){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!c.test(a)){var d=getMessage(b,"email");return d||"Enter a valid email"}return!1};exports.isEmail=isEmail;var isUrl=function(a,b){var c=/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i;if(!c.test(a)){var d=getMessage(b,"url");return d||"Enter a valid url"}return!1};exports.isUrl=isUrl;var isEmpty=function(a){return!a};exports.isEmpty=isEmpty;var isRequired=function(a,b,c){if(a&&b){var d=getMessage(c,"required");return d||"This field is required"}return!1};exports.isRequired=isRequired;var selectValidation=function(a,b,c){return!(b===c&&a)};exports.selectValidation=selectValidation;var checkboxValidation=function(a,b){return!!(1>a.length)&&(b||"This field is required")};exports.checkboxValidation=checkboxValidation;var emailValidation=function(a,b){var c=b||!1,d=c.inputs,e=c.isRequired,f=c.errorMessage,g=f||!1,h=g.required,j=g.mismatch,k=a&&a.filter(function(a){return a&&""===a.val}).length;if((a&&2>a.length||0!==k)&&e)return h||"This field is required";if(a&&0<a.length)for(var l,m=0;a.length>m;m++)if(l=isEmail(a[m].val),l)return console.log(l),l;return!!(a&&2===a.length&&d&&2===d.length&&a[1]&&a[0]&&""!==a[1].val&&a[1].val!==a[0].val)&&(j||"Mismatch")},passwordValidation=function(a,b){var c=b||!1,d=c.inputs,e=c.isRequired,f=c.errorMessage,g=f||!1,h=g.required,i=g.mismatch,j=a&&a.filter(function(a){return a&&""===a.val}).length;return(a&&0===a.length||j===d.length)&&e?h||"This field is required":!!(a&&2===a.length&&d&&2===d.length&&a[1]&&a[0]&&""!==a[1].val&&a[1].val!==a[0].val)&&(i||"Mismatch")},isDate=function(a){for(var b=[],c=0;c<a.length;c++)if(a[c]){var d=a[c],e=d.val,f=d.label;if(e)if("MM"===f){(e.length>2||e<1||12<e)&&(b[c]={index:c,message:"Enter a valid month"})}else if("DD"===f){(e.length>2||e<1||31<e)&&(b[c]={index:c,message:"Enter a valid date"})}else if("YYYY"===f){var g=new Date().getFullYear()+1;(e.length>4||e<1920||e>g)&&(b[c]={index:c,message:"Enter a valid year"})}}return b},validateField=function(a,b){var c=b.type,d=b.isRequired;if(("checkbox"===c||"radio"===c)&&d)return checkboxValidation(a,b.errorMessage);if("password"===c)return passwordValidation(a,b);if("email"===c&&b.emailConfirmEnabled)return emailValidation(a,b);var e=isEmpty(a),f="",g=!!(b&&b.errorMessage)&&b.errorMessage;if(f=!!d&&isRequired(d,e,g),!f&&!e)if("email"===c)f=isEmail(a,g);else if("website"===c)f=isUrl(a,g);else if("date"===c){var h=!0;h=b.dateType&&"datepicker"===b.dateType?!!d&&isRequired(d,e,g):isDate(a,b),f=!!(0<h.length)&&h}return f};exports.validateField=validateField;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9IZWxwZXJzL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiZ2V0TWVzc2FnZSIsIm1lc3NhZ2UiLCJ0eXBlIiwiaXNFbWFpbCIsImVtYWlsIiwicmUiLCJ0ZXN0IiwiY3VzdG9tTWVzc2FnZSIsImlzVXJsIiwic3RyIiwicGF0dGVybiIsImlzRW1wdHkiLCJ2YWx1ZSIsImlzUmVxdWlyZWQiLCJyZXF1aXJlZCIsImVtcHR5Iiwic2VsZWN0VmFsaWRhdGlvbiIsInBsYWNlaG9sZGVyIiwiY2hlY2tib3hWYWxpZGF0aW9uIiwidmFsdWVzIiwibGVuZ3RoIiwiZW1haWxWYWxpZGF0aW9uIiwiZmllbGQiLCJpbnB1dHMiLCJlcnJvck1lc3NhZ2UiLCJyZXF1aXJlZE1zZyIsIm1pc21hdGNoIiwiaXNJbnB1dHNFbXB0eSIsImZpbHRlciIsIml0ZW0iLCJ2YWwiLCJpc0luVmFsaWRNYWlsIiwiaSIsImNvbnNvbGUiLCJsb2ciLCJwYXNzd29yZFZhbGlkYXRpb24iLCJpc0RhdGUiLCJ2YWxpZGF0aW9uIiwibGFiZWwiLCJpbmRleCIsIm1heCIsIkRhdGUiLCJnZXRGdWxsWWVhciIsInZhbGlkYXRlRmllbGQiLCJlbWFpbENvbmZpcm1FbmFibGVkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpc1ZhbGlkIiwiZGF0ZVR5cGUiXSwibWFwcGluZ3MiOiJpZEFBTUEsQ0FBQUEsVUFBVSxDQUFHLFNBQUNDLENBQUQsQ0FBVUMsQ0FBVixDQUFtQixTQUMvQkEsQ0FEK0IsR0FFaENELENBQU8sRUFBdUIsUUFBbkIsV0FBT0EsQ0FBUCxDQUFYLEVBQTBDQSxDQUFPLENBQUNDLENBQUQsQ0FGakIsQ0FHM0JELENBQU8sQ0FBQ0MsQ0FBRCxDQUhvQixDQUs3QkQsQ0FMNkIsQ0FNckMsQyxDQUVLRSxPQUFPLENBQUcsU0FBQ0MsQ0FBRCxDQUFRSCxDQUFSLENBQW9CLENBQ2xDLEdBQU1JLENBQUFBLENBQUUsQ0FBRyx3SkFBWCxDQUNBLEdBQUksQ0FBQ0EsQ0FBRSxD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Q0FBRCxDQUFRWCxDQUFSLENBRDdCLEtBRU8sSUFBYSxTQUFULEdBQUFDLENBQUosQ0FDTDJDLENBQWlCLENBQUdyQyxLQUFLLENBQUNJLENBQUQsQ0FBUVgsQ0FBUixDQURwQixLQUVBLElBQWEsTUFBVCxHQUFBQyxDQUFKLENBQXFCLENBQzFCLEdBQUk0QyxDQUFBQSxDQUFPLEdBQVgsQ0FFRUEsQ0FId0IsQ0FFdEJ4QixDQUFLLENBQUN5QixRQUFOLEVBQXFDLFlBQW5CLEdBQUF6QixDQUFLLENBQUN5QixRQUZGLEdBR2RqQyxDQUhjLEVBR0hELFVBQVUsQ0FBQ0MsQ0FBRCxDQUFXQyxDQUFYLENBQWtCZCxDQUFsQixDQUhQLENBS2RtQyxNQUFNLENBQUN4QixDQUFELENBQVFVLENBQVIsQ0FMUSxDQU8xQnVCLENBQWlCLElBQW9CLENBQWpCLENBQUFDLENBQU8sQ0FBQzFCLE1BQVgsR0FBd0IwQixDQUMxQyxDQUVILE1BQU9ELENBQUFBLENBQ1IsQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdldE1lc3NhZ2UgPSAobWVzc2FnZSwgdHlwZSkgPT4ge1xuICBpZiAoIXR5cGUpIHJldHVybiBmYWxzZTtcbiAgaWYgKG1lc3NhZ2UgJiYgdHlwZW9mIG1lc3NhZ2UgPT09ICdvYmplY3QnICYmIG1lc3NhZ2VbdHlwZV0pIHtcbiAgICByZXR1cm4gbWVzc2FnZVt0eXBlXTtcbiAgfVxuICByZXR1cm4gbWVzc2FnZTtcbn07XG5cbmNvbnN0IGlzRW1haWwgPSAoZW1haWwsIG1lc3NhZ2UpID0+IHtcbiAgY29uc3QgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgaWYgKCFyZS50ZXN0KGVtYWlsKSkge1xuICAgIGNvbnN0IGN1c3RvbU1lc3NhZ2UgPSBnZXRNZXNzYWdlKG1lc3NhZ2UsICdlbWFpbCcpO1xuICAgIHJldHVybiBjdXN0b21NZXNzYWdlIHx8ICdFbnRlciBhIHZhbGlkIGVtYWlsJztcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBpc1VybCA9IChzdHIsIG1lc3NhZ2UpID0+IHtcbiAgY29uc3QgcGF0dGVybiA9IG5ldyBSZWdFeHAoXG4gICAgJ14oaHR0cHM/OlxcXFwvXFxcXC8pPycgLy8gcHJvdG9jb2xcbiAgICArICcoKChbYS16XFxcXGRdKFthLXpcXFxcZC1dKlthLXpcXFxcZF0pKilcXFxcLikrW2Etel17Mix9fCcgLy8gZG9tYWluIG5hbWVcbiAgICArICcoKFxcXFxkezEsM31cXFxcLil7M31cXFxcZHsxLDN9KSknIC8vIE9SIGlwICh2NCkgYWRkcmVzc1xuICAgICsgJyhcXFxcOlxcXFxkKyk/KFxcXFwvWy1hLXpcXFxcZCVfLn4rXSopKicgLy8gcG9ydCBhbmQgcGF0aFxuICAgICsgJyhcXFxcP1s7JmEtelxcXFxkJV8ufis9LV0qKT8nIC8vIHF1ZXJ5IHN0cmluZ1xuICAgICAgKyAnKFxcXFwjWy1hLXpcXFxcZF9dKik/JCcsXG4gICAgJ2knXG4gICk7IC8vIGZyYWdtZW50IGxvY2F0b3JcbiAgaWYgKCFwYXR0ZXJuLnRlc3Qoc3RyKSkge1xuICAgIGNvbnN0IGN1c3RvbU1lc3NhZ2UgPSBnZXRNZXNzYWdlKG1lc3NhZ2UsICd1cmwnKTtcbiAgICByZXR1cm4gY3VzdG9tTWVzc2FnZSB8fCAnRW50ZXIgYSB2YWxpZCB1cmwnO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGlzRW1wdHkgPSB2YWx1ZSA9PiB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBpc1JlcXVpcmVkID0gKHJlcXVpcmVkLCBlbXB0eSwgbWVzc2FnZSkgPT4ge1xuICBpZiAocmVxdWlyZWQgJiYgZW1wdHkpIHtcbiAgICBjb25zdCBjdXN0b21NZXNzYWdlID0gZ2V0TWVzc2FnZShtZXNzYWdlLCAncmVxdWlyZWQnKTtcbiAgICByZXR1cm4gY3VzdG9tTWVzc2FnZSB8fCAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCc7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3Qgc2VsZWN0VmFsaWRhdGlvbiA9IChyZXF1aXJlZCwgdmFsdWUsIHBsYWNlaG9sZGVyKSA9PiAhKHZhbHVlID09PSBwbGFjZWhvbGRlciAmJiByZXF1aXJlZCk7XG5cbmNvbnN0IGNoZWNrYm94VmFsaWRhdGlvbiA9ICh2YWx1ZXMsIG1lc3NhZ2UpID0+IHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggPCAxKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2UgfHwgJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGVtYWlsVmFsaWRhdGlvbiA9ICh2YWx1ZXMsIGZpZWxkKSA9PiB7XG4gIGNvbnN0IHsgaW5wdXRzLCBpc1JlcXVpcmVkOiByZXF1aXJlZCwgZXJyb3JNZXNzYWdlIH0gPSBmaWVsZCB8fCBmYWxzZTtcbiAgY29uc3QgeyByZXF1aXJlZDogcmVxdWlyZWRNc2csIG1pc21hdGNoIH0gPSBlcnJvck1lc3NhZ2UgfHwgZmFsc2U7XG5cbiAgLy8gY2hlY2sgaWYgZmllbGRzIGlzIHJlcXVpcmVkIGFuZCBpc24ndCBlbXB0eVxuICBjb25zdCBpc0lucHV0c0VtcHR5ID0gdmFsdWVzICYmIHZhbHVlcy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udmFsID09PSAnJykubGVuZ3RoO1xuXG4gIGlmIChcbiAgICAoKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoIDwgMikgfHwgaXNJbnB1dHNFbXB0eSAhPT0gMClcbiAgICAmJiByZXF1aXJlZFxuICApIHtcbiAgICByZXR1cm4gcmVxdWlyZWRNc2cgfHwgJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnO1xuICB9XG5cbiAgaWYgKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgIGZvciAobGV0IGkgPSAwOyB2YWx1ZXMubGVuZ3RoID4gaTsgaSsrKSB7XG4gICAgICBjb25zdCBpc0luVmFsaWRNYWlsID0gaXNFbWFpbCh2YWx1ZXNbaV0udmFsKTtcbiAgICAgIGlmIChpc0luVmFsaWRNYWlsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGlzSW5WYWxpZE1haWwpO1xuICAgICAgICByZXR1cm4gaXNJblZhbGlkTWFpbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGVyZSBpcyByZXBlYXQgcGFzc3dvcmQgZmllbGQgPT4gY2hlY2sgaWYgbWF0Y2hcbiAgaWYgKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoID09PSAyICYmIGlucHV0cyAmJiBpbnB1dHMubGVuZ3RoID09PSAyKSB7XG4gICAgaWYgKFxuICAgICAgdmFsdWVzWzFdXG4gICAgICAmJiB2YWx1ZXNbMF1cbiAgICAgICYmIHZhbHVlc1sxXS52YWwgIT09ICcnXG4gICAgICAmJiB2YWx1ZXNbMV0udmFsICE9PSB2YWx1ZXNbMF0udmFsXG4gICAgKSB7XG4gICAgICByZXR1cm4gbWlzbWF0Y2ggfHwgJ01pc21hdGNoJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBwYXNzd29yZFZhbGlkYXRpb24gPSAodmFsdWVzLCBmaWVsZCkgPT4ge1xuICBjb25zdCB7IGlucHV0cywgaXNSZXF1aXJlZDogcmVxdWlyZWQsIGVycm9yTWVzc2FnZSB9ID0gZmllbGQgfHwgZmFsc2U7XG4gIGNvbnN0IHsgcmVxdWlyZWQ6IHJlcXVpcmVkTXNnLCBtaXNtYXRjaCB9ID0gZXJyb3JNZXNzYWdlIHx8IGZhbHNlO1xuXG4gIC8vIGNoZWNrIGlmIGZpZWxkcyBpcyByZXF1aXJlZCBhbmQgaXNuJ3QgZW1wdHlcbiAgY29uc3QgaXNJbnB1dHNFbXB0eSA9IHZhbHVlcyAmJiB2YWx1ZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnZhbCA9PT0gJycpLmxlbmd0aDtcblxuICBpZiAoXG4gICAgKCh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCA9PT0gMCkgfHwgaXNJbnB1dHNFbXB0eSA9PT0gaW5wdXRzLmxlbmd0aClcbiAgICAmJiByZXF1aXJlZFxuICApIHtcbiAgICByZXR1cm4gcmVxdWlyZWRNc2cgfHwgJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnO1xuICB9XG5cbiAgLy8gaWYgdGhlcmUgaXMgcmVwZWF0IHBhc3N3b3JkIGZpZWxkID0+IGNoZWNrIGlmIG1hdGNoXG4gIGlmICh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCA9PT0gMiAmJiBpbnB1dHMgJiYgaW5wdXRzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChcbiAgICAgIHZhbHVlc1sxXVxuICAgICAgJiYgdmFsdWVzWzBdXG4gICAgICAmJiB2YWx1ZXNbMV0udmFsICE9PSAnJ1xuICAgICAgJiYgdmFsdWVzWzFdLnZhbCAhPT0gdmFsdWVzWzBdLnZhbFxuICAgICkge1xuICAgICAgcmV0dXJuIG1pc21hdGNoIHx8ICdNaXNtYXRjaCc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgaXNEYXRlID0gKHZhbHVlcywgZmllbGQpID0+IHtcbiAgY29uc3QgdmFsaWRhdGlvbiA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh2YWx1ZXNbaV0pIHtcbiAgICAgIGNvbnN0IHsgdmFsLCBsYWJlbCB9ID0gdmFsdWVzW2ldO1xuICAgICAgaWYgKHZhbCkge1xuICAgICAgICBpZiAobGFiZWwgPT09ICdNTScpIHtcbiAgICAgICAgICBjb25zdCBtYXggPSAxMjtcbiAgICAgICAgICBjb25zdCBtaW4gPSAxO1xuICAgICAgICAgIGNvbnN0IG1heExlbmd0aCA9IDI7XG4gICAgICAgICAgaWYgKHZhbC5sZW5ndGggPiBtYXhMZW5ndGggfHwgdmFsIDwgbWluIHx8IHZhbCA+IG1heCkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbltpXSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdFbnRlciBhIHZhbGlkIG1vbnRoJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobGFiZWwgPT09ICdERCcpIHtcbiAgICAgICAgICBjb25zdCBtYXggPSAzMTtcbiAgICAgICAgICBjb25zdCBtaW4gPSAxO1xuICAgICAgICAgIGNvbnN0IG1heExlbmd0aCA9IDI7XG4gICAgICAgICAgaWYgKHZhbC5sZW5ndGggPiBtYXhMZW5ndGggfHwgdmFsIDwgbWluIHx8IHZhbCA+IG1heCkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbltpXSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdFbnRlciBhIHZhbGlkIGRhdGUnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsYWJlbCA9PT0gJ1lZWVknKSB7XG4gICAgICAgICAgY29uc3QgbWF4ID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgMTtcbiAgICAgICAgICBjb25zdCBtaW4gPSAxOTIwO1xuICAgICAgICAgIGNvbnN0IG1heExlbmd0aCA9IDQ7XG4gICAgICAgICAgaWYgKHZhbC5sZW5ndGggPiBtYXhMZW5ndGggfHwgdmFsIDwgbWluIHx8IHZhbCA+IG1heCkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbltpXSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdFbnRlciBhIHZhbGlkIHllYXInXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsaWRhdGlvbjtcbn07XG5cbmNvbnN0IHZhbGlkYXRlRmllbGQgPSAodmFsdWUsIGZpZWxkKSA9PiB7XG4gIGNvbnN0IHsgdHlwZSwgaXNSZXF1aXJlZDogcmVxdWlyZWQgfSA9IGZpZWxkO1xuICAvLyBDaGVjayBmaXJzdCBpZiByZXF1cmllZCBjaGVja2JveCBvciByYWRpb1xuICBpZiAoKHR5cGUgPT09ICdjaGVja2JveCcgfHwgdHlwZSA9PT0gJ3JhZGlvJykgJiYgcmVxdWlyZWQpIHtcbiAgICByZXR1cm4gY2hlY2tib3hWYWxpZGF0aW9uKHZhbHVlLCBmaWVsZC5lcnJvck1lc3NhZ2UpO1xuICB9XG5cbiAgaWYgKHR5cGUgPT09ICdwYXNzd29yZCcpIHtcbiAgICByZXR1cm4gcGFzc3dvcmRWYWxpZGF0aW9uKHZhbHVlLCBmaWVsZCk7XG4gIH1cblxuICBpZiAodHlwZSA9PT0gJ2VtYWlsJyAmJiBmaWVsZC5lbWFpbENvbmZpcm1FbmFibGVkKSB7XG4gICAgcmV0dXJuIGVtYWlsVmFsaWRhdGlvbih2YWx1ZSwgZmllbGQpO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgZW1wdHlcbiAgY29uc3QgZW1wdHkgPSBpc0VtcHR5KHZhbHVlKTtcbiAgbGV0IHZhbGlkYXRpb25NZXNzYWdlID0gJyc7XG4gIGNvbnN0IG1lc3NhZ2UgPSBmaWVsZCAmJiBmaWVsZC5lcnJvck1lc3NhZ2UgPyBmaWVsZC5lcnJvck1lc3NhZ2UgOiBmYWxzZTtcbiAgLy8gU2V0IHZhbGlkYXRpb24gbWVzc2FnZSBpZiByZXF1aXJlZFxuICB2YWxpZGF0aW9uTWVzc2FnZSA9IHJlcXVpcmVkID8gaXNSZXF1aXJlZChyZXF1aXJlZCwgZW1wdHksIG1lc3NhZ2UpIDogZmFsc2U7XG4gIC8vIFNldCBvdGhlciB2YWxpZGF0aW9uIG1lc3NhZ2VzXG4gIGlmICghdmFsaWRhdGlvbk1lc3NhZ2UgJiYgIWVtcHR5KSB7XG4gICAgaWYgKHR5cGUgPT09ICdlbWFpbCcpIHtcbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlID0gaXNFbWFpbCh2YWx1ZSwgbWVzc2FnZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnd2Vic2l0ZScpIHtcbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlID0gaXNVcmwodmFsdWUsIG1lc3NhZ2UpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICBsZXQgaXNWYWxpZCA9IHRydWU7XG4gICAgICBpZiAoZmllbGQuZGF0ZVR5cGUgJiYgZmllbGQuZGF0ZVR5cGUgPT09ICdkYXRlcGlja2VyJykge1xuICAgICAgICBpc1ZhbGlkID0gcmVxdWlyZWQgPyBpc1JlcXVpcmVkKHJlcXVpcmVkLCBlbXB0eSwgbWVzc2FnZSkgOiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlzVmFsaWQgPSBpc0RhdGUodmFsdWUsIGZpZWxkKTtcbiAgICAgIH1cbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlID0gaXNWYWxpZC5sZW5ndGggPiAwID8gaXNWYWxpZCA6IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsaWRhdGlvbk1lc3NhZ2U7XG59O1xuXG5leHBvcnQge1xuICBpc0VtcHR5LFxuICBzZWxlY3RWYWxpZGF0aW9uLFxuICBjaGVja2JveFZhbGlkYXRpb24sXG4gIGlzVXJsLFxuICBpc0VtYWlsLFxuICBpc1JlcXVpcmVkLFxuICB2YWxpZGF0ZUZpZWxkXG59O1xuIl19