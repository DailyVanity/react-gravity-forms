"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.validateField = exports.isRequired = exports.isEmail = exports.isUrl = exports.checkboxValidation = exports.selectValidation = exports.isEmpty = void 0;

var isEmail = function isEmail(email) {
  var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  return re.test(email);
};

exports.isEmail = isEmail;

var isUrl = function isUrl(str) {
  var pattern = new RegExp('^(https?:\\/\\/)?' // protocol
  + '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' // domain name
  + '((\\d{1,3}\\.){3}\\d{1,3}))' // OR ip (v4) address
  + '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' // port and path
  + '(\\?[;&a-z\\d%_.~+=-]*)?' // query string
  + '(\\#[-a-z\\d_]*)?$', 'i'); // fragment locator

  return !!pattern.test(str);
};

exports.isUrl = isUrl;

var isEmpty = function isEmpty(value) {
  if (!value) {
    return true;
  }

  return false;
};

exports.isEmpty = isEmpty;

var isRequired = function isRequired(required, empty, message) {
  if (required && empty) {
    return message || 'This field is required';
  }

  return false;
};

exports.isRequired = isRequired;

var selectValidation = function selectValidation(required, value, placeholder) {
  return !(value === placeholder && required);
};

exports.selectValidation = selectValidation;

var checkboxValidation = function checkboxValidation(values, message) {
  if (values.length < 1) {
    return message || 'This field is required';
  }

  return false;
};

exports.checkboxValidation = checkboxValidation;

var isDate = function isDate(values, field) {
  var validation = [];

  for (var i = 0; i < values.length; i++) {
    if (values[i]) {
      var _values$i = values[i],
          val = _values$i.val,
          label = _values$i.label;

      if (val) {
        if (label === 'MM') {
          var max = 12;
          var min = 1;
          var maxLength = 2;

          if (val.length > maxLength || val < min || val > max) {
            validation[i] = {
              index: i,
              message: 'Enter a valid month'
            };
          }
        } else if (label === 'DD') {
          var _max = 31;
          var _min = 1;
          var _maxLength = 2;

          if (val.length > _maxLength || val < _min || val > _max) {
            validation[i] = {
              index: i,
              message: 'Enter a valid date'
            };
          }
        } else if (label === 'YYYY') {
          var _max2 = new Date().getFullYear() + 1;

          var _min2 = 1920;
          var _maxLength2 = 4;

          if (val.length > _maxLength2 || val < _min2 || val > _max2) {
            validation[i] = {
              index: i,
              message: 'Enter a valid year'
            };
          }
        }
      }
    }
  }

  return validation;
};

var validateField = function validateField(value, field) {
  var type = field.type,
      required = field.isRequired; // Check first if requried checkbox or radio

  if ((type === 'checkbox' || type === 'radio') && required) {
    return checkboxValidation(value, field.errorMessage);
  } // Check if empty


  var empty = isEmpty(value);
  var validationMessage = '';
  var message = field && field.errorMessage ? field.errorMessage : false; // Set validation message if required

  validationMessage = required ? isRequired(required, empty, message) : false; // Set other validation messages

  if (!validationMessage && !empty) {
    if (type == 'email') {
      validationMessage = isEmail(value) ? false : field.errorMessage ? field.errorMessage : 'Enter a valid email';
    } else if (type == 'website') {
      validationMessage = isUrl(value) ? false : field.errorMessage ? field.errorMessage : 'Enter a valid url';
    } else if (type == 'date') {
      var isValid = isDate(value, field);
      validationMessage = isValid.length > 0 ? isValid : false;
    }
  }

  return validationMessage;
};

exports.validateField = validateField;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9IZWxwZXJzL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiaXNFbWFpbCIsImVtYWlsIiwicmUiLCJ0ZXN0IiwiaXNVcmwiLCJzdHIiLCJwYXR0ZXJuIiwiUmVnRXhwIiwiaXNFbXB0eSIsInZhbHVlIiwiaXNSZXF1aXJlZCIsInJlcXVpcmVkIiwiZW1wdHkiLCJtZXNzYWdlIiwic2VsZWN0VmFsaWRhdGlvbiIsInBsYWNlaG9sZGVyIiwiY2hlY2tib3hWYWxpZGF0aW9uIiwidmFsdWVzIiwibGVuZ3RoIiwiaXNEYXRlIiwiZmllbGQiLCJ2YWxpZGF0aW9uIiwiaSIsInZhbCIsImxhYmVsIiwibWF4IiwibWluIiwibWF4TGVuZ3RoIiwiaW5kZXgiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJ2YWxpZGF0ZUZpZWxkIiwidHlwZSIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiaXNWYWxpZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLElBQU1BLE9BQU8sR0FBRyxTQUFWQSxPQUFVLENBQUNDLEtBQUQsRUFBVztBQUN6QixNQUFNQyxFQUFFLEdBQUcsd0pBQVg7QUFDQSxTQUFPQSxFQUFFLENBQUNDLElBQUgsQ0FBUUYsS0FBUixDQUFQO0FBQ0QsQ0FIRDs7OztBQUtBLElBQU1HLEtBQUssR0FBRyxTQUFSQSxLQUFRLENBQUNDLEdBQUQsRUFBUztBQUNyQixNQUFNQyxPQUFPLEdBQUcsSUFBSUMsTUFBSixDQUNkLG9CQUFvQjtBQUFwQixJQUNFLGtEQURGLENBQ3FEO0FBRHJELElBRUUsNkJBRkYsQ0FFZ0M7QUFGaEMsSUFHRSxpQ0FIRixDQUdvQztBQUhwQyxJQUlFLDBCQUpGLENBSTZCO0FBSjdCLElBS0ksb0JBTlUsRUFPZCxHQVBjLENBQWhCLENBRHFCLENBU2xCOztBQUNILFNBQU8sQ0FBQyxDQUFDRCxPQUFPLENBQUNILElBQVIsQ0FBYUUsR0FBYixDQUFUO0FBQ0QsQ0FYRDs7OztBQWFBLElBQU1HLE9BQU8sR0FB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QUNFYixLQUFLLENBQUNhLFlBRFIsR0FFRSxxQkFKTjtBQUtELEtBTkQsTUFNTyxJQUFJRCxJQUFJLElBQUksU0FBWixFQUF1QjtBQUM1QkUsTUFBQUEsaUJBQWlCLEdBQUc5QixLQUFLLENBQUNLLEtBQUQsQ0FBTCxHQUNoQixLQURnQixHQUVoQlcsS0FBSyxDQUFDYSxZQUFOLEdBQ0ViLEtBQUssQ0FBQ2EsWUFEUixHQUVFLG1CQUpOO0FBS0QsS0FOTSxNQU1BLElBQUlELElBQUksSUFBSSxNQUFaLEVBQW9CO0FBQ3pCLFVBQU1HLE9BQU8sR0FBR2hCLE1BQU0sQ0FBQ1YsS0FBRCxFQUFRVyxLQUFSLENBQXRCO0FBQ0FjLE1BQUFBLGlCQUFpQixHQUFHQyxPQUFPLENBQUNqQixNQUFSLEdBQWlCLENBQWpCLEdBQXFCaUIsT0FBckIsR0FBK0IsS0FBbkQ7QUFDRDtBQUNGOztBQUNELFNBQU9ELGlCQUFQO0FBQ0QsQ0FoQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBpc0VtYWlsID0gKGVtYWlsKSA9PiB7XG4gIGNvbnN0IHJlID0gL14oKFtePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSsoXFwuW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKykqKXwoXCIuK1wiKSlAKChcXFtbMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XSl8KChbYS16QS1aXFwtMC05XStcXC4pK1thLXpBLVpdezIsfSkpJC87XG4gIHJldHVybiByZS50ZXN0KGVtYWlsKTtcbn07XG5cbmNvbnN0IGlzVXJsID0gKHN0cikgPT4ge1xuICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChcbiAgICAnXihodHRwcz86XFxcXC9cXFxcLyk/JyAvLyBwcm90b2NvbFxuICAgICsgJygoKFthLXpcXFxcZF0oW2EtelxcXFxkLV0qW2EtelxcXFxkXSkqKVxcXFwuKStbYS16XXsyLH18JyAvLyBkb21haW4gbmFtZVxuICAgICsgJygoXFxcXGR7MSwzfVxcXFwuKXszfVxcXFxkezEsM30pKScgLy8gT1IgaXAgKHY0KSBhZGRyZXNzXG4gICAgKyAnKFxcXFw6XFxcXGQrKT8oXFxcXC9bLWEtelxcXFxkJV8ufitdKikqJyAvLyBwb3J0IGFuZCBwYXRoXG4gICAgKyAnKFxcXFw/WzsmYS16XFxcXGQlXy5+Kz0tXSopPycgLy8gcXVlcnkgc3RyaW5nXG4gICAgICArICcoXFxcXCNbLWEtelxcXFxkX10qKT8kJyxcbiAgICAnaScsXG4gICk7IC8vIGZyYWdtZW50IGxvY2F0b3JcbiAgcmV0dXJuICEhcGF0dGVybi50ZXN0KHN0cik7XG59O1xuXG5jb25zdCBpc0VtcHR5ID0gKHZhbHVlKSA9PiB7XG4gIGlmICghdmFsdWUpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBpc1JlcXVpcmVkID0gKHJlcXVpcmVkLCBlbXB0eSwgbWVzc2FnZSkgPT4ge1xuICBpZiAocmVxdWlyZWQgJiYgZW1wdHkpIHtcbiAgICByZXR1cm4gbWVzc2FnZSB8fCAnVGhpcyBmaWVsZCBpcyByZXF1aXJlZCc7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3Qgc2VsZWN0VmFsaWRhdGlvbiA9IChyZXF1aXJlZCwgdmFsdWUsIHBsYWNlaG9sZGVyKSA9PiAhKHZhbHVlID09PSBwbGFjZWhvbGRlciAmJiByZXF1aXJlZCk7XG5cbmNvbnN0IGNoZWNrYm94VmFsaWRhdGlvbiA9ICh2YWx1ZXMsIG1lc3NhZ2UpID0+IHtcbiAgaWYgKHZhbHVlcy5sZW5ndGggPCAxKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2UgfHwgJ1RoaXMgZmllbGQgaXMgcmVxdWlyZWQnO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGlzRGF0ZSA9ICh2YWx1ZXMsIGZpZWxkKSA9PiB7XG4gIGNvbnN0IHZhbGlkYXRpb24gPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodmFsdWVzW2ldKSB7XG4gICAgICBjb25zdCB7IHZhbCwgbGFiZWwgfSA9IHZhbHVlc1tpXTtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgaWYgKGxhYmVsID09PSAnTU0nKSB7XG4gICAgICAgICAgY29uc3QgbWF4ID0gMTI7XG4gICAgICAgICAgY29uc3QgbWluID0gMTtcbiAgICAgICAgICBjb25zdCBtYXhMZW5ndGggPSAyO1xuICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gbWF4TGVuZ3RoIHx8IHZhbCA8IG1pbiB8fCB2YWwgPiBtYXgpIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb25baV0gPSB7XG4gICAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnRW50ZXIgYSB2YWxpZCBtb250aCcsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsYWJlbCA9PT0gJ0REJykge1xuICAgICAgICAgIGNvbnN0IG1heCA9IDMxO1xuICAgICAgICAgIGNvbnN0IG1pbiA9IDE7XG4gICAgICAgICAgY29uc3QgbWF4TGVuZ3RoID0gMjtcbiAgICAgICAgICBpZiAodmFsLmxlbmd0aCA+IG1heExlbmd0aCB8fCB2YWwgPCBtaW4gfHwgdmFsID4gbWF4KSB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uW2ldID0ge1xuICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ0VudGVyIGEgdmFsaWQgZGF0ZScsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsYWJlbCA9PT0gJ1lZWVknKSB7XG4gICAgICAgICAgY29uc3QgbWF4ID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgMTtcbiAgICAgICAgICBjb25zdCBtaW4gPSAxOTIwO1xuICAgICAgICAgIGNvbnN0IG1heExlbmd0aCA9IDQ7XG4gICAgICAgICAgaWYgKHZhbC5sZW5ndGggPiBtYXhMZW5ndGggfHwgdmFsIDwgbWluIHx8IHZhbCA+IG1heCkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbltpXSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdFbnRlciBhIHZhbGlkIHllYXInLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbGlkYXRpb247XG59O1xuXG5jb25zdCB2YWxpZGF0ZUZpZWxkID0gKHZhbHVlLCBmaWVsZCkgPT4ge1xuICBjb25zdCB7IHR5cGUsIGlzUmVxdWlyZWQ6IHJlcXVpcmVkIH0gPSBmaWVsZDtcbiAgLy8gQ2hlY2sgZmlyc3QgaWYgcmVxdXJpZWQgY2hlY2tib3ggb3IgcmFkaW9cbiAgaWYgKCh0eXBlID09PSAnY2hlY2tib3gnIHx8IHR5cGUgPT09ICdyYWRpbycpICYmIHJlcXVpcmVkKSB7XG4gICAgcmV0dXJuIGNoZWNrYm94VmFsaWRhdGlvbih2YWx1ZSwgZmllbGQuZXJyb3JNZXNzYWdlKTtcbiAgfVxuICAvLyBDaGVjayBpZiBlbXB0eVxuICBjb25zdCBlbXB0eSA9IGlzRW1wdHkodmFsdWUpO1xuICBsZXQgdmFsaWRhdGlvbk1lc3NhZ2UgPSAnJztcbiAgY29uc3QgbWVzc2FnZSA9IGZpZWxkICYmIGZpZWxkLmVycm9yTWVzc2FnZSA/IGZpZWxkLmVycm9yTWVzc2FnZSA6IGZhbHNlO1xuICAvLyBTZXQgdmFsaWRhdGlvbiBtZXNzYWdlIGlmIHJlcXVpcmVkXG4gIHZhbGlkYXRpb25NZXNzYWdlID0gcmVxdWlyZWQgPyBpc1JlcXVpcmVkKHJlcXVpcmVkLCBlbXB0eSwgbWVzc2FnZSkgOiBmYWxzZTtcbiAgLy8gU2V0IG90aGVyIHZhbGlkYXRpb24gbWVzc2FnZXNcbiAgaWYgKCF2YWxpZGF0aW9uTWVzc2FnZSAmJiAhZW1wdHkpIHtcbiAgICBpZiAodHlwZSA9PSAnZW1haWwnKSB7XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZSA9IGlzRW1haWwodmFsdWUpXG4gICAgICAgID8gZmFsc2VcbiAgICAgICAgOiBmaWVsZC5lcnJvck1lc3NhZ2VcbiAgICAgICAgICA/IGZpZWxkLmVycm9yTWVzc2FnZVxuICAgICAgICAgIDogJ0VudGVyIGEgdmFsaWQgZW1haWwnO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnd2Vic2l0ZScpIHtcbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlID0gaXNVcmwodmFsdWUpXG4gICAgICAgID8gZmFsc2VcbiAgICAgICAgOiBmaWVsZC5lcnJvck1lc3NhZ2VcbiAgICAgICAgICA/IGZpZWxkLmVycm9yTWVzc2FnZVxuICAgICAgICAgIDogJ0VudGVyIGEgdmFsaWQgdXJsJztcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2RhdGUnKSB7XG4gICAgICBjb25zdCBpc1ZhbGlkID0gaXNEYXRlKHZhbHVlLCBmaWVsZCk7XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZSA9IGlzVmFsaWQubGVuZ3RoID4gMCA/IGlzVmFsaWQgOiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbGlkYXRpb25NZXNzYWdlO1xufTtcblxuZXhwb3J0IHtcbiAgaXNFbXB0eSwgc2VsZWN0VmFsaWRhdGlvbiwgY2hlY2tib3hWYWxpZGF0aW9uLCBpc1VybCwgaXNFbWFpbCwgaXNSZXF1aXJlZCwgdmFsaWRhdGVGaWVsZCxcbn07XG4iXX0=