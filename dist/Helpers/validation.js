"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateField=exports.isRequired=exports.isEmail=exports.isUrl=exports.checkboxValidation=exports.selectValidation=exports.isEmpty=void 0;function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var getMessage=function(a,b){return!!b&&(a&&"object"===_typeof(a)&&a[b]?a[b]:a)},isEmail=function(a,b){var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!c.test(a)){var d=getMessage(b,"email");return d||"Enter a valid email"}return!1};exports.isEmail=isEmail;var isUrl=function(a,b){var c=/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i;if(!c.test(a)){var d=getMessage(b,"url");return d||"Enter a valid url"}return!1};exports.isUrl=isUrl;var isEmpty=function(a){return!a};exports.isEmpty=isEmpty;var isRequired=function(a,b,c){if(a&&b){var d=getMessage(c,"required");return d||"This field is required"}return!1};exports.isRequired=isRequired;var selectValidation=function(a,b,c){return!(b===c&&a)};exports.selectValidation=selectValidation;var checkboxValidation=function(a,b){return!!(1>a.length)&&(b||"This field is required")};exports.checkboxValidation=checkboxValidation;var emailValidation=function(a,b){var c=b||!1,d=c.inputs,e=c.isRequired,f=c.errorMessage,g=f||!1,h=g.required,j=g.mismatch,k=a&&a.filter(function(a){return a&&""===a.val}).length;if((a&&2>a.length||0!==k)&&e)return h||"This field is required";if(a&&0<a.length)for(var l,m=0;a.length>m;m++)if(l=isEmail(a[m].val),l)return console.log(l),l;return!!(a&&2===a.length&&d&&2===d.length&&a[1]&&a[0]&&""!==a[1].val&&a[1].val!==a[0].val)&&(j||"Mismatch")},passwordValidation=function(a,b){var c=b||!1,d=c.inputs,e=c.isRequired,f=c.errorMessage,g=f||!1,h=g.required,i=g.mismatch,j=d.filter(function(a){return!a.isHidden}),k=a&&a.filter(function(a){return a&&""===a.val}).length;return(a&&0===a.length||k===j.length)&&e?h||"This field is required":!!(a&&2===a.length&&j&&2===j.length&&a[1]&&a[0]&&""!==a[1].val&&a[1].val!==a[0].val)&&(i||"Mismatch")},isDate=function(a){for(var b=[],c=0;c<a.length;c++)if(a[c]){var d=a[c],e=d.val,f=d.label;if(e)if("MM"===f){(e.length>2||e<1||12<e)&&(b[c]={index:c,message:"Enter a valid month"})}else if("DD"===f){(e.length>2||e<1||31<e)&&(b[c]={index:c,message:"Enter a valid date"})}else if("YYYY"===f){var g=new Date().getFullYear()+1;(e.length>4||e<1920||e>g)&&(b[c]={index:c,message:"Enter a valid year"})}}return b},validateField=function(a,b){var c=b.type,d=b.isRequired;if(("checkbox"===c||"radio"===c)&&d)return checkboxValidation(a,b.errorMessage);if("password"===c)return passwordValidation(a,b);if("email"===c&&b.emailConfirmEnabled)return emailValidation(a,b);var e=isEmpty(a),f="",g=!!(b&&b.errorMessage)&&b.errorMessage;if(f=!!d&&isRequired(d,e,g),!f&&!e)if("email"===c)f=isEmail(a,g);else if("website"===c)f=isUrl(a,g);else if("date"===c){var h=!0;h=b.dateType&&"datepicker"===b.dateType?!!d&&isRequired(d,e,g):isDate(a,b),f=!!(0<h.length)&&h}return f};exports.validateField=validateField;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9IZWxwZXJzL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiZ2V0TWVzc2FnZSIsIm1lc3NhZ2UiLCJ0eXBlIiwiaXNFbWFpbCIsImVtYWlsIiwicmUiLCJ0ZXN0IiwiY3VzdG9tTWVzc2FnZSIsImlzVXJsIiwic3RyIiwicGF0dGVybiIsImlzRW1wdHkiLCJ2YWx1ZSIsImlzUmVxdWlyZWQiLCJyZXF1aXJlZCIsImVtcHR5Iiwic2VsZWN0VmFsaWRhdGlvbiIsInBsYWNlaG9sZGVyIiwiY2hlY2tib3hWYWxpZGF0aW9uIiwidmFsdWVzIiwibGVuZ3RoIiwiZW1haWxWYWxpZGF0aW9uIiwiZmllbGQiLCJpbnB1dHMiLCJlcnJvck1lc3NhZ2UiLCJyZXF1aXJlZE1zZyIsIm1pc21hdGNoIiwiaXNJbnB1dHNFbXB0eSIsImZpbHRlciIsIml0ZW0iLCJ2YWwiLCJpc0luVmFsaWRNYWlsIiwiaSIsImNvbnNvbGUiLCJsb2ciLCJwYXNzd29yZFZhbGlkYXRpb24iLCJmaWx0ZXJlZElucHV0cyIsImlzSGlkZGVuIiwiaXNEYXRlIiwidmFsaWRhdGlvbiIsImxhYmVsIiwiaW5kZXgiLCJtYXgiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJ2YWxpZGF0ZUZpZWxkIiwiZW1haWxDb25maXJtRW5hYmxlZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiaXNWYWxpZCIsImRhdGVUeXBlIl0sIm1hcHBpbmdzIjoiaWRBQU1BLENBQUFBLFVBQVUsQ0FBRyxTQUFDQyxDQUFELENBQVVDLENBQVYsQ0FBbUIsU0FDL0JBLENBRCtCLEdBRWhDRCxDQUFPLEVBQXVCLFFBQW5CLFdBQU9BLENBQVAsQ0FBWCxFQUEwQ0EsQ0FBTyxDQUFDQyxDQUFELENBRmpCLENBRzNCRCxDQUFPLENBQUNDLENBQUQsQ0FIb0IsQ0FLN0JELENBTDZCLENBTXJDLEMsQ0FFS0UsT0FBTyxDQUFHLFNBQUNDLENBQUQsQ0FBUUgsQ0FBUixDQUFvQixDQUNsQyxHQUFNSSxDQUFBQSxDQUFFLENBQUcs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V0MsQ0FBWCxDQUFrQmQsQ0FBbEIsQ0FFekMsQ0FBSSxDQUFDOEMsQ0FBRCxFQUFzQixDQUFDaEMsQ0FBM0IsQ0FDRSxHQUFhLE9BQVQsR0FBQWIsQ0FBSixDQUNFNkMsQ0FBaUIsQ0FBRzVDLE9BQU8sQ0FBQ1MsQ0FBRCxDQUFRWCxDQUFSLENBRDdCLEtBRU8sSUFBYSxTQUFULEdBQUFDLENBQUosQ0FDTDZDLENBQWlCLENBQUd2QyxLQUFLLENBQUNJLENBQUQsQ0FBUVgsQ0FBUixDQURwQixLQUVBLElBQWEsTUFBVCxHQUFBQyxDQUFKLENBQXFCLENBQzFCLEdBQUk4QyxDQUFBQSxDQUFPLEdBQVgsQ0FFRUEsQ0FId0IsQ0FFdEIxQixDQUFLLENBQUMyQixRQUFOLEVBQXFDLFlBQW5CLEdBQUEzQixDQUFLLENBQUMyQixRQUZGLEdBR2RuQyxDQUhjLEVBR0hELFVBQVUsQ0FBQ0MsQ0FBRCxDQUFXQyxDQUFYLENBQWtCZCxDQUFsQixDQUhQLENBS2RxQyxNQUFNLENBQUMxQixDQUFELENBQVFVLENBQVIsQ0FMUSxDQU8xQnlCLENBQWlCLElBQW9CLENBQWpCLENBQUFDLENBQU8sQ0FBQzVCLE1BQVgsR0FBd0I0QixDQUMxQyxDQUVILE1BQU9ELENBQUFBLENBQ1IsQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGdldE1lc3NhZ2UgPSAobWVzc2FnZSwgdHlwZSkgPT4ge1xuICBpZiAoIXR5cGUpIHJldHVybiBmYWxzZTtcbiAgaWYgKG1lc3NhZ2UgJiYgdHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIgJiYgbWVzc2FnZVt0eXBlXSkge1xuICAgIHJldHVybiBtZXNzYWdlW3R5cGVdO1xuICB9XG4gIHJldHVybiBtZXNzYWdlO1xufTtcblxuY29uc3QgaXNFbWFpbCA9IChlbWFpbCwgbWVzc2FnZSkgPT4ge1xuICBjb25zdCByZSA9IC9eKChbXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKFxcLltePD4oKVxcW1xcXVxcXFwuLDs6XFxzQFwiXSspKil8KFwiLitcIikpQCgoXFxbWzAtOV17MSwzfVxcLlswLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfV0pfCgoW2EtekEtWlxcLTAtOV0rXFwuKStbYS16QS1aXXsyLH0pKSQvO1xuXG4gIGlmICghcmUudGVzdChlbWFpbCkpIHtcbiAgICBjb25zdCBjdXN0b21NZXNzYWdlID0gZ2V0TWVzc2FnZShtZXNzYWdlLCBcImVtYWlsXCIpO1xuICAgIHJldHVybiBjdXN0b21NZXNzYWdlIHx8IFwiRW50ZXIgYSB2YWxpZCBlbWFpbFwiO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGlzVXJsID0gKHN0ciwgbWVzc2FnZSkgPT4ge1xuICBjb25zdCBwYXR0ZXJuID0gbmV3IFJlZ0V4cChcbiAgICBcIl4oaHR0cHM/OlxcXFwvXFxcXC8pP1wiICsgLy8gcHJvdG9jb2xcbiAgICBcIigoKFthLXpcXFxcZF0oW2EtelxcXFxkLV0qW2EtelxcXFxkXSkqKVxcXFwuKStbYS16XXsyLH18XCIgKyAvLyBkb21haW4gbmFtZVxuICAgIFwiKChcXFxcZHsxLDN9XFxcXC4pezN9XFxcXGR7MSwzfSkpXCIgKyAvLyBPUiBpcCAodjQpIGFkZHJlc3NcbiAgICBcIihcXFxcOlxcXFxkKyk/KFxcXFwvWy1hLXpcXFxcZCVfLn4rXSopKlwiICsgLy8gcG9ydCBhbmQgcGF0aFxuICAgIFwiKFxcXFw/WzsmYS16XFxcXGQlXy5+Kz0tXSopP1wiICsgLy8gcXVlcnkgc3RyaW5nXG4gICAgICBcIihcXFxcI1stYS16XFxcXGRfXSopPyRcIixcbiAgICBcImlcIlxuICApOyAvLyBmcmFnbWVudCBsb2NhdG9yXG4gIGlmICghcGF0dGVybi50ZXN0KHN0cikpIHtcbiAgICBjb25zdCBjdXN0b21NZXNzYWdlID0gZ2V0TWVzc2FnZShtZXNzYWdlLCBcInVybFwiKTtcbiAgICByZXR1cm4gY3VzdG9tTWVzc2FnZSB8fCBcIkVudGVyIGEgdmFsaWQgdXJsXCI7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgaXNFbXB0eSA9ICh2YWx1ZSkgPT4ge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgaXNSZXF1aXJlZCA9IChyZXF1aXJlZCwgZW1wdHksIG1lc3NhZ2UpID0+IHtcbiAgaWYgKHJlcXVpcmVkICYmIGVtcHR5KSB7XG4gICAgY29uc3QgY3VzdG9tTWVzc2FnZSA9IGdldE1lc3NhZ2UobWVzc2FnZSwgXCJyZXF1aXJlZFwiKTtcbiAgICByZXR1cm4gY3VzdG9tTWVzc2FnZSB8fCBcIlRoaXMgZmllbGQgaXMgcmVxdWlyZWRcIjtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBzZWxlY3RWYWxpZGF0aW9uID0gKHJlcXVpcmVkLCB2YWx1ZSwgcGxhY2Vob2xkZXIpID0+XG4gICEodmFsdWUgPT09IHBsYWNlaG9sZGVyICYmIHJlcXVpcmVkKTtcblxuY29uc3QgY2hlY2tib3hWYWxpZGF0aW9uID0gKHZhbHVlcywgbWVzc2FnZSkgPT4ge1xuICBpZiAodmFsdWVzLmxlbmd0aCA8IDEpIHtcbiAgICByZXR1cm4gbWVzc2FnZSB8fCBcIlRoaXMgZmllbGQgaXMgcmVxdWlyZWRcIjtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBlbWFpbFZhbGlkYXRpb24gPSAodmFsdWVzLCBmaWVsZCkgPT4ge1xuICBjb25zdCB7IGlucHV0cywgaXNSZXF1aXJlZDogcmVxdWlyZWQsIGVycm9yTWVzc2FnZSB9ID0gZmllbGQgfHwgZmFsc2U7XG4gIGNvbnN0IHsgcmVxdWlyZWQ6IHJlcXVpcmVkTXNnLCBtaXNtYXRjaCB9ID0gZXJyb3JNZXNzYWdlIHx8IGZhbHNlO1xuXG4gIC8vIGNoZWNrIGlmIGZpZWxkcyBpcyByZXF1aXJlZCBhbmQgaXNuJ3QgZW1wdHlcbiAgY29uc3QgaXNJbnB1dHNFbXB0eSA9XG4gICAgdmFsdWVzICYmIHZhbHVlcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gJiYgaXRlbS52YWwgPT09IFwiXCIpLmxlbmd0aDtcblxuICBpZiAoKCh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCA8IDIpIHx8IGlzSW5wdXRzRW1wdHkgIT09IDApICYmIHJlcXVpcmVkKSB7XG4gICAgcmV0dXJuIHJlcXVpcmVkTXNnIHx8IFwiVGhpcyBmaWVsZCBpcyByZXF1aXJlZFwiO1xuICB9XG5cbiAgaWYgKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoID4gMCkge1xuICAgIGZvciAobGV0IGkgPSAwOyB2YWx1ZXMubGVuZ3RoID4gaTsgaSsrKSB7XG4gICAgICBjb25zdCBpc0luVmFsaWRNYWlsID0gaXNFbWFpbCh2YWx1ZXNbaV0udmFsKTtcbiAgICAgIGlmIChpc0luVmFsaWRNYWlsKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGlzSW5WYWxpZE1haWwpO1xuICAgICAgICByZXR1cm4gaXNJblZhbGlkTWFpbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBpZiB0aGVyZSBpcyByZXBlYXQgcGFzc3dvcmQgZmllbGQgPT4gY2hlY2sgaWYgbWF0Y2hcbiAgaWYgKHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoID09PSAyICYmIGlucHV0cyAmJiBpbnB1dHMubGVuZ3RoID09PSAyKSB7XG4gICAgaWYgKFxuICAgICAgdmFsdWVzWzFdICYmXG4gICAgICB2YWx1ZXNbMF0gJiZcbiAgICAgIHZhbHVlc1sxXS52YWwgIT09IFwiXCIgJiZcbiAgICAgIHZhbHVlc1sxXS52YWwgIT09IHZhbHVlc1swXS52YWxcbiAgICApIHtcbiAgICAgIHJldHVybiBtaXNtYXRjaCB8fCBcIk1pc21hdGNoXCI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgcGFzc3dvcmRWYWxpZGF0aW9uID0gKHZhbHVlcywgZmllbGQpID0+IHtcbiAgY29uc3QgeyBpbnB1dHMsIGlzUmVxdWlyZWQ6IHJlcXVpcmVkLCBlcnJvck1lc3NhZ2UgfSA9IGZpZWxkIHx8IGZhbHNlO1xuICBjb25zdCB7IHJlcXVpcmVkOiByZXF1aXJlZE1zZywgbWlzbWF0Y2ggfSA9IGVycm9yTWVzc2FnZSB8fCBmYWxzZTtcblxuICBjb25zdCBmaWx0ZXJlZElucHV0cyA9IGlucHV0cy5maWx0ZXIoKGl0ZW0pID0+ICFpdGVtLmlzSGlkZGVuKTtcblxuICAvLyBjaGVjayBpZiBmaWVsZHMgaXMgcmVxdWlyZWQgYW5kIGlzbid0IGVtcHR5XG4gIGNvbnN0IGlzSW5wdXRzRW1wdHkgPVxuICAgIHZhbHVlcyAmJiB2YWx1ZXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtICYmIGl0ZW0udmFsID09PSBcIlwiKS5sZW5ndGg7XG5cbiAgaWYgKFxuICAgICgodmFsdWVzICYmIHZhbHVlcy5sZW5ndGggPT09IDApIHx8XG4gICAgICBpc0lucHV0c0VtcHR5ID09PSBmaWx0ZXJlZElucHV0cy5sZW5ndGgpICYmXG4gICAgcmVxdWlyZWRcbiAgKSB7XG4gICAgcmV0dXJuIHJlcXVpcmVkTXNnIHx8IFwiVGhpcyBmaWVsZCBpcyByZXF1aXJlZFwiO1xuICB9XG5cbiAgLy8gaWYgdGhlcmUgaXMgcmVwZWF0IHBhc3N3b3JkIGZpZWxkID0+IGNoZWNrIGlmIG1hdGNoXG4gIGlmIChcbiAgICB2YWx1ZXMgJiZcbiAgICB2YWx1ZXMubGVuZ3RoID09PSAyICYmXG4gICAgZmlsdGVyZWRJbnB1dHMgJiZcbiAgICBmaWx0ZXJlZElucHV0cy5sZW5ndGggPT09IDJcbiAgKSB7XG4gICAgaWYgKFxuICAgICAgdmFsdWVzWzFdICYmXG4gICAgICB2YWx1ZXNbMF0gJiZcbiAgICAgIHZhbHVlc1sxXS52YWwgIT09IFwiXCIgJiZcbiAgICAgIHZhbHVlc1sxXS52YWwgIT09IHZhbHVlc1swXS52YWxcbiAgICApIHtcbiAgICAgIHJldHVybiBtaXNtYXRjaCB8fCBcIk1pc21hdGNoXCI7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgaXNEYXRlID0gKHZhbHVlcywgZmllbGQpID0+IHtcbiAgY29uc3QgdmFsaWRhdGlvbiA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmICh2YWx1ZXNbaV0pIHtcbiAgICAgIGNvbnN0IHsgdmFsLCBsYWJlbCB9ID0gdmFsdWVzW2ldO1xuICAgICAgaWYgKHZhbCkge1xuICAgICAgICBpZiAobGFiZWwgPT09IFwiTU1cIikge1xuICAgICAgICAgIGNvbnN0IG1heCA9IDEyO1xuICAgICAgICAgIGNvbnN0IG1pbiA9IDE7XG4gICAgICAgICAgY29uc3QgbWF4TGVuZ3RoID0gMjtcbiAgICAgICAgICBpZiAodmFsLmxlbmd0aCA+IG1heExlbmd0aCB8fCB2YWwgPCBtaW4gfHwgdmFsID4gbWF4KSB7XG4gICAgICAgICAgICB2YWxpZGF0aW9uW2ldID0ge1xuICAgICAgICAgICAgICBpbmRleDogaSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJFbnRlciBhIHZhbGlkIG1vbnRoXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsYWJlbCA9PT0gXCJERFwiKSB7XG4gICAgICAgICAgY29uc3QgbWF4ID0gMzE7XG4gICAgICAgICAgY29uc3QgbWluID0gMTtcbiAgICAgICAgICBjb25zdCBtYXhMZW5ndGggPSAyO1xuICAgICAgICAgIGlmICh2YWwubGVuZ3RoID4gbWF4TGVuZ3RoIHx8IHZhbCA8IG1pbiB8fCB2YWwgPiBtYXgpIHtcbiAgICAgICAgICAgIHZhbGlkYXRpb25baV0gPSB7XG4gICAgICAgICAgICAgIGluZGV4OiBpLFxuICAgICAgICAgICAgICBtZXNzYWdlOiBcIkVudGVyIGEgdmFsaWQgZGF0ZVwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobGFiZWwgPT09IFwiWVlZWVwiKSB7XG4gICAgICAgICAgY29uc3QgbWF4ID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpICsgMTtcbiAgICAgICAgICBjb25zdCBtaW4gPSAxOTIwO1xuICAgICAgICAgIGNvbnN0IG1heExlbmd0aCA9IDQ7XG4gICAgICAgICAgaWYgKHZhbC5sZW5ndGggPiBtYXhMZW5ndGggfHwgdmFsIDwgbWluIHx8IHZhbCA+IG1heCkge1xuICAgICAgICAgICAgdmFsaWRhdGlvbltpXSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IGksXG4gICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRW50ZXIgYSB2YWxpZCB5ZWFyXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsaWRhdGlvbjtcbn07XG5cbmNvbnN0IHZhbGlkYXRlRmllbGQgPSAodmFsdWUsIGZpZWxkKSA9PiB7XG4gIGNvbnN0IHsgdHlwZSwgaXNSZXF1aXJlZDogcmVxdWlyZWQgfSA9IGZpZWxkO1xuICAvLyBDaGVjayBmaXJzdCBpZiByZXF1cmllZCBjaGVja2JveCBvciByYWRpb1xuICBpZiAoKHR5cGUgPT09IFwiY2hlY2tib3hcIiB8fCB0eXBlID09PSBcInJhZGlvXCIpICYmIHJlcXVpcmVkKSB7XG4gICAgcmV0dXJuIGNoZWNrYm94VmFsaWRhdGlvbih2YWx1ZSwgZmllbGQuZXJyb3JNZXNzYWdlKTtcbiAgfVxuXG4gIGlmICh0eXBlID09PSBcInBhc3N3b3JkXCIpIHtcbiAgICByZXR1cm4gcGFzc3dvcmRWYWxpZGF0aW9uKHZhbHVlLCBmaWVsZCk7XG4gIH1cblxuICBpZiAodHlwZSA9PT0gXCJlbWFpbFwiICYmIGZpZWxkLmVtYWlsQ29uZmlybUVuYWJsZWQpIHtcbiAgICByZXR1cm4gZW1haWxWYWxpZGF0aW9uKHZhbHVlLCBmaWVsZCk7XG4gIH1cblxuICAvLyBDaGVjayBpZiBlbXB0eVxuICBjb25zdCBlbXB0eSA9IGlzRW1wdHkodmFsdWUpO1xuICBsZXQgdmFsaWRhdGlvbk1lc3NhZ2UgPSBcIlwiO1xuICBjb25zdCBtZXNzYWdlID0gZmllbGQgJiYgZmllbGQuZXJyb3JNZXNzYWdlID8gZmllbGQuZXJyb3JNZXNzYWdlIDogZmFsc2U7XG4gIC8vIFNldCB2YWxpZGF0aW9uIG1lc3NhZ2UgaWYgcmVxdWlyZWRcbiAgdmFsaWRhdGlvbk1lc3NhZ2UgPSByZXF1aXJlZCA/IGlzUmVxdWlyZWQocmVxdWlyZWQsIGVtcHR5LCBtZXNzYWdlKSA6IGZhbHNlO1xuICAvLyBTZXQgb3RoZXIgdmFsaWRhdGlvbiBtZXNzYWdlc1xuICBpZiAoIXZhbGlkYXRpb25NZXNzYWdlICYmICFlbXB0eSkge1xuICAgIGlmICh0eXBlID09PSBcImVtYWlsXCIpIHtcbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlID0gaXNFbWFpbCh2YWx1ZSwgbWVzc2FnZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcIndlYnNpdGVcIikge1xuICAgICAgdmFsaWRhdGlvbk1lc3NhZ2UgPSBpc1VybCh2YWx1ZSwgbWVzc2FnZSk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBcImRhdGVcIikge1xuICAgICAgbGV0IGlzVmFsaWQgPSB0cnVlO1xuICAgICAgaWYgKGZpZWxkLmRhdGVUeXBlICYmIGZpZWxkLmRhdGVUeXBlID09PSBcImRhdGVwaWNrZXJcIikge1xuICAgICAgICBpc1ZhbGlkID0gcmVxdWlyZWQgPyBpc1JlcXVpcmVkKHJlcXVpcmVkLCBlbXB0eSwgbWVzc2FnZSkgOiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlzVmFsaWQgPSBpc0RhdGUodmFsdWUsIGZpZWxkKTtcbiAgICAgIH1cbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlID0gaXNWYWxpZC5sZW5ndGggPiAwID8gaXNWYWxpZCA6IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsaWRhdGlvbk1lc3NhZ2U7XG59O1xuXG5leHBvcnQge1xuICBpc0VtcHR5LFxuICBzZWxlY3RWYWxpZGF0aW9uLFxuICBjaGVja2JveFZhbGlkYXRpb24sXG4gIGlzVXJsLFxuICBpc0VtYWlsLFxuICBpc1JlcXVpcmVkLFxuICB2YWxpZGF0ZUZpZWxkLFxufTtcbiJdfQ==